/*!
 * SAP UI development toolkit for HTML5 (SAPUI5)

		(c) Copyright 2009-2015 SAP SE. All rights reserved
	
 */
sap.ui.define(["./Shape","sap/gantt/library"],function(S,l){"use strict";var T=l.simple.shapes.TaskType;var C=10;var a=S.extend("sap.gantt.simple.shapes.Task",{metadata:{properties:{type:{type:"sap.gantt.simple.shapes.TaskType",defaultValue:T.Normal},utilizationDown:{type:"boolean",defaultValue:true}}}});a.prototype._generateRectD=function(s){var c=this.getRowYCenter(),d="";d+="M "+s.iStartX+" "+c;var u=s.iHeight/2,L=s.iEndX-s.iStartX,r=this.generateArcRadius(u,L);d+=" l 0 "+(-u+r);d+=" a "+r+" "+r+" 0 0 1 "+r+" "+(-r);L-=r;var R=this.generateArcRadius(L-r,u);L-=R;d+=" l "+L+" 0";d+=" a "+R+" "+R+" 0 0 1 "+R+" "+R;d+=" l 0 "+(2*u-R-r);d+=" a "+R+" "+R+" 0 0 1 "+(-R)+" "+R;d+=" l "+(-L)+" 0";d+=" a "+r+" "+r+" 0 0 1 "+(-r)+" "+(-r);d+=" Z";return d;};a.prototype.renderNoramlTask=function(r,s){var d=this._generateRectD(s);r.write("<path d=\""+d+"\" ");if(this.getHoverState()){r.write("fill=\""+this.getHoverBackgroundColor()+"\" stroke-width=\"1\" stroke=\""+this.getHoverColor()+"\"");}else if(this.getSelected()){r.write("fill=\""+this.getSelectedColor()+"\"");}else{r.write("fill=\""+this.getTranslatedColor()+"\"");}r.write(" />");};a.prototype.renderSummaryTaskExpanded=function(r,s){if(Math.abs(s.iEndX-s.iStartX)<=C){this.renderNoramlTask(r,s);}else{var c=this.getRowYCenter(),d="";d+="M "+s.iStartX+" "+c;var u=s.iHeight/2,L=s.iEndX-s.iStartX,R=this.generateArcRadius(u,L);d+=" l 0 "+(-u+R);d+=" a "+R+" "+R+" 0 0 1 "+R+" "+(-R);L-=R;var i=this.generateArcRadius(L-R,u);L-=i;d+=" l "+L+" 0";d+=" a "+i+" "+i+" 0 0 1 "+i+" "+i;d+=" l 0 "+(2*u-i-3);d+=" a 3 5 0 0 1 -5 0";d+=" l 0 "+(-2*u+i+5);d+=" l "+(-L+10-R-i)+" 0";d+=" l 0 "+(2*u-R-5);d+=" a 3 5 0 0 1 -5 0";d+=" Z";r.write("<path d=\""+d+"\"");if(this.getHoverState()){r.write("fill=\""+this.getHoverBackgroundColor()+"\" stroke-width=\"1\" stroke=\""+this.getHoverColor()+"\"");}else if(this.getSelected()){r.write(" fill=\""+this.getSelectedColor()+"\"");if(s.bFromCollapsed){r.write(" stroke-width=\"1.0001\" stroke=\"white\" shape-rendering=\"crispEdges\"");}}else{r.write(" fill=\""+this.getTranslatedColor()+"\"");}r.write(" />");}};a.prototype.renderSummaryTaskCollapsed=function(r,s){if(Math.abs(s.iEndX-s.iStartX)<=C){this.renderNoramlTask(r,s);}else{var d=this._generateRectD(s);r.write("<path d=\""+d+"\"");if(this.getHoverState()){r.write("fill=\""+this.getHoverBackgroundColor()+"\" stroke-width=\"1\" stroke=\""+this.getHoverColor()+"\"");}else if(this.getSelected()){r.write(" fill=\""+this.getSelectedColor()+"\"");}else{r.write(" fill=\""+this.getTranslatedColor()+"\" fill-opacity=\"0.7\"");}r.write(" />");this.renderSummaryTaskExpanded(r,Object.assign({},s,{bFromCollapsed:true}));}};a.prototype.renderErrorTask=function(r,s){var m=this.getId()+"-mask",p=this.getGanttChartBase().getId()+"-helperDef-linePattern",d=this._generateRectD(s),b,f;if(this.getHoverState()){b=this.getHoverColor();f=this.getHoverBackgroundColor();}else if(this.getSelected()){b=f=this.getSelectedColor();}else{b=f=this.getTranslatedColor();}r.write("<mask id=\""+m+"\">");r.write("<path d=\""+d+"\" stroke=\"white\" stroke-width=\"1\" fill=\"url(#"+p+")\" />");r.write("</mask>");r.write("<path d=\""+d+"\" stroke=\""+b+"\" stroke-width=\"1\" fill=\""+f+"\" mask=\"url(#"+m+")\" />");};a.prototype.renderElement=function(r){r.write("<g");this.writeElementData(r);r.write(" pointer-events=\"bounding-box\">");var s={iHeight:this.getPixelHeight()-12,iStartX:this.getXStart(),iEndX:this.getXEnd()};switch(this.getType()){case T.Normal:this.renderNoramlTask(r,s);break;case T.Error:this.renderErrorTask(r,s);break;case T.SummaryCollapsed:this.renderSummaryTaskCollapsed(r,s);break;case T.SummaryExpanded:this.renderSummaryTaskExpanded(r,s);break;default:throw new Error("Unknown type of Task: "+this.getType());}r.write("</g>");};return a;});
