sap.ui.require.preload({"sap/ushell/components/shell/UserSettings/Component.js":function(){
// ${copyright}
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ushell/Config","sap/ushell/components/shell/UserSettings/UserPreferences","sap/ushell/components/shell/UserSettings/UserSettings.controller"],function(U,J,C,a){"use strict";var d=[];return U.extend("sap.ushell.components.shell.UserSettings.Component",{metadata:{rootView:{"viewName":"sap.ushell.components.shell.UserSettings.UserSettings","type":"XML","async":false,"id":"View"},version:"${version}",library:"sap.ushell.components.shell.UserSettings",dependencies:{libs:["sap.m","sap.ui.comp"]}},createId:function(i){return"sapFlpUserSettings-"+i;},init:function(){U.prototype.init.apply(this,arguments);var m=new J({entries:C.last("/core/shell/model/userPreferences/entries"),profiling:C.last("/core/shell/model/userPreferences/profiling")});var s=sap.ui.getCore().byId("shell").getModel();var v=this.getRootControl();v.setModel(m,"entries");v.setModel(s);d.push(C.on("/core/shell/model/userPreferences/entries").do(function(r){v.getModel("entries").setProperty("/entries",r);}));d.push(C.on("/core/shell/model/userPreferences/profiling").do(function(r){v.getModel("entries").setProperty("/profiling",r);}));sap.ui.getCore().byId("shell").addDependent(v);this._getSearchPrefs();a.setModel();},_getSearchPrefs:function(){function i(){try{return C.last("/core/shellHeader/headEndItems").indexOf("sf")!==-1;}catch(e){jQuery.sap.log.debug("Shell controller._createWaitForRendererCreatedPromise: search button is not visible.");return false;}}if(i()){sap.ui.require(["sap/ushell/renderers/fiori2/search/userpref/SearchPrefs","sap/ushell/renderers/fiori2/search/SearchShellHelperAndModuleLoader"],function(S){var s=S.getEntry(),r=sap.ushell.Container.getRenderer("fiori2");s.isSearchPrefsActive().done(function(b){if(b&&r){r.addUserProfilingEntry(s);}});});}},exit:function(){for(var i=0;i<d.length;i++){d.off();}}});});},"sap/ushell/components/shell/UserSettings/DefaultParameters.controller.js":function(){sap.ui.define(["sap/ui/comp/smartform/SmartForm","sap/ui/model/odata/ODataModel","sap/ui/comp/smartfield/SmartField","sap/ui/comp/valuehelpdialog/ValueHelpDialog","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/Device","sap/ui/model/json/JSONModel","sap/ui/comp/smartform/GroupElement","sap/ui/comp/smartform/Group","sap/ui/layout/GridData","sap/m/Button","sap/ushell/resources","sap/m/library","sap/ui/comp/smartfield/SmartLabel","sap/m/Input","sap/m/FlexItemData","sap/m/FlexBox","sap/ui/comp/library","sap/m/Token"],function(S,O,a,V,q,L,D,J,G,b,c,B,r,m,d,I,F,e,f,T){"use strict";var g=f.valuehelpdialog.ValueHelpRangeOperation;var h=m.ButtonType;sap.ui.controller("sap.ushell.components.shell.UserSettings.DefaultParameters",{onInit:function(){this.oModelRecords={};this.oChangedParameters={};this.oBlockedParameters={};this.aDisplayedUserDefaults=[];this.DefaultParametersService=sap.ushell.Container.getService("UserDefaultParameters");},applyFocus:function(){var t=this;setTimeout(function(){if(!D.phone){var i=t.getView().$().firstFocusableDomRef();if(i){i.focus();}}},1);},overrideOdataModelValue:function(E){var u=E.getParameter("url"),M=E.getSource(),s,i,t=this;this.aDisplayedUserDefaults.forEach(function(R){if(R.editorMetadata&&R.editorMetadata.editorInfo){i=R.editorMetadata.editorInfo.odataURL+R.editorMetadata.editorInfo.bindingPath;if(i===u){s=R.editorMetadata.editorInfo.bindingPath+"/"+R.editorMetadata.editorInfo.propertyName;if(M.getProperty(s)!==R.valueObject.value){M.setProperty(s,R.valueObject.value);}t.oBlockedParameters[R.parameterName]=false;}}});},getOrCreateModelForODataService:function(u){if(!this.oModelRecords[u]){var p={metadataUrlParams:{"sap-documentation":"heading,quickinfo","sap-value-list":"none"},json:true};var M=new O(u,p);M.setDefaultCountMode("None");M.setDefaultBindingMode("TwoWay");M.attachRequestCompleted(this.overrideOdataModelValue.bind(this));this.oModelRecords[u]=M;}return this.oModelRecords[u];},constructControlSet:function(p){var u=[];for(var P in p){for(var n=0;n<u.length;n++){if(u[n].parameterName===P){u.splice(n,1);}}p[P].parameterName=P;u.push(p[P]);}this.sortParametersByGroupIdParameterIndex(u);this.aDisplayedUserDefaults=u;this.sForm=new S({editable:true}).addStyleClass("sapUshellShellDefaultValuesForm");this.getView().addContent(this.sForm);},getValue:function(){var i=q.Deferred();var H=sap.ushell.Container.getService("UserDefaultParameters").hasRelevantMaintainableParameters();H.done(function(j){i.resolve({value:j?1:0,displayText:" "});});H.fail(function(E){i.reject(E);});return i.promise();},createPlainModel:function(i,R){R.modelBind.model=this.oMdlParameter;R.modelBind.extendedModel=this.oMdlParameter;i.setModel(R.modelBind.model);var M="/sUserDef_"+R.nr+"_";R.modelBind.sFullPropertyPath=M;R.modelBind.sPropertyName="{"+M+"}";R.modelBind.model.setProperty(R.modelBind.sFullPropertyPath,R.valueObject.value);},revertToPlainModelControls:function(i,R){L.error("Metadata loading for parameter "+R.parameterName+" failed"+JSON.stringify(R.editorMetadata));R.modelBind.isOdata=false;this.createPlainModel(i,R);this.createAppropriateControl(i,R);},getContent:function(){var t=this;var j=new q.Deferred();this.DefaultParametersService.editorGetParameters().done(function(p){t.oMdlParameter=new J(p);t.oMdlParameter.setDefaultBindingMode("TwoWay");t.getView().setModel(t.oMdlParameter,"MdlParameter");t.oOriginalParameters=q.extend(true,{},p);t.oCurrentParameters=q.extend(true,{},p);t.constructControlSet(p);var l="nevermore";var k;t.aChangedParameters=[];t.oBindingContexts={};t.setPropValue=function(R){R.modelBind.model.setProperty(R.modelBind.sFullPropertyPath,R.valueObject.value);t.oBlockedParameters[R.parameterName]=false;};t.oMdlParameter.setProperty("/sUser");for(var i=0;i<t.aDisplayedUserDefaults.length;++i){var R=t.aDisplayedUserDefaults[i];R.nr=i;R.editorMetadata=R.editorMetadata||{};R.valueObject=R.valueObject||{value:""};var n=new G({});if(l!==R.editorMetadata.groupId){var o=R.editorMetadata.groupTitle||undefined;k=new b({label:o,"editable":true,layoutData:new c({linebreak:false})});l=R.editorMetadata.groupId;t.sForm.addGroup(k);}k.addGroupElement(n);R.modelBind={model:undefined,sModelPath:undefined,sPropertyName:undefined,sFullPropertyPath:undefined};R.valueObject.value=R.valueObject.value||"";if(R.editorMetadata.editorInfo&&R.editorMetadata.editorInfo.propertyName){R.modelBind.isOdata=true;var u=R.editorMetadata.editorInfo.odataURL;R.modelBind.model=t.getOrCreateModelForODataService(u);n.setModel(R.modelBind.model);if(!t.oBindingContexts[u]){n.bindElement(R.editorMetadata.editorInfo.bindingPath);t.oBindingContexts[u]=R.modelBind.model.getContext(R.editorMetadata.editorInfo.bindingPath);}else{n.setBindingContext(t.oBindingContexts[u]);}R.modelBind.sPropertyName="{"+R.editorMetadata.editorInfo.propertyName+"}";R.modelBind.sFullPropertyPath=R.editorMetadata.editorInfo.bindingPath+"/"+R.editorMetadata.editorInfo.propertyName;R.modelBind.extendedModel=t.oMdlParameter;}else{t.createPlainModel(n,R);}R.valueObject.value=R.valueObject.value||"";R.modelBind.model.setProperty(R.modelBind.sFullPropertyPath,R.valueObject.value);if(R.modelBind.isOdata){t.oBlockedParameters[R.parameterName]=true;R.modelBind.model.attachMetadataLoaded(t.createAppropriateControl.bind(t,n,R));R.modelBind.model.attachMetadataFailed(t.revertToPlainModelControls.bind(t,n,R));}else{t.createAppropriateControl(n,R);}R.modelBind.model.bindTree(R.modelBind.sFullPropertyPath).attachChange(t.storeChangedData.bind(t));}t.oMdlParameter.bindTree("/").attachChange(t.storeChangedData.bind(t));j.resolve(t.getView());});return j.promise();},createAppropriateControl:function(i,R){var s,l,j,k;if(R.editorMetadata.extendedUsage){var t=this;j=new B({text:r.i18n.getText("userDefaultsExtendedParametersTitle"),tooltip:r.i18n.getText("userDefaultsExtendedParametersTooltip"),type:{parts:["MdlParameter>/"+R.parameterName+"/valueObject/extendedValue/Ranges"],formatter:function(p){return p&&p.length?h.Emphasized:h.Transparent;}},press:function(p){t.openExtendedValueDialog(p,R);}}).addStyleClass("sapUshellExtendedDefaultParamsButton");}L.debug("Creating controls for parameter"+R.parameterName+" type "+R.modelBind.isOdata);var E=i.getElements().slice();E.forEach(function(p){i.removeElement(p);});var n=i.getFields().slice();n.forEach(function(p){i.removeField(p);});l=new d({width:D.system.phone?"auto":"12rem",textAlign:D.system.phone?"Left":"Right"});if(R.modelBind.isOdata&&R.editorMetadata.editorInfo){s=new a({value:R.modelBind.sPropertyName,name:R.parameterName});s.attachInnerControlsCreated({},this.applyFocus,this);l.setLabelFor(s);}else{s=new I({name:R.parameterName,value:R.modelBind.sPropertyName,type:"Text"});s.addAriaLabelledBy(l);this.setPropValue(R);l.setText((R.editorMetadata.displayText||R.parameterName)+":");l.setTooltip(R.editorMetadata.description||R.parameterName);}s.attachChange(this.storeChangedData.bind(this));s.addStyleClass("sapUshellDefaultValuesSmartField");s.setLayoutData(new F({shrinkFactor:0}));var o=new e({width:D.system.phone?"100%":"auto",direction:(D.system.phone&&!j)?"Column":"Row",items:[s,j]});l.setLayoutData(new F({shrinkFactor:0}));k=new e({alignItems:D.system.phone?"Start":"Center",direction:D.system.phone?"Column":"Row",items:[l,o]});i.addElement(k);},openExtendedValueDialog:function(E,o){var t=this,p="/"+o.parameterName+"/valueObject/extendedValue/Ranges",M=o.modelBind.extendedModel,R=M.getProperty(p)||[],l,n;if(o.modelBind.isOdata){n=this._getMetadataNameSpace(o.editorMetadata.editorInfo.odataURL);var i=o.modelBind.model.getMetaModel().getODataEntityType(n+"."+o.editorMetadata.editorInfo.entityName);if(i){l=o.modelBind.model.getMetaModel().getODataProperty(i,o.editorMetadata.editorInfo.propertyName)["sap:label"];}}var v=new V({basicSearchText:o.editorMetadata.displayText||l||o.parameterName,title:o.editorMetadata.displayText||l||o.parameterName,supportRanges:true,supportRangesOnly:true,key:o.modelBind.sPropertyName,displayFormat:"UpperCase",descriptionKey:o.editorMetadata.displayText||l||o.parameterName,filterMode:true,stretch:D.system.phone,ok:function(C){t.saveExtendedValue(C,o,M,v);},cancel:function(){v.close();},afterClose:function(){v.destroy();}});v.setIncludeRangeOperations(this.getListOfSupportedRangeOperations());this.addTokensToValueHelpDialog(v,R,o.parameterName);var k=[];k.push({label:v.getTitle(),key:o.parameterName});v.setRangeKeyFields(k);v.open();},saveExtendedValue:function(C,o,M,v){this.aTokens=C.getParameters().tokens;var t=[],p="/"+o.parameterName+"/valueObject/extendedValue/Ranges",i,j={extendedValue:{"Ranges":[]}};q.extend(this.oCurrentParameters[o.parameterName].valueObject,j);for(var k in this.aTokens){if(this.aTokens.hasOwnProperty(k)){t.push(this.aTokens[k].data("range"));}}i=t.map(function(k){return{Sign:k.exclude?"E":"I",Option:k.operation!=="Contains"?k.operation:"CP",Low:k.value1,High:k.value2||null};});if(!M.getProperty("/"+o.parameterName+"/valueObject/extendedValue")){M.setProperty("/"+o.parameterName+"/valueObject/extendedValue",{});}M.setProperty(p,i);this.oChangedParameters[o.parameterName]=true;v.close();},getListOfSupportedRangeOperations:function(){var s=Object.keys(g);return s.filter(function(o){return o!=="StartsWith"&&o!=="EndsWith"&&o!=="Initial";});},_getMetadataNameSpace:function(s){var i=s.split("/"),n;n=i[i.length-1];return n;},addTokensToValueHelpDialog:function(o,R,p){var t=[],i;R.forEach(function(j){if(j){i={};i.exclude=j.Sign==="E";i.keyField=p;i.operation=j.Option!=="CP"?j.Option:"Contains";i.value1=j.Low;i.value2=j.High;t.push(new T({}).data("range",i));}});o.setTokens(t);},sortParametersByGroupIdParameterIndex:function(u){function i(o,k){if(!(k.editorMetadata&&k.editorMetadata.groupId)){return-1;}if(!(o.editorMetadata&&o.editorMetadata.groupId)){return 1;}if(o.editorMetadata.groupId<k.editorMetadata.groupId){return-1;}if(o.editorMetadata.groupId>k.editorMetadata.groupId){return 1;}return 0;}function j(o,k){if(!(k.editorMetadata&&k.editorMetadata.parameterIndex)){return-1;}if(!(o.editorMetadata&&o.editorMetadata.parameterIndex)){return 1;}return o.editorMetadata.parameterIndex-k.editorMetadata.parameterIndex;}u.sort(function(o,k){var l=i(o,k);if(l===0){return j(o,k);}return l;});},storeChangedData:function(){var i=0,t=this,j=t.aDisplayedUserDefaults;for(i=0;i<j.length;++i){var p=j[i].parameterName;if(!t.oBlockedParameters[p]){var o={value:t.oCurrentParameters[p].valueObject&&t.oCurrentParameters[p].valueObject.value,extendedValue:t.oCurrentParameters[p].valueObject&&t.oCurrentParameters[p].valueObject.extendedValue&&t.oCurrentParameters[p].valueObject.extendedValue};if(j[i].modelBind&&j[i].modelBind.model){var M=j[i].modelBind.model;var k=j[i].modelBind.extendedModel;var P=j[i].modelBind.sFullPropertyPath;var A=M.getProperty(P);var n={value:M.getProperty(P),extendedValue:k.getProperty("/"+p+"/valueObject/extendedValue")};if(this.isValueDifferent(n,o)){t.oCurrentParameters[p].valueObject.value=A;if(n.extendedValue){q.extend(t.oCurrentParameters[p].valueObject.extendedValue,n.extendedValue);}t.oChangedParameters[p]=true;}}}}},onCancel:function(){if(sap.ui.getCore().byId("saveButton")){sap.ui.getCore().byId("saveButton").setEnabled(true);}},isValueDifferent:function(v,o){var i=false,s=v?JSON.stringify(v):v,j=o?JSON.stringify(o):o,E,k;if(s===j){return false;}if(v===undefined){return false;}if(o===undefined){return false;}E=v.extendedValue?JSON.stringify(v.extendedValue):v.extendedValue;k=o.extendedValue?JSON.stringify(o.extendedValue):o.extendedValue;if((v.value===""&&o.value===undefined)||(o.value===""&&v.value===undefined)){i=true;}if(i&&(E===k)){return false;}return(!i&&(v.value!==o.value))||(E!==k);},onSave:function(){var t=this,j=new q.Deferred(),i,C=Object.keys(this.oChangedParameters).sort(),s,p;if(C.length===0){j.resolve();}for(i=0;i<C.length;i++){p=C[i];if(this.isValueDifferent(this.oOriginalParameters[p].valueObject,this.oCurrentParameters[p].valueObject)){if((this.oCurrentParameters[p].valueObject&&this.oCurrentParameters[p].valueObject.value===null)||(this.oCurrentParameters[p].valueObject&&this.oCurrentParameters[p].valueObject.value==="")){this.oCurrentParameters[p].valueObject.value=undefined;}if(this.oCurrentParameters[p].valueObject&&this.oCurrentParameters[p].valueObject.extendedValue&&Array.isArray(this.oCurrentParameters[p].valueObject.extendedValue.Ranges)&&(this.oCurrentParameters[p].valueObject.extendedValue.Ranges.length===0)){this.oCurrentParameters[p].valueObject.extendedValue=undefined;}s=sap.ushell.Container.getService("UserDefaultParameters").editorSetValue(p,this.oCurrentParameters[p].valueObject);s.done(function(P){t.oChangedParameters={};t.oOriginalParameters[P].valueObject.value=t.oCurrentParameters[P].valueObject.value;j.resolve();});s.fail(j.reject);}}return j.promise();}});});},"sap/ushell/components/shell/UserSettings/DefaultParameters.view.js":function(){sap.ui.define([],function(){"use strict";sap.ui.jsview("sap.ushell.components.shell.UserSettings.DefaultParameters",{createContent:function(){},getControllerName:function(){return"sap.ushell.components.shell.UserSettings.DefaultParameters";}});});},"sap/ushell/components/shell/UserSettings/FlpSettings.controller.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/ui/Device","sap/ui/model/resource/ResourceModel"],function(C,J,D,R){"use strict";return C.extend("sap.ushell.components.shell.UserSettings.FlpSettings",{DISPLAY_MODES:{"scroll":0,"tabs":1,getName:function(v){return Object.keys(this)[v];}},onInit:function(){this.oConfModel=new J({});this.oConfModel.setData({isRTL:sap.ui.getCore().getConfiguration().getRTL(),flexAlignItems:D.system.phone?"Stretch":"Start",textAlign:D.system.phone?"Begin":"End",textDirection:D.system.phone?"Column":"Row",labelWidth:D.system.phone?"auto":"12rem"});this.getView().setModel(this.oConfModel,"config");var r=new R({bundleUrl:sap.ui.require.toUrl("sap/ushell/renderers/fiori2/resources/resources")+".properties"});this.getView().setModel(r,"i18n");var i=this.getView().getViewData().initialDisplayMode;this.iCurrentMode=this.DISPLAY_MODES[i]||this.DISPLAY_MODES.scroll;},onBeforeRendering:function(){this.oConfModel.setProperty("/displayMode",this.iCurrentMode);},onSave:function(){this.iCurrentMode=this.oConfModel.getProperty("/displayMode");return this.DISPLAY_MODES.getName(this.iCurrentMode);}});});},"sap/ushell/components/shell/UserSettings/FlpSettings.view.xml":'<View controllerName="sap.ushell.components.shell.UserSettings.FlpSettings"\n      width="100%"\n      xmlns:m="sap.m">\n\n    <m:VBox visible="true" class="sapUiSmallMargin">\n        <m:items>\n            <m:HBox>\n                <m:items>\n                    <m:Label text="{i18n>AnchorBarLabel}:"\n                             class="sapUshellFlpSettingsLabel"\n                             width="{config>/labelWidth}"\n                             textAlign="{config>/textAlign}"\n                             id="anchorBarLabel"/>\n                    <m:VBox>\n                        <m:items>\n                            <m:RadioButtonGroup selectedIndex="{config>/displayMode}"\n                                                ariaLabelledBy="anchorBarLabel"\n                                                ariaDescribedBy="anchorBarDescription">\n                                <m:buttons>\n                                    <m:RadioButton text="{i18n>anchorBarScrollMode}"\n                                                   class="sapUshellAnchorBarScrollMode"\n                                                   ariaLabelledBy="anchorBarLabel"/>\n                                    <m:RadioButton text="{i18n>anchorBarTabMode}"\n                                                   class="sapUshellAnchorBarTabsMode"\n                                                   ariaLabelledBy="anchorBarLabel"/>\n                                </m:buttons>\n                            </m:RadioButtonGroup>\n                            <m:VBox class ="sapUshellFlpSettingsDescriptionBorder">\n                                <m:items>\n                                    <m:Text text="{i18n>homePageGroupDisplayDescriptionText}"\n                                            class="sapUshellFlpSettingsDescription"\n                                            id="anchorBarDescription" />\n                                    <!-- second paragraph will be shown only if the user has edit option for his dashboard -->\n                                    <m:Text text="{i18n>homePageGroupDisplayDescriptionText_secondParagraph}"\n                                            class="sapUshellFlpSettingsDescription"\n                                            visible="false"/>\n                                </m:items>\n                            </m:VBox>\n                        </m:items>\n                    </m:VBox>\n                </m:items>\n            </m:HBox>\n        </m:items>\n    </m:VBox>\n</View>',"sap/ushell/components/shell/UserSettings/LanguageRegionSelector.controller.js":function(){sap.ui.define(["sap/ui/performance/Measurement","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/Locale","sap/ushell/resources","sap/ui/core/LocaleData","sap/ui/model/json/JSONModel"],function(M,q,L,a,r,b,J){"use strict";sap.ui.controller("sap.ushell.components.shell.UserSettings.LanguageRegionSelector",{onInit:function(){try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser();}catch(e){L.error("Getting UserInfo service failed.");this.oUser=sap.ushell.Container.getUser();}this.bIsSetLanguage=sap.ushell.Container.getRenderer("fiori2").getModelConfiguration().enableSetLanguage;this.isLanguageChanged=false;this.isLanguagePersonalized=this.oUser.isLanguagePersonalized();this.sLanguage=this._getFormatedLanguage(this.oUser.getLanguage());this.aLanguageList=null;var m=new J();var s=this.oUser.getLanguageText();var c={languageList:[{key:this.sLanguage,text:s}],selectedLanguage:this.sLanguage,selectedLanguageText:s};var l=sap.ui.getCore().getConfiguration().getFormatSettings().getFormatLocale();var o=b.getInstance(l);var d=o.getDatePattern("medium"),t=o.getTimePattern("medium"),T=(t.indexOf("H")===-1)?"12h":"24h";c.datePatternList=[{text:d,key:d}];c.timeFormat=T;c.selectedDatePattern=d;var h=this.oView.hourFormatSegmentedButton.getButtons();var f=(T==="12h")?h[0]:h[1];this.oView.hourFormatSegmentedButton.setSelectedButton(f);m.setData(c);this.oView.setModel(m);},getContent:function(){var d=q.Deferred();var t=this;if(this.bIsSetLanguage){M.start("FLP:LanguageRegionSelector.getContent","getContent","FLP");var c=this._getLanguagesList();c.done(function(l){if(l){if(l.length>1){if(!t.isLanguagePersonalized){t.getView().getModel().setProperty("/selectedLanguage","default");}else{t.getView().getModel().setProperty("/selectedLanguage",t.oUser.getLanguage());}t.getView().getModel().setSizeLimit(l.length);t.getView().getModel().setProperty("/languageList",l);t.oView.inputLanguage.setVisible(false);t.oView.selectLanguage.setVisible(true);t.oView.helpingText.setVisible(true);t.oView.helpingTextLabel.setVisible(true);}}M.end("FLP:LanguageRegionSelector.getContent");d.resolve(t.getView());});c.fail(function(e){L.error(e);d.resolve(t.getView());});}else{d.resolve(t.getView());}return d.promise();},getValue:function(){var d=q.Deferred();var s=this.getView().getModel().getProperty("/selectedLanguage");var u=this.oUser.getLanguage();if(s==="default"){d.resolve(this._getFormatedLanguage(u)+" | "+r.i18n.getText("timeFormatFld")+": "+this.getView().getModel().getProperty("/timeFormat"));}else{d.resolve(this._getFormatedLanguage(s)+" | "+r.i18n.getText("timeFormatFld")+": "+this.getView().getModel().getProperty("/timeFormat"));}return d.promise();},onCancel:function(){var d=q.Deferred();if(this.bIsSetLanguage){this.isLanguageChanged=false;var s=this.getView().getModel().getProperty("/selectedLanguage");if(!this.isLanguagePersonalized||this.oUser.getLanguage()!==s){this._handleSelectChange(this.oUser.getLanguage(),"Cancel");d.resolve();}else{d.resolve();}}else{d.resolve();}return d.promise();},onSave:function(){var d=q.Deferred();var o;var s=this.getView().getModel().getProperty("/selectedLanguage");if(this.isLanguageChanged){if(s){o=this.oUser.getLanguage();this.oUser.setLanguage(s);this.userInfoService.updateUserPreferences(this.oUser).done(function(){d.resolve();window.location.reload();}).fail(function(e){this.oUser.setLanguage(o);this._handleSelectChange(o,"Cancel");L.error(e);d.reject(e);}.bind(this));}}else{d.resolve();}return d.promise();},_getFormatedLanguage:function(l){if(l&&l.indexOf("-")>-1){l=l.replace("-"," (").concat(")").toUpperCase();}else if(l){l=l.toUpperCase();}return l;},_handleSelectChange:function(l,m){var o=new a(l);var c=b.getInstance(o);var d=c.getDatePattern("medium"),t=c.getTimePattern("medium"),T=(t.indexOf("H")===-1)?"12h":"24h";this.isLanguageChanged=true;if(m==="Cancel"){if(!this.isLanguagePersonalized){this.getView().selectLanguage.setSelectedKey("default");}else{this.getView().selectLanguage.setSelectedKey(l);}this.isLanguageChanged=false;}this.getView().comboDate.setValue(d);var h=this.getView().hourFormatSegmentedButton.getButtons();var s=(T==="12h")?h[0]:h[1];this.getView().hourFormatSegmentedButton.setSelectedButton(s);},_getLanguagesList:function(){var R=q.Deferred();if(this.aLanguageList===null){M.start("FLP:LanguageRegionSelector._getLanguagesList","_getLanguagesList","FLP");var g=this.userInfoService.getLanguageList();g.done(function(d){M.end("FLP:LanguageRegionSelector._getLanguagesList");R.resolve(d);});g.fail(function(){R.reject("Failed to load language list.");});}else{R.resolve(this.aLanguageList);}return R.promise();}});});},"sap/ushell/components/shell/UserSettings/LanguageRegionSelector.view.js":function(){sap.ui.define(["sap/m/VBox","sap/m/Button","sap/m/SegmentedButton","sap/m/ComboBox","sap/m/Text","sap/m/FlexBox","sap/m/Input","sap/m/Select","sap/m/Label","sap/ui/Device","sap/ushell/resources","sap/ui/core/Item"],function(V,B,S,C,T,F,I,a,L,D,r,b){"use strict";sap.ui.jsview("sap.ushell.components.shell.UserSettings.LanguageRegionSelector",{createContent:function(c){var i=new b({key:"{key}",text:"{text}"});var d=r.i18n;var l="languageSelectionSelect";var s="dateFormatCombo";var f=D.system.phone?"Column":"Row";var g=D.system.phone?"Stretch":"Center";var t=D.system.phone?"Left":"Right";var h=D.system.phone?"auto":"12rem";var j=D.system.phone?"auto":"16rem";var k=D.system.phone?"100%":undefined;var m=new L("languageSelectionLabel",{text:{path:"/selectedLanguage",formatter:function(e){e=c._getFormatedLanguage(e);return d.getText(e.indexOf("(")>-1?"languageAndRegionTit":"languageRegionFld")+":";}},width:h,textAlign:t,labelFor:l});this.selectLanguage=new a("languageSelectionSelect",{visible:false,width:j,items:{path:"/languageList",template:i},selectedKey:"{/selectedLanguage}",change:function(e){var x=e.getParameters().selectedItem.getKey();c._handleSelectChange(x);}}).addAriaLabelledBy(m);this.inputLanguage=new I("languageSelectionInput",{visible:true,value:"{/selectedLanguageText}",editable:false}).addAriaLabelledBy(m);var n=new F({alignItems:g,direction:f,items:[m,this.selectLanguage,this.inputLanguage]});this.helpingTextLabel=new L({visible:false,text:"",width:h,textAlign:t});this.helpingText=new T({visible:false,text:d.getText("LanguageAndRegionHelpingText"),width:j,textAlign:"Begin"}).addStyleClass("sapUshellFlpSettingsLanguageRegionDescription");var o=new F({alignItems:g,direction:f,items:[this.helpingTextLabel,this.helpingText]});var p=new L({text:d.getText("dateFormatFld")+":",width:h,textAlign:t,labelFor:s});this.comboDate=new C("dateFormatCombo",{width:k,items:{path:"/datePatternList",template:i},selectedKey:"{/selectedDatePattern}",editable:false}).addAriaLabelledBy(p);var q=new F({alignItems:g,direction:f,items:[p,this.comboDate]});var u=new L({text:d.getText("timeFormatFld")+":",width:h,textAlign:t});this.hourFormatSegmentedButton=new S("hoursSegmentedButton",{enabled:false,width:"10rem",buttons:[new B({text:d.getText("btn12h")}),new B({text:d.getText("btn24h")})]}).addAriaLabelledBy(u);var v=new F({alignItems:g,direction:f,items:[u,this.hourFormatSegmentedButton]});v.addStyleClass("sapUshellFlpSettingsLanguageRegionHourFormatFBox");var w=new V({items:[n,o,q,v]});w.addStyleClass("sapUiSmallMargin");return w;},getControllerName:function(){return"sap.ushell.components.shell.UserSettings.LanguageRegionSelector";}});});},"sap/ushell/components/shell/UserSettings/ThemeSelector.controller.js":function(){sap.ui.define(["sap/ushell/EventHub","sap/ushell/Config","sap/ui/core/Component","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ui/thirdparty/jquery","sap/ui/model/json/JSONModel","sap/ui/core/theming/Parameters","sap/ui/Device","sap/ushell/resources"],function(E,C,a,A,q,J,P,D,r){"use strict";sap.ui.controller("sap.ushell.components.shell.UserSettings.ThemeSelector",{TILE_SIZE:{Small:0,Responsive:1,getName:function(v){return Object.keys(this)[v];}},onInit:function(){try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser();}catch(e){q.sap.log.error("Getting UserInfo service failed.");this.oUser=sap.ushell.Container.getUser();}this.currentThemeId=this.oUser.getTheme();this.origThemeId=this.currentThemeId;this.aThemeList=null;this.isContentLoaded=false;this.aSapThemeMap={base:"sapUshellBaseIconStyle",sap_bluecrystal:"sapUshellBlueCrystalIconStyle",sap_belize_hcb:"sapUshellHCBIconStyle",sap_belize_hcw:"sapUshellHCWIconStyle",sap_belize:"sapUshellBelizeIconStyle",sap_belize_plus:"sapUshellPlusIconStyle"};this.oPersonalizers={};},getConfigurationModel:function(){var c=new J({});c.setData({isRTL:sap.ui.getCore().getConfiguration().getRTL(),sapUiContentIconColor:P.get("sapUiContentIconColor"),isContentDensitySwitchEnabled:this.isContentDensitySwitchEnabled(),flexAlignItems:"Center",textAlign:D.system.phone?"Left":"Right",textDirection:"Row",labelWidth:"auto",isCozyContentMode:this.isCozyContentMode(),sizeBehaviorConfigurable:C.last("/core/home/sizeBehaviorConfigurable")});return c;},_getIsChangeThemePermitted:function(){return this.oUser.isSetThemePermitted();},onAfterRendering:function(){var t=this;var d=E.on("UserPreferencesDetailNavigated");d.do(function(i){if(i!=="detailuserPrefThemeSelector"){return;}d.off("UserPreferencesDetailNavigated");var l=sap.ui.getCore().byId("userPrefThemeSelector--themeList"),b=l.getItems(),I,T;l.toggleStyleClass("sapUshellThemeListDisabled",!t.isListActive());b.forEach(function(L){T=L.getCustomData()[0].getValue();I=L.getContent()[0].getItems()[0].getItems()[0];if(!t.isListActive()){L.isSelectable=function(){return false;};}if(T===t.currentThemeId){L.setSelected(true);if(!t.isListActive()){L.toggleStyleClass("sapUshellThemeListItemSelected",true);}}else{L.setSelected(false);}if(t.aSapThemeMap[T]){I.addStyleClass(t.aSapThemeMap[T]);}I.toggleStyleClass("sapUshellHCBIconStyleOnHCB",T===t.currentThemeId&&T==="sap_belize_hcb");I.toggleStyleClass("sapUshellHCWIconStyleOnHCW",t.currentThemeId!=="sap_belize_hcb"&&T==="sap_belize_hcw");});var c=sap.ui.getCore().byId("userPrefThemeSelector--contentDensitySwitch");if(c){c.setState(t.currentContentDensity==="cozy");c.setEnabled(t.isContentDensitySwitchEnabled());}var e=sap.ui.getCore().byId("userPrefThemeSelector--tileSizeRadioButtonGroup");if(e){var s=C.last("/core/home/sizeBehavior");e.setSelectedIndex(t.TILE_SIZE[s]);}q(".sapUshellAppearanceTable > table").attr("role","list");});},getContent:function(){var t=this;var d=q.Deferred();var R=r.getTranslationModel();this.getView().setModel(R,"i18n");this.getView().setModel(this.getConfigurationModel(),"config");if(this.isContentDensitySwitchEnabled()){this.origContentDensity=this.currentContentDensity;if(this.oUser.getContentDensity()){this.currentContentDensity=this.oUser.getContentDensity();}else{this.currentContentDensity="cozy";}}if(this.isContentLoaded===true){d.resolve(this.getView());}else{var b=this._getThemeList();b.done(function(T){if(T.length>0){T.sort(function(c,e){var f=c.name,g=e.name;if(f<g){return-1;}if(f>g){return 1;}return 0;});for(var i=0;i<T.length;i++){if(T[i].id==t.currentThemeId){T[i].isSelected=true;}else{T[i].isSelected=false;}}t.getView().getModel().setProperty("/options",T);d.resolve(t.getView());}else{d.reject();}});b.fail(function(){d.reject();});}return d.promise();},getValue:function(){var d=q.Deferred();var t=this._getThemeList();var b=this;var c;t.done(function(T){b.aThemeList=T;c=b._getThemeNameById(b.currentThemeId);d.resolve(c);});t.fail(function(e){d.reject(e);});return d.promise();},onCancel:function(){this.currentThemeId=this.oUser.getTheme();if(this.isContentDensitySwitchEnabled()){this.currentContentDensity=this.oUser.getContentDensity();}this.tileSizeChanged=false;},onSave:function(){var R=q.Deferred(),w,p=[],t=0,s=0,f=0,F=[],b=function(){s++;R.notify();},c=function(e){F.push({entry:"currEntryTitle",message:e});f++;R.notify();};var T=this.onSaveThemes();T.done(b);T.fail(c);p.push(T);if(this.isContentDensitySwitchEnabled()){var o=this.onSaveContentDensity();o.done(b);o.fail(c);p.push(o);}if(this.tileSizeChanged&&this.currentTileSize){C.emit("/core/home/sizeBehavior",this.currentTileSize);if(this.currentTileSize==="Responsive"){q(".sapUshellTile").removeClass("sapUshellSmall");q(".sapUshellPlusTile").removeClass("sapUshellPlusTileSmall");}else{q(".sapUshellTile").addClass("sapUshellSmall");q(".sapUshellPlusTile").addClass("sapUshellPlusTileSmall");}this.tileSizeChanged=false;var S=this.writeToPersonalization("flp.settings.FlpSettings","sizeBehavior",this.currentTileSize);S.done(b);S.fail(c);p.push(S);}w=q.when.apply(null,p);w.done(function(){R.resolve();});R.progress(function(){if(f>0&&(f+s===t)){R.reject("At least one save action failed");}});return R.promise();},onSaveThemes:function(){var d=q.Deferred();var u;if(this.oUser.getTheme()!=this.currentThemeId&&this.isListActive()){if(this.currentThemeId){this.oUser.setTheme(this.currentThemeId);A.postMessageToIframeApp("sap.ushell.appRuntime","themeChange",{"currentThemeId":this.currentThemeId});u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){this.origThemeId=this.currentThemeId;this.oUser.resetChangedProperty("theme");d.resolve();}.bind(this));u.fail(function(e){this.oUser.setTheme(this.origThemeId);this.oUser.resetChangedProperty("theme");this.currentThemeId=this.origThemeId;q.sap.log.error(e);d.reject(e);}.bind(this));}else{d.reject("Could not find theme: "+this.currentThemeId);}}else{d.resolve();}return d.promise();},_getThemeList:function(){var d=q.Deferred(),t=this;if(!this.aThemeList){var g=this.userInfoService.getThemeList();g.done(function(o){t.aThemeList=o.options;if(t._getIsChangeThemePermitted()==false){t.aThemeList=[{id:t.currentThemeId,name:t._getThemeNameById(t.currentThemeId)}];}d.resolve(t.aThemeList);});g.fail(function(){d.reject("Failed to load theme list.");});}else{d.resolve(this.aThemeList);}return d.promise();},getCurrentThemeId:function(){return this.currentThemeId;},setCurrentThemeId:function(n){this.currentThemeId=n;},_getThemeNameById:function(t){if(this.aThemeList){for(var i=0;i<this.aThemeList.length;i++){if(this.aThemeList[i].id==t){return this.aThemeList[i].name;}}}return t;},onSaveContentDensity:function(){var d=q.Deferred();var u;if(this.oUser.getContentDensity()!=this.currentContentDensity&&this.isContentDensitySwitchEnabled()){if(this.currentContentDensity){this.oUser.setContentDensity(this.currentContentDensity);u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){this.oUser.resetChangedProperty("contentDensity");this.origContentDensity=this.currentContentDensity;sap.ui.getCore().getEventBus().publish("launchpad","toggleContentDensity",{contentDensity:this.currentContentDensity});E.emit("toggleContentDensity",{contentDensity:this.currentContentDensity});E.once("toggleContentDensity").do(function(){d.resolve();});}.bind(this));u.fail(function(e){this.oUser.setContentDensity(this.origContentDensity);this.oUser.resetChangedProperty("contentDensity");this.currentContentDensity=this.origContentDensity;q.sap.log.error(e);d.reject(e);}.bind(this));}else{d.reject("Could not find mode: "+this.currentContentDensity);}}else{d.resolve();}return d.promise();},getCurrentContentDensity:function(){return this.currentContentDensity;},isCozyContentMode:function(){return!!q("body.sapUiSizeCozy").length;},setCurrentContentDensity:function(e){var n=e.getSource().getState()?"cozy":"compact";this.currentContentDensity=n;},setCurrentTileSize:function(e){var n=e.getSource().getSelectedIndex();this.currentTileSize=this.TILE_SIZE.getName(n);this.tileSizeChanged=true;},getIconFormatter:function(t){if(this.aSapThemeMap[t]){return"";}return"sap-icon://palette";},onSelectHandler:function(e){var i=e.getParameters().listItem;this.setCurrentThemeId(i.getBindingContext().getProperty("id"));},isContentDensitySwitchEnabled:function(){return(D.system.combi&&this.getView().getModel().getProperty("/contentDensity")&&this.oUser.isSetContentDensityPermitted())||false;},isListActive:function(){return this.getView().getModel().getProperty("/setTheme");},getUserStatusSetting:function(){var p=this._getUserSettingsPersonalizer();return p.getPersData();},writeToPersonalization:function(c,i,v){var p;try{p=this.getPersonalizer(c,i).setPersData(v);}catch(e){q.sap.log.error("Personalization service does not work:");q.sap.log.error(e.name+": "+e.message);p=q.when(Promise.reject(e));}return p;},getPersonalizer:function(c,i){var k=c+"-"+i;if(this.oPersonalizers[k]){return this.oPersonalizers[k];}var p=sap.ushell.Container.getService("Personalization");var o=a.getOwnerComponentFor(this);var s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true};if(!this.oPersonalizers[k]){this.oPersonalizers[k]=p.getPersonalizer({container:c,item:i},s,o);}return this.oPersonalizers[k];}});});},"sap/ushell/components/shell/UserSettings/ThemeSelector.view.xml":'<View controllerName="sap.ushell.components.shell.UserSettings.ThemeSelector"\n\txmlns="sap.m"\n\txmlns:core="sap.ui.core">\n\t<IconTabBar id="idIconTabBar" applyContentPadding="true" expandable="false">\n\t\t<items>\n\t\t\t<IconTabFilter text="{i18n>AppearanceThemeMenu}">\n\t\t\t\t<List items="{path: \'/options\'}"\n\t\t\t\t\tincludeItemInSelection="true"\n\t\t\t\t\tmode="SingleSelectMaster"\n\t\t\t\t\tselectionChange="onSelectHandler"\n\t\t\t\t\tid="themeList">\n\t\t\t\t\t<items>\n\t\t\t\t\t\t<CustomListItem selected="{isSelected}" class="sapUshellAppearanceCustomListItem">\n\t\t\t\t\t\t\t<customData>\n\t\t\t\t\t\t\t\t<core:CustomData key="themeid" value="{id}" writeToDom="true" />\n\t\t\t\t\t\t\t</customData>\n\t\t\t\t\t\t\t<HBox>\n\t\t\t\t\t\t\t\t<HBox class="sapUshellAppearanceItemViewLeft">\n\t\t\t\t\t\t\t\t\t<core:Icon src="{parts:[{path:\'id\'}], formatter:\'.getIconFormatter\'}"\n\t\t\t\t\t\t\t\t\t\tcolor="{config>/sapUiContentIconColor}"\n\t\t\t\t\t\t\t\t\t\tsize="1.75rem"\n\t\t\t\t\t\t\t\t\t\tclass="sapUshellAppearanceIcon" />\n\t\t\t\t\t\t\t\t\t<Text text="{name}" class="sapUshellAppearanceItemText">\n\t\t\t\t\t\t\t\t\t\t<layoutData>\n\t\t\t\t\t\t\t\t\t\t\t<FlexItemData styleClass="sapUshellAppearanceFlexItemText" />\n\t\t\t\t\t\t\t\t\t\t</layoutData>\n\t\t\t\t\t\t\t\t\t</Text>\n\t\t\t\t\t\t\t\t</HBox>\n\t\t\t\t\t\t\t\t<HBox class="sapUshellAppearanceItemViewRight">\n\t\t\t\t\t\t\t\t\t<core:Icon src="sap-icon://sys-enter-2"\n\t\t\t\t\t\t\t\t\t\tvisible="{isSelected}"\n\t\t\t\t\t\t\t\t\t\tcolor="{config>/sapUiContentIconColor}"\n\t\t\t\t\t\t\t\t\t\tsize="1.375rem" />\n\t\t\t\t\t\t\t\t</HBox>\n\t\t\t\t\t\t\t</HBox>\n\t\t\t\t\t\t</CustomListItem>\n\t\t\t\t\t</items>\n\t\t\t\t</List>\n\t\t\t</IconTabFilter>\n\t\t\t<IconTabFilter text="{i18n>AppearanceLayoutAndBehaviorMenu}" id="DisplaySettingsTab">\n\t\t\t\t<HBox alignItems="Start" justifyContent="End" class="sapUshellAppearanceBox">\n\t\t\t\t\t<Label\n\t\t\t\t\t\tlabelFor="contentDensitySwitch"\n\t\t\t\t\t\ttext="{i18n>AppearanceContentDensityLabel}:"\n\t\t\t\t\t\tclass="sapUshellAppearanceLabel"\n\t\t\t\t\t\twidth="{config>/labelWidth}"\n\t\t\t\t\t\ttextAlign="{config>/textAlign}" />\n\t\t\t\t\t<VBox alignItems="Baseline" class="sapUshellAppearanceContentDensityText">\n\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\ttype="Default"\n\t\t\t\t\t\t\tid="contentDensitySwitch"\n\t\t\t\t\t\t\tclass="sapUshellAppearanceSwitchButton"\n\t\t\t\t\t\t\ttooltip="{i18n>AppearanceContentDensityTooltip}"\n\t\t\t\t\t\t\tchange="setCurrentContentDensity"\n\t\t\t\t\t\t\tstate="{config>/isCozyContentMode}"\n\t\t\t\t\t\t\tenabled="{config>/isContentDensitySwitchEnable}" />\n\t\t\t\t\t\t<Text text="{i18n>appearanceCompactCozyDescriptionText}" class="sapUshellFlpSettingsDescription" />\n\t\t\t\t\t</VBox>\n\t\t\t\t</HBox>\n\t\t\t\t<HBox visible="{config>/sizeBehaviorConfigurable}" alignItems="Start" justifyContent="End" class="sapUshellAppearanceBox">\n\t\t\t\t\t<Label text="{i18n>AppearanceTileSizeLabel}:"\n\t\t\t\t\t\tclass="sapUshellAppearanceLabel"\n\t\t\t\t\t\twidth="{config>/labelWidth}"\n\t\t\t\t\t\ttextAlign="{config>/textAlign}"\n\t\t\t\t\t\tlabelFor="setCurrentTileSize"\n\t\t\t\t\t\tid="sapUshellAppearanceTileSizeLabel" />\n\t\t\t\t\t<VBox class="sapUshellAppearanceTileSizeText">\n\t\t\t\t\t\t<RadioButtonGroup select="setCurrentTileSize" selectedIndex="{config>/tileSize}" id="tileSizeRadioButtonGroup">\n\t\t\t\t\t\t\t<buttons>\n\t\t\t\t\t\t\t\t<RadioButton text="{i18n>AppearanceTileSizeSmall}"\n\t\t\t\t\t\t\t\t\tclass="sapUshellAppearanceTileSizeSmall"\n\t\t\t\t\t\t\t\t\tariaLabelledBy="sapUshellAppearanceTileSizeLabel" />\n\t\t\t\t\t\t\t\t<RadioButton text="{i18n>AppearanceTileSizeLarge}"\n\t\t\t\t\t\t\t\t\tclass="sapUshellAppearanceTileSizeLarge"\n\t\t\t\t\t\t\t\t\tariaLabelledBy="sapUshellAppearanceTileSizeLabel" />\n\t\t\t\t\t\t\t</buttons>\n\t\t\t\t\t\t</RadioButtonGroup>\n\t\t\t\t\t\t<Text text="{i18n>appearanceTileSizeDescriptionText}" class="sapUshellFlpSettingsDescription" />\n\t\t\t\t\t</VBox>\n\t\t\t\t</HBox>\n\t\t\t</IconTabFilter>\n\t\t</items>\n\t</IconTabBar>\n</View>\n',"sap/ushell/components/shell/UserSettings/UsageAnalyticsSelector.controller.js":function(){sap.ui.define(["sap/ui/thirdparty/jquery","sap/ushell/resources"],function(q,r){"use strict";sap.ui.controller("sap.ushell.components.shell.UserSettings.UsageAnalyticsSelector",{onInit:function(){this.oUser=sap.ushell.Container.getUser();this.switchStateValue=this.oUser.getTrackUsageAnalytics();this.getView().oSwitchButton.setState(this.switchStateValue);},getContent:function(){var t=this,d=q.Deferred();d.resolve(t.getView());return d.promise();},getValue:function(){var d=q.Deferred(),i=r.i18n;d.resolve(this.switchStateValue?i.getText("trackingEnabled"):i.getText("trackingDisabled"));return d.promise();},onSave:function(){var c=this.getView().oSwitchButton.getState();this.switchStateValue=c;return sap.ushell.Container.getService("UsageAnalytics").setTrackUsageAnalytics(c);},onCancel:function(){this.getView().oSwitchButton.setState(this.switchStateValue);}});},true);},"sap/ushell/components/shell/UserSettings/UsageAnalyticsSelector.view.js":function(){sap.ui.define(["sap/m/Label","sap/ushell/resources","sap/ui/Device","sap/m/Switch","sap/m/library","sap/m/Text","sap/m/HBox","sap/m/FlexItemData","sap/m/VBox"],function(L,r,D,S,m,T,H,F,V){"use strict";var a=m.SwitchType;sap.ui.jsview("sap.ushell.components.shell.UserSettings.UsageAnalyticsSelector",{createContent:function(){var f=D.system.phone?"Start":"Center",s=D.system.phone?"Wrap":"NoWrap",b=D.system.phone?"Column":"Row",t=D.system.phone?"Left":"Right",A=D.system.phone?"Baseline":"Auto",w=D.system.phone?"auto":"11.75rem";this.oLabel=new L({width:w,textAlign:t,text:r.i18n.getText("allowTracking")+":"}).addStyleClass("sapUshellUsageAnalyticsSelectorLabel");this.oSwitchButton=new S("usageAnalyticsSwitchButton",{type:a.Default}).addStyleClass("sapUshellUsageAnalyticsSelectorSwitchButton");this.oMessage=new T({text:sap.ushell.Container.getService("UsageAnalytics").getLegalText()}).addStyleClass("sapUshellUsageAnalyticsSelectorLegalTextMessage");this.fBox=new H({alignItems:f,wrap:s,direction:b,height:"2rem",items:[this.oLabel,this.oSwitchButton],layoutData:new F({alignSelf:A})});this.vBox=new V({items:[this.fBox,this.oMessage]});return this.vBox;},getControllerName:function(){return"sap.ushell.components.shell.UserSettings.UsageAnalyticsSelector";}});},true);},"sap/ushell/components/shell/UserSettings/UserPreferences.js":function(){sap.ui.define(["sap/ushell/resources","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/components/SharedComponentUtils","sap/ushell/Config","sap/ui/thirdparty/jquery","sap/base/Log","sap/ushell/ui5service/UserStatus","sap/ushell/utils"],function(r,A,s,C,q,L,U,u){"use strict";function _(){return sap.ushell.Container.getRenderer("fiori2");}function a(){return A.getElementsModel().getModel();}function G(v,j,k,l,t,o,m,n,p,w,M,x,y){this.view=null;this.getView=function(){if(!this.view||!sap.ui.getCore().byId(v)){if(k==="xml"){this.view=sap.ui.xmlview(v,j);}else{this.view=sap.ui.jsview(v,j);}}if(M){this.view.setModel(M);}return this.view;};return{entryHelpID:l,title:t,valueResult:null,onSave:o?o.bind(this):function(){if(this.getView().getController().onSave){return this.getView().getController().onSave();}}.bind(this),onCancel:m?m.bind(this):function(){if(this.getView().getController().onCancel){return this.getView().getController().onCancel();}}.bind(this),contentFunc:n?n.bind(this):function(){if(this.getView().getController().getContent){return this.getView().getController().getContent();}}.bind(this),valueArgument:p?p.bind(this):function(){var z=new q.Deferred(),B=this;setTimeout(function(){if(B.getView().getController().getValue){B.getView().getController().getValue().done(function(D){z.resolve(D);});}},0);return z.promise();}.bind(this),editable:typeof w==="function"?w():w,contentResult:null,icon:x,defaultVisibility:y};}function c(m){return function(){return this.getView().getController()[m]();};}function b(p){var E={entryHelpID:p.entryHelpId,title:r.i18n.getText(p.i18nTitleKey),editable:true,valueResult:null,contentResult:null,icon:p.icon,getView:function(){var j=p.viewType==="xml"?sap.ui.xmlview:sap.ui.jsview;var v=sap.ui.getCore().byId(p.viewId);if(!v){v=j(p.viewId,p.componentNamespace);}return v;}};E.valueArgument=c("getValue").bind(E);E.onSave=c("onSave").bind(E);E.onCancel=c("onCancel").bind(E);E.contentFunc=c("getContent").bind(E);return E;}function d(){return b({entryHelpId:"language",i18nTitleKey:"languageRegionTit",icon:"sap-icon://globe",viewId:"languageRegionSelector",componentNamespace:"sap.ushell.components.shell.UserSettings.LanguageRegionSelector"});}function e(){return b({entryHelpId:"UserActivitiesEntry",i18nTitleKey:"userActivities",icon:"sap-icon://laptop",viewId:"userActivitiesHandler",componentNamespace:"sap.ushell.components.shell.UserSettings.userActivitiesHandler"});}function f(){var S=_().getShellConfig();var j=(S.enableOnlineStatus&&U.prototype.isEnabled)||S.enableUserImgConsent;var v=j?"userAccountSelector":"userAccountSetting";var k=j?"sap.ushell.components.shell.UserSettings.userAccount.UserAccountSelector":"sap.ushell.components.shell.UserSettings.userAccount.UserAccountSetting";return b({entryHelpId:"userAccountEntry",i18nTitleKey:"UserAccountFld",icon:"sap-icon://account",viewId:v,componentNamespace:k,viewType:"xml"});}function g(){var m=a(),o=sap.ushell.Container.getUser();var t=new G("userPrefThemeSelector","sap.ushell.components.shell.UserSettings.ThemeSelector","xml","themes",r.i18n.getText("Appearance"),function(){var x=this.getView().getController().onSave();x.done(function(){if(C.last("/core/home/enableTilesOpacity")){u.handleTilesOpacity();}});return x;},undefined,undefined,undefined,function(){if(C.last("/core/shell/model/setTheme")!==undefined){return C.last("/core/shell/model/setTheme")&&o.isSetThemePermitted();}return o.isSetThemePermitted();},m,"sap-icon://palette");var j=new G("userPrefUsageAnalyticsSelector","sap.ushell.components.shell.UserSettings.UsageAnalyticsSelector","js","usageAnalytics",r.i18n.getText("usageAnalytics"),undefined,undefined,undefined,undefined,sap.ushell.Container.getService("UsageAnalytics").isSetUsageAnalyticsPermitted());var k=new G("defaultParametersSelector","sap.ushell.components.shell.UserSettings.DefaultParameters","js",undefined,r.i18n.getText("defaultsValuesEntry"),undefined,undefined,undefined,undefined,true,undefined,undefined,false);var l=new G("userProfilingView","sap.ushell.components.shell.UserSettings.UserProfiling","js","userProfiling",r.i18n.getText("userProfiling"),undefined,undefined,undefined,undefined,false,m,"sap-icon://user-settings",false);var n=[new f(),t,new d()],p=[];p.push(j);var v=C.last("/core/shell/enableRecentActivity");if(v){n.push(new e());}n.push(l);if(C.last("/core/shell/model/enableNotifications")===true){var N=sap.ushell.Container.getService("Notifications")._getNotificationSettingsAvalability(),w;w=new G("notificationSettings","sap.ushell.components.shell.Notifications.Settings","js",undefined,r.i18n.getText("notificationSettingsEntry_title"),undefined,undefined,undefined,undefined,true,undefined,"sap-icon://bell",false);n.push(w);N.done(function(S){if(S.settingsAvailable){w.visible=true;C.last("/core/shell/model/userPreferences/entries").every(function(x,y){if(x.title===r.i18n.getText("notificationSettingsEntry_title")){m.setProperty("/userPreferences/entries/"+y+"/visible",true);return false;}return true;});}});}if(C.last("/core/shell/model/userDefaultParameters")){n.push(k);}var E=C.last("/core/home/enableHomePageSettings");if(E!==false){n.push(h());}return{dialogTitle:r.i18n.getText("userSettings"),isDetailedEntryMode:false,activeEntryPath:null,entries:n,profiling:p};}function h(){var R=_(),o=r.i18n;var j;var E={title:o.getText("FlpSettings_entry_title"),entryHelpID:"flpSettingsEntry",valueArgument:function(){return q.Deferred().resolve(" ");},contentFunc:function(){var D=new q.Deferred();s.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings").then(function(k){j=sap.ui.xmlview({viewName:"sap.ushell.components.shell.UserSettings.FlpSettings",viewData:{initialDisplayMode:k||"scroll"}});D.resolve(j);});return D;},onSave:function(){var D=j.getController().onSave();var k=s.getPersonalizer("homePageGroupDisplay",R).setPersData(D);k.fail(function(l){L.error("Failed to save the anchor bar mode in personalization",l,"sap.ushell.components.flp.settings.FlpSettings");});C.emit("/core/home/homePageGroupDisplay",D);return q.Deferred().resolve();},onCancel:function(){return q.Deferred().resolve();},icon:"sap-icon://home"};return E;}function i(){var j=C.last("/core/shell/model/userPreferences/entries");var D=g();D.entries=D.entries.concat(j);D.entries=_().reorderUserPrefEntries(D.entries);a().setProperty("/userPreferences",D);}return{setModel:i};});},"sap/ushell/components/shell/UserSettings/UserProfiling.controller.js":function(){sap.ui.define(["sap/ui/thirdparty/jquery"],function(q){"use strict";sap.ui.controller("sap.ushell.components.shell.UserSettings.UserProfiling",{onInit:function(){this.isContentLoaded=true;},onCancel:function(){var p=this.getView().getModel().getProperty("/userPreferences/profiling"),P,i;for(i=0;i<p.length;i++){P=p[i];if(P.onCancel){P.onCancel();}}},getValue:function(){var d=q.Deferred();var p=this.getView().getModel().getProperty("/userPreferences/profiling");p.forEach(function(e,i){if(e.entryHelpID==="usageAnalytics"){if(!sap.ushell.Container.getService("UsageAnalytics").systemEnabled()||!sap.ushell.Container.getService("UsageAnalytics").isSetUsageAnalyticsPermitted()){p.splice(i,1);}}},this);if(p!==undefined&&p.length>0){d.resolve({value:1,displayText:" "});}else{d.resolve({value:0,displayText:" "});}return d.promise();},onSave:function(){var r=q.Deferred(),p=this.getView().getModel().getProperty("/userPreferences/profiling"),w,P=[],t=0,s=0,f=0,F=[],T,a=function(){s++;r.notify();},b=function(e){F.push({entry:"currEntryTitle",message:e});f++;r.notify();};p.forEach(function(i){T=i.onSave();T.done(a);T.fail(b);P.push(T);t++;});w=q.when.apply(null,P);w.done(function(){r.resolve();});r.progress(function(){if(f>0&&(f+s===t)){r.reject("At least one save action failed");}});return r.promise();},getContent:function(){var t=this,d=q.Deferred(),p=this.getView().getModel().getProperty("/userPreferences/profiling");p.forEach(function(i){var c=i.contentFunc();c.done(function(r){t.getView().profilingContent.addItem(r);});});d.resolve(t.getView());return d.promise();}});});},"sap/ushell/components/shell/UserSettings/UserProfiling.view.js":function(){sap.ui.define(["sap/m/VBox"],function(V){"use strict";sap.ui.jsview("sap.ushell.components.shell.UserSettings.UserProfiling",{createContent:function(){this.profilingContent=new V().addStyleClass("sapUshellUserSettingDetailContent");return this.profilingContent;},getControllerName:function(){return"sap.ushell.components.shell.UserSettings.UserProfiling";}});});},"sap/ushell/components/shell/UserSettings/UserSettings.controller.js":function(){sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/Device","sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/resources","sap/ushell/ui/utils","sap/base/Log","sap/ui/thirdparty/jquery","sap/m/ObjectHeader","sap/m/library","sap/ui/core/IconPool","sap/m/Page","sap/m/Label","sap/m/Input","sap/m/FlexBox"],function(C,D,A,a,E,r,u,L,q,O,m,I,P,b,c,F){"use strict";var B=m.BackgroundDesign;var d;return C.extend("sap.ushell.components.shell.UserSettings",{onInit:function(){this.getView().byId("userSettingEntryList").addEventDelegate({onAfterRendering:this._listAfterRendering.bind(this)});this.getView().byId("userSettingsDialog").addEventDelegate({onkeydown:this._keyDown.bind(this)});this.getView().byId("settingsApp")._oDetailNav.setAutoFocus(false);d=E.on("openUserSettings").do(this.openUserSettings.bind(this));},onExit:function(){d.off();},openUserSettings:function(){this.getView().byId("userSettingsDialog").open();},_afterClose:function(){sap.ushell.Container.getUser().resetChangedProperties();if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("meAreaHeaderButton").focus();}},_createDetailPage:function(e,t,o){var f=new O({title:t,backgroundDesign:B.Solid}).addStyleClass("sapUshellUserSettingDetailHeader");if(e==="userAccountEntry"){var U=sap.ushell.Container.getUser();if(U.getImage()){f.setIcon(a.last("/core/shell/model/userImage/personPlaceHolder"));}else{f.setIcon(I.getIconURI("sap-icon://person-placeholder"));}U.attachOnSetImage(function(){var s=a.last("/core/shell/model/userImage/personPlaceHolder"),g=I.getIconURI("sap-icon://person-placeholder");f.setIcon(s||g);});f.setTitle(sap.ushell.Container.getUser().getFullName());}var p=new P("detail"+o.getId(),{content:[f,o],showHeader:false}).addStyleClass("sapUsheUserSettingDetaildPage");p.addEventDelegate({onAfterRendering:this._handleNavButton.bind(this)});this.getView().byId("settingsApp").addDetailPage(p);return p.getId();},_createEntryContent:function(e){var t=this,p=new Promise(function(f){if(typeof e.contentFunc==="function"){e.contentFunc().always(function(g){if(g instanceof sap.ui.core.Control){f(t._createDetailPage(e.entryHelpID,e.title,g));}f("userSettingsErrorPage");});}else{var o;e.valueArgument().done(function(v){o=t._getKeyValueContent(e,v);}).fail(function(){o=t._getKeyValueContent(e);}).always(function(){f(t._createDetailPage(e.entryHelpID,e.title,o));});}});return p;},_dialogCancelButtonHandler:function(){var e=this.getView().getModel("entries").getData().entries||[];for(var i=0;i<e.length;i++){if(e[i]&&e[i].onCancel){e[i].onCancel();}}this._handleSettingsDialogClose();},_emitEntryOpened:function(e){var U=E.last("UserSettingsOpened")||{},p=e.split("/").pop();U[p]=true;E.emit("UserSettingsOpened",U);},_getEntryIcon:function(e,U){if(e==="sap-icon://account"&&U){return U;}return e||"sap-icon://action-settings";},_getEntryVisible:function(v,e,t){if(t===r.i18n.getText("userProfiling")){var p=this.getView().getModel("entries").getProperty("/profiling")||[],U=sap.ushell.Container.getService("UsageAnalytics");for(var i=p.length-1;i>=0;i--){if(p[i].entryHelpID==="usageAnalytics"){if(!U.systemEnabled()||!U.isSetUsageAnalyticsPermitted()){p.splice(i,1);}}}return p&&p.length>0;}if(v!==undefined){return v;}if(e!==undefined){return e;}return true;},_getKeyValueContent:function(e,s){var k=new b({text:e.title+":"}).addStyleClass("sapUshellUserSettingsDetailsKey");var v=new c({value:s||" ",editable:false}).addStyleClass("sapUshellUserSettingsDetailsValue");var o=new F({alignItems:D.system.phone?"Start":"Center",wrap:D.system.phone?"Wrap":"NoWrap",direction:D.system.phone?"Column":"Row",items:[k,v]});return o;},_handleNavButton:function(){var s=this.getView().byId("settingsApp"),n=this.getView().byId("userSettingsNavBackButton");n.setVisible(!s.isMasterShown());},_handleSettingsDialogClose:function(){this.getView().byId("settingsApp").toMaster("sapFlpUserSettings-View--userSettingMaster");this.getView().byId("userSettingEntryList").removeSelections(true);this.getView().byId("userSettingsDialog").close();},_handleSettingsSave:function(){var s=A.getElementsModel().getModel(),t=this;var i=s.getProperty("/userPreferences/isDetailedEntryMode");if(i){s.setProperty("/userPreferences/activeEntryPath",null);}u.saveUserPreferenceEntries(s.getProperty("/userPreferences/entries")).done(function(){t._handleSettingsDialogClose();sap.ui.require(["sap/m/MessageToast"],function(M){var e=r.i18n.getText("savedChanges");M.show(e,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});});}).fail(function(f){sap.ui.require(["sap/m/MessageBox"],function(M){var e;var g="";if(f.length===1){e=r.i18n.getText("savingEntryError")+" ";}else{e=r.i18n.getText("savingEntriesError")+"\n";}f.forEach(function(o){e+=o.entry+"\n";g+="Entry: "+o.entry+" - Error message: "+o.message+"\n";});M.show(e,{icon:M.Icon.ERROR,title:r.i18n.getText("error"),actions:[M.Action.OK]});L.error("Failed to save the following entries",g,"sap.ushell.ui.footerbar.UserPreferencesButton");});});},_itemPress:function(e){this._toDetail(e.getSource().getSelectedItem(),e.getId());},_keyDown:function(e){if(e.keyCode===27){this._dialogCancelButtonHandler();}},_listAfterRendering:function(){var M=this.getView().byId("userSettingEntryList");var e=M.getItems();for(var i=0;i<e.length;i++){var p=e[i].getBindingContext("entries").getPath();this._setEntryValueResult(p);}if(!D.system.phone){var f=M.getItems()[0];if(f){M.setSelectedItem(f);this._toDetail(f,"select");f.getDomRef().focus();}}},_navBackButtonPressHandler:function(e){var s=this.getView().byId("settingsApp");if(D.system.phone){s.backDetail();this._handleNavButton();e.getSource().setPressed(false);}else if(s.isMasterShown()){s.hideMaster();e.getSource().setTooltip(r.i18n.getText("ToggleButtonShow"));e.getSource().setPressed(false);}else{s.showMaster();e.getSource().setTooltip(r.i18n.getText("ToggleButtonHide"));e.getSource().setPressed(true);}},_navToDetail:function(i,e,s){var S=this.getView().byId("settingsApp");S.toDetail(i);E.emit("UserPreferencesDetailNavigated",i);if(e==="select"&&!D.system.phone){var f=q(document.getElementById(i)).firstFocusableDomRef();if(f){f.focus();}}if(S.getMode()==="ShowHideMode"){S.hideMaster();}this._handleNavButton();this._emitEntryOpened(s);},_setEntryValueResult:function(e){var M=this.getView().getModel("entries"),i=M.getProperty(e+"/editable"),v=M.getProperty(e+"/valueArgument"),V=M.getProperty(e+"/visible"),f=M.getProperty(e+"/defaultVisibility");if(typeof v==="function"){M.setProperty(e+"/valueResult",r.i18n.getText("genericLoading"));M.setProperty(e+"/editable",false);v().done(function(g){M.setProperty(e+"/editable",i);var h=true;if(g&&g.value!==undefined){h=!!g.value;}else if(V!==undefined){h=V;}else if(f!==undefined){h=f;}var s=" ";if(g!==undefined){if(typeof(g)==="object"){s=g.displayText;}else{s=g;}}M.setProperty(e+"/visible",h);M.setProperty(e+"/valueResult",s);}).fail(function(){M.setProperty(e+"/valueResult",r.i18n.getText("loadingErrorMessage"));});}else if(v){M.setProperty(e+"/valueResult",v);}else{M.setProperty(e+"/valueResult",r.i18n.getText("loadingErrorMessage"));}},_toDetail:function(s,e){var M=this.getView().getModel("entries"),f=s.getBindingContext("entries").getPath(),g=M.getProperty(f+"/contentResult");if(D.system.phone){s.setSelected(false);}if(g){this._navToDetail(g,e,f);}else{var t=this,o=M.getProperty(f);this._createEntryContent(o).then(function(n){M.setProperty(f+"/contentResult",n);t._navToDetail(n,e,f);});}}});});},"sap/ushell/components/shell/UserSettings/UserSettings.view.xml":'<mvc:View\n    controllerName="sap.ushell.components.shell.UserSettings"\n    xmlns="sap.m"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns:core="sap.ui.core">\n\n    <Dialog id="userSettingsDialog"\n        class="sapUshellUserSetting"\n        showHeader="false"\n        contentHeight="42rem"\n        contentWidth="58rem"\n        afterClose="._afterClose"\n        stretch="{device>/system/phone}">\n        <buttons>\n            <Button id="userSettingSaveButton"\n                text="{i18n>saveBtn}"\n                press="._handleSettingsSave"/>\n            <Button id="userSettingCancelButton"\n                text="{i18n>cancelBtn}"\n                press="._dialogCancelButtonHandler"/>\n        </buttons>\n        <content>\n            <Page\n                class="sapUshellSettingsPage"\n                showHeader="true">\n                <customHeader>\n                    <Bar id="settingsBar">\n                        <contentLeft>\n                            <ToggleButton id="userSettingsNavBackButton"\n                                icon="{= ${device>/system/phone} ? \'sap-icon://nav-back\' : \'sap-icon://menu2\'}"\n                                press="._navBackButtonPressHandler"\n                                tooltip="{i18n>ToggleButtonShow}"\n                                visible="false"/>\n                        </contentLeft>\n                        <contentMiddle>\n                            <Text\n                                text="{i18n>userSettings}"/>\n                        </contentMiddle>\n                    </Bar>\n                </customHeader>\n                <content>\n                    <SplitApp id="settingsApp"\n                        defaultTransitionNameDetail="show"\n                        afterMasterClose="._handleNavButton"\n                        afterMasterOpen="._handleNavButton">\n                        <detailPages>\n                            <Page id="userSettingsErrorPage"\n                                class="sapUsheUserSettingDetaildPage"\n                                showHeader="false">\n                                <content>\n                                    <ObjectHeader\n                                        class="sapUshellUserSettingDetailHeader"\n                                        title="{entries>title}"\n                                        backgroundDesign="Solid"/>\n                                    <FlexBox id="userPrefErrorFlexBox"\n                                        height="5rem"\n                                        alignItems="Center"\n                                        justifyContent="Center">\n                                        <items>\n                                            <Text id="userPrefErrorText"\n                                                text="{i18n>loadingErrorMessage}"/>\n                                        </items>\n                                    </FlexBox>\n                                </content>\n                            </Page>\n                        </detailPages>\n                        <masterPages>\n                            <Page id="userSettingMaster"\n                                class="sapUshellUserSettingMaster"\n                                showHeader="false">\n                                <content>\n                                    <List id="userSettingEntryList"\n                                        items="{entries>/entries}"\n                                        mode="SingleSelectMaster"\n                                        select="._itemPress">\n                                        <items>\n                                            <StandardListItem\n                                                class="sapUshellUserSettingMasterListItem"\n                                                title="{entries>title}"\n                                                description="{entries>valueResult}"\n                                                icon="{\n                                                    parts: [\n                                                        {path: \'entries>icon\'},\n                                                        {path: \'/userImage/account\'}\n                                                    ],\n                                                    formatter: \'._getEntryIcon\'\n                                                }"\n                                                type="{= ${device>/system/phone} ? \'Navigation\' : \'Inactive\'}"\n                                                visible="{\n                                                    parts: [\n                                                        {path: \'entries>visible\'},\n                                                        {path: \'entries>defaultVisibility\'},\n                                                        {path: \'entries>title\'}\n                                                    ],\n                                                    formatter: \'._getEntryVisible\'\n                                                }"/>\n                                        </items>\n                                    </List>\n                                </content>\n                            </Page>\n                        </masterPages>\n                    </SplitApp>\n                </content>\n            </Page>\n        </content>\n    </Dialog>\n</mvc:View>',"sap/ushell/components/shell/UserSettings/userAccount/UserAccountImgConsentSelector.fragment.xml":'<core:FragmentDefinition\n        height="100%"\n        width="100%"\n        xmlns:m="sap.m"\n        xmlns:core="sap.ui.core">\n    <m:VBox>\n        <m:FlexBox alignItems="{config>/flexAlignItems}" direction="{config>/textDirection}"\n                   id="userImgConsentEnableFlexBox">\n            <m:Label text="{i18n>imgConsentMsg}:"\n                     class="sapUshellUserAccountLabel"/>\n        </m:FlexBox>\n        <m:FlexBox alignItems="{config>/flexAlignItems}" direction="{config>/textDirection}">\n            <m:Link text="{i18n>userImageConsentDialogShowTermsOfUse}" textAlign="{config>/textAlign}"\n                    class="sapUshellUserAccountLabel" press = "termsOfUserPress" id="termsOfUseLink"  />\n            <m:Label text="{i18n>userImageConsentText}:" visible="false" id="sapUshellUserImageConsentSwitchLabel"/>\n        </m:FlexBox>\n        <m:FlexBox direction="{config>/textDirection}" id="termsOfUseTextFlexBox"\n                   visible = "false">\n            <m:Text text="{i18n>userImageConsentDialogTermsOfUse}" class = "sapUshellUserConsentDialogTerms" />\n        </m:FlexBox>\n    </m:VBox>\n</core:FragmentDefinition>',"sap/ushell/components/shell/UserSettings/userAccount/UserAccountSelector.controller.js":function(){sap.ui.define(["sap/ushell/ui5service/UserStatus","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/base/Log","sap/ui/thirdparty/jquery","sap/ui/core/service/ServiceFactoryRegistry","sap/ushell/resources","sap/ushell/ui/launchpad/UserStatusItem","sap/m/Switch","sap/m/library","sap/ui/model/json/JSONModel","sap/ui/core/theming/Parameters","sap/ui/Device","sap/m/Popover","sap/ui/core/IconPool"],function(U,A,L,q,S,r,a,b,m,J,P,D,c,I){"use strict";var d=m.PlacementType;var f=m.SwitchType;sap.ui.controller("sap.ushell.components.shell.UserSettings.userAccount.UserAccountSelector",{onInit:function(){var t=this;var s=sap.ushell.Container.getRenderer("fiori2").getShellController();var o=s.getView();this.oShellConfig=(o.getViewData()?o.getViewData().config:{})||{};this.imgConsentEnabled=this.oShellConfig.enableUserImgConsent?this.oShellConfig.enableUserImgConsent:false;this.userStatusEnabled=this.oShellConfig.enableOnlineStatus&&U.prototype.isEnabled;this.userStatusEnabled=this.userStatusEnabled?this.userStatusEnabled:false;if(this.imgConsentEnabled){try{this.userInfoService=sap.ushell.Container.getService("UserInfo");this.oUser=this.userInfoService.getUser();}catch(e){L.error("Getting UserInfo service failed.");this.oUser=sap.ushell.Container.getUser();}this.currentUserImgConsent=this.oUser.getImageConsent();this.origUserImgConsent=this.currentUserImgConsent;this.addImgConsentEnableSwitch(this.currentUserImgConsent);}if(this.userStatusEnabled){if(this.isServiceEnable()){this.originalEnableStatus=null;this.originalUserStatus=null;var g=S.get("sap.ushell.ui5service.UserStatus");var h=g.createInstance();h.then(function(g){t.oUserStatusService=g;var p=t._getUserStatusSetting();p.then(function(u){var i=u&&u.userStatusEnabled?u.userStatusEnabled:false;var j=u&&u.userStatusDefault?u.userStatusDefault:undefined;this.originalEnableStatus=i;this.originalUserStatus=j;t.userStatusButton=t._getOnlineStatusPopOver(this.originalUserStatus);t.addUserStatusDropdown();t.addUserEnableSwitch(i);}.bind(t));},function(){});}}},getContent:function(){var o=q.Deferred();var R=r.getTranslationModel();this.getView().setModel(R,"i18n");this.getView().setModel(this.getConfigurationModel(),"config");o.resolve(this.getView());return o.promise();},getValue:function(){var o=q.Deferred();o.resolve(sap.ushell.Container.getUser().getFullName());return o.promise();},onCancel:function(){if(this.userStatusEnabled){if(this.isServiceEnable()){this.oUserEnableOnlineStatusSwitch.setState(this.originalEnableStatus);this.userStatusButton.setStatus(a.prototype.STATUS_ENUM[this.originalUserStatus]);}}if(this.imgConsentEnabled){this.currentUserImgConsent=this.oUser.getImageConsent();this.oUserEnableImgConsentSwitch.setState(this.currentUserImgConsent);}},onSave:function(){var R=q.Deferred(),w,u,e,p=[];if(this.userStatusEnabled){u=this.onSaveUserStatus();p.push(u);}if(this.imgConsentEnabled){e=this.onSaveUserImgConsent();p.push(e);}w=q.when.apply(null,p);w.done(function(){R.resolve();});return R.promise();},onSaveUserImgConsent:function(){var e=q.Deferred();var u;if(this.oUser.getImageConsent()!==this.currentUserImgConsent){if(this.currentUserImgConsent!==undefined){this.oUser.setImageConsent(this.currentUserImgConsent);u=this.userInfoService.updateUserPreferences(this.oUser);u.done(function(){this.oUser.resetChangedProperty("isImageConsent");this.origUserImgConsent=this.currentUserImgConsent;e.resolve();}.bind(this));u.fail(function(E){this.oUser.setImageConsent(this.origUserImgConsent);this.oUser.resetChangedProperty("isImageConsent");this.currentUserImgConsent=this.origUserImgConsent;L.error(E);e.reject(E);}.bind(this));}else{e.reject(this.currentUserImgConsent+"is undefined");}}else{e.resolve();}return e.promise();},onSaveUserStatus:function(){var o=q.Deferred(),u;if(this.isServiceEnable()){if(this.originalEnableStatus!==this.oUserEnableOnlineStatusSwitch.getState()||this.originalUserStatus!==this.userStatusButton.getStatus().status){if(!this.oUserEnableOnlineStatusSwitch.getState()){u=null;this.oUserStatusService.setStatus(null);}else{u=this.userStatusButton.getStatus()?this.userStatusButton.getStatus().status:"AVAILABLE";}this._writeUserStatusSettingToPersonalization({userStatusEnabled:this.oUserEnableOnlineStatusSwitch.getState(),userStatusDefault:u});if(!this.originalEnableStatus&&this.oUserEnableOnlineStatusSwitch.getState()){this.oUserStatusService.setStatus(u);}this.originalEnableStatus=this.oUserEnableOnlineStatusSwitch.getState();this.originalUserStatus=u;}}o.resolve();return o.promise();},addUserStatusDropdown:function(){var u=sap.ui.getCore().byId("UserAccountSelector--userStatusDropDownFlexBox");u.addItem(this.userStatusButton);},addUserEnableSwitch:function(e){var u=sap.ui.getCore().byId("UserAccountSelector--userStatusEnableFlexBox");this.oUserEnableOnlineStatusSwitch=new b({type:f.Default,state:e,change:function(E){this.userStatusButton.setEnabled(E.mParameters.state);this.userStatusButton.$().attr("tabindex",E.mParameters.state?0:-1);}.bind(this)});this.oUserEnableOnlineStatusSwitch.addCustomData(new A({key:"aria-labelledBy",value:"UserAccountSelector--sapUshellEnableStatusLabel",writeToDom:true}));this.userStatusButton.setEnabled(e);this.userStatusButton.$().attr("tabindex",e?0:-1);if(!u){L.error("UserAccountSelector: addUserEnableSwitch was called before the renderer");return;}u.addItem(this.oUserEnableOnlineStatusSwitch);},isServiceEnable:function(){return U?U.prototype.isEnabled:false;},getConfigurationModel:function(){var C=new J({});var u=sap.ushell.Container.getUser();C.setData({isRTL:sap.ui.getCore().getConfiguration().getRTL(),sapUiContentIconColor:P.get("sapUiContentIconColor"),isStatusEnable:this.originalEnableStatus?this.originalEnableStatus:false,flexAlignItems:D.system.phone?"Stretch":"Center",textAlign:D.system.phone?"Left":"Right",textDirection:D.system.phone?"Column":"Row",labelWidth:D.system.phone?"auto":"12rem",name:u.getFullName(),mail:u.getEmail(),server:window.location.host,imgConsentEnabled:this.imgConsentEnabled,isImageConsent:this.currentUserImgConsent,userStatusEnabled:this.userStatusEnabled});return C;},_getOnlineStatusPopOver:function(u){var p=new c({placement:d.Bottom,showArrow:true,showHeader:false,content:[new a({status:a.prototype.STATUS_ENUM.AVAILABLE,isOpener:false,press:function(){o.setStatus(a.prototype.STATUS_ENUM.AVAILABLE);p.close();}}).addStyleClass("sapUserStatusContainer"),new a({status:a.prototype.STATUS_ENUM.AWAY,isOpener:false,press:function(){o.setStatus(a.prototype.STATUS_ENUM.AWAY);p.close();}}).addStyleClass("sapUserStatusContainer"),new a({status:a.prototype.STATUS_ENUM.BUSY,isOpener:false,press:function(){o.setStatus(a.prototype.STATUS_ENUM.BUSY);p.close();}}).addStyleClass("sapUserStatusContainer"),new a({status:a.prototype.STATUS_ENUM.APPEAR_OFFLINE,isOpener:false,press:function(){o.setStatus(a.prototype.STATUS_ENUM.APPEAR_OFFLINE);p.close();}}).addStyleClass("sapUserStatusContainer")]});var o=new a({tooltip:"{i18n>headerActionsTooltip}",enabled:false,ariaLabel:sap.ushell.Container.getUser().getFullName(),image:I.getIconURI("account"),status:u?a.prototype.STATUS_ENUM[u]:a.prototype.STATUS_ENUM.AVAILABLE,press:function(e){var B=sap.ui.getCore().byId(e.mParameters.id);p.openBy(B);},contentList:p}).addStyleClass("sapUserStatusOpener");return o;},_writeUserStatusSettingToPersonalization:function(u){var o,p;try{p=this._getUserSettingsPersonalizer().setPersData(u);}catch(e){L.error("Personalization service does not work:");L.error(e.name+": "+e.message);o=new q.Deferred();o.reject(e);p=o.promise();}return p;},_getUserSettingsPersonalizer:function(){if(this.oUserPersonalizer===undefined){this.oUserPersonalizer=this._createUserPersonalizer();}return this.oUserPersonalizer;},_createUserPersonalizer:function(){var p=sap.ushell.Container.getService("Personalization"),C,s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true},o={container:"sap.ushell.services.UserStatus",item:"userStatusData"},e=p.getPersonalizer(o,s,C);return e;},_getUserStatusSetting:function(){var p=this._getUserSettingsPersonalizer();return p.getPersData();},addImgConsentEnableSwitch:function(e){var u=sap.ui.getCore().byId("UserAccountSelector--userImgConsentEnableFlexBox");this.oUserEnableImgConsentSwitch=new b({customTextOff:r.i18n.getText("No"),customTextOn:r.i18n.getText("Yes"),type:f.Default,state:e,change:this.setCurrentUserImgConsent.bind(this)});this.oUserEnableImgConsentSwitch.addCustomData(new A({key:"aria-labelledBy",value:"UserAccountSelector--sapUshellUserImageConsentSwitchLabel",writeToDom:true}));if(!u){L.error("UserAccountSelector: addImgConsentEnableSwitch was called before the renderer");return;}u.addItem(this.oUserEnableImgConsentSwitch);},setCurrentUserImgConsent:function(e){this.currentUserImgConsent=e.mParameters.state;},termsOfUserPress:function(){var t=sap.ui.getCore().byId("UserAccountSelector--termsOfUseTextFlexBox");var e=sap.ui.getCore().byId("UserAccountSelector--termsOfUseLink");var i=t.getVisible();if(i){t.setVisible(false);e.setText(r.i18n.getText("userImageConsentDialogShowTermsOfUse"));}else{e.setText(r.i18n.getText("userImageConsentDialogHideTermsOfUse"));t.setVisible(true);}}});});},"sap/ushell/components/shell/UserSettings/userAccount/UserAccountSelector.view.js":function(){sap.ui.define(["sap/ui/thirdparty/jquery","sap/m/VBox","sap/m/FlexBox","sap/m/Input","sap/m/Label","sap/ui/Device","sap/ushell/resources"],function(q,V,F,I,L,D,r){"use strict";sap.ui.jsview("sap.ushell.components.shell.UserSettings.userAccount.UserAccountSelector",{createContent:function(){var i=r.i18n;var f=D.system.phone?"Column":"Row";var s=D.system.phone?"Stretch":"Center";var t=D.system.phone?"Left":"Right";var l=D.system.phone?"auto":"12rem";var n=new L({text:i.getText("UserAccountNameFld")+":",width:l,textAlign:t});var a=new I("userAccountuserName",{value:"{/name}",editable:false}).addAriaLabelledBy(n);a.addEventDelegate({onfocusin:function(){q("#userAccountuserName input").blur();}});var b=new F({alignItems:s,direction:f,items:[n,a]});var e=new L({text:i.getText("UserAccountEmailFld")+":",width:l,textAlign:t});var c=new F({alignItems:s,direction:f,items:[e,new I({value:"{/mail}",editable:false}).addAriaLabelledBy(e)]});var d=new L({text:i.getText("UserAccountServerFld")+":",width:l,textAlign:t});var g=new F({alignItems:s,direction:f,items:[d,new I({value:"{/server}",editable:false}).addAriaLabelledBy(d)]});var v=new V({items:[b,c,g]});v.addStyleClass("sapUiSmallMargin");return v;},getControllerName:function(){return"sap.ushell.components.shell.UserSettings.userAccount.UserAccountSelector";}});},true);},"sap/ushell/components/shell/UserSettings/userAccount/UserAccountSelector.view.xml":'<View\n\t\tcontrollerName="sap.ushell.components.shell.UserSettings.userAccount.UserAccountSelector"\n\t\txmlns="sap.m"\n\t\txmlns:core="sap.ui.core">\n\n\t<IconTabBar id="idIconTabBar"\n\t\tapplyContentPadding="true">\n\t\t<items>\n\t\t\t<IconTabFilter text="{i18n>UserAccountFld}">\n\t\t\t\t<core:Fragment fragmentName="sap.ushell.components.shell.UserSettings.userAccount.UserAccountSetting" type="XML"></core:Fragment>\n\t\t\t</IconTabFilter>\n\t\t\t<IconTabFilter text="{i18n>UserAccountOnlineStatusTitle}">\n\t\t\t\t<core:Fragment fragmentName="sap.ushell.components.shell.UserSettings.userAccount.UserAccountStatusSelector" type="XML"></core:Fragment>\n\t\t\t</IconTabFilter>\n\t\t\t<IconTabFilter visible = "{config>/imgConsentEnabled}" text="{i18n>ProfileImgId}">\n\t\t\t\t<core:Fragment fragmentName="sap.ushell.components.shell.UserSettings.userAccount.UserAccountImgConsentSelector" type="XML"></core:Fragment>\n\t\t\t</IconTabFilter>\n\t\t</items>\n\t</IconTabBar>\n</View>',"sap/ushell/components/shell/UserSettings/userAccount/UserAccountSetting.fragment.xml":'<core:FragmentDefinition\n                         height="100%"\n                         width="100%"\n                         xmlns:m="sap.m"\n                         xmlns:core="sap.ui.core">\n    <m:VBox class="sapUiSmallMargin">\n        <m:FlexBox alignItems="{config>/flexAlignItems}" direction="{config>/textDirection}">\n            <m:Label text="{i18n>UserAccountNameFld}:"\n                     class="sapUshellUserAccountLabel"\n                     width="{config>/labelWidth}"\n                     textAlign="{config>/textAlign}"\n                     labelFor="userAccountuserName"/>\n            <m:Input value="{config>/name}"\n                     id="userAccountuserName"\n                     class="sapUshellUserAccountInput"\n                     editable="false"/>\n\n        </m:FlexBox>\n\n\n        <m:FlexBox alignItems="{config>/flexAlignItems}" direction="{config>/textDirection}">\n            <m:Label text="{i18n>UserAccountEmailFld}:"\n                     class="sapUshellUserAccountLabel"\n                     width="{config>/labelWidth}"\n                     textAlign="{config>/textAlign}"\n                     labelFor="userAccountuserMail"/>\n            <m:Input value="{config>/mail}"\n                     id="userAccountuserMail"\n                     class="sapUshellUserAccountInput"\n                     editable="false"/>\n\n        </m:FlexBox>\n\n        <m:FlexBox alignItems="{config>/flexAlignItems}" direction="{config>/textDirection}">\n            <m:Label text="{i18n>UserAccountServerFld}:"\n                     class="sapUshellUserAccountLabel"\n                     width="{config>/labelWidth}"\n                     textAlign="{config>/textAlign}"\n                     labelFor="userAccountuserServer"/>\n            <m:Input value="{config>/server}"\n                     id="userAccountuserServer"\n                     class="sapUshellUserAccountInput"\n                     editable="false"/>\n\n        </m:FlexBox>\n\n    </m:VBox>\n</core:FragmentDefinition>',"sap/ushell/components/shell/UserSettings/userAccount/UserAccountSetting.view.xml":'<View\n        controllerName="sap.ushell.components.shell.UserSettings.userAccount.UserAccountSelector"\n        xmlns:core="sap.ui.core" xmlns:mvc="sap.ui.core.mvc"\n        xmlns="sap.m">\n    <core:Fragment fragmentName="sap.ushell.components.shell.UserSettings.userAccount.UserAccountSetting" type="XML"></core:Fragment>\n</View>',"sap/ushell/components/shell/UserSettings/userAccount/UserAccountStatusSelector.fragment.xml":'<core:FragmentDefinition\n                         height="100%"\n                         width="100%"\n                         xmlns:m="sap.m"\n                         xmlns:core="sap.ui.core">\n    <m:VBox>\n        <m:FlexBox alignItems="{config>/flexAlignItems}" direction="{config>/textDirection}"\n                   id="userStatusEnableFlexBox">\n            <m:Label text="{i18n>enableStatusMessageBoxFld}:"\n                     class="sapUshellUserAccountLabel" id="sapUshellEnableStatusLabel"/>\n        </m:FlexBox>\n        <m:FlexBox direction="{config>/textDirection}" id="userStatusLegalMessageFlexBox1"\n                   class="ushellUserStatusLegalMessageFlexBox">\n            <m:Text text="{i18n>userStatusMessageBoxInfoTextLine1}"/>\n        </m:FlexBox>\n        <m:FlexBox alignItems="{config>/flexAlignItems}" direction="{config>/textDirection}"\n                   id="userStatusDropDownFlexBox" class="ushellUserStatusDropDownFlexBox">\n            <m:Label text="{i18n>userStatusSettingDropdownLabelFld}:"\n                     class="sapUshellUserAccountLabel"/>\n\n        </m:FlexBox>\n        <m:FlexBox direction="{config>/textDirection}" id="ushellDefaultStatusDescription"\n                   class="ushellUserStatusLegalMessageFlexBox">\n            <m:Text text="{i18n>userStatusDefaultStatusDescriptionLine1}"/>\n        </m:FlexBox>\n    </m:VBox>\n</core:FragmentDefinition>',"sap/ushell/components/shell/UserSettings/userActivitiesHandler.controller.js":function(){sap.ui.define(["sap/ushell/components/applicationIntegration/AppLifeCycle","sap/ushell/Config","sap/ui/thirdparty/jquery","sap/base/Log","sap/ui/core/Component","sap/ushell/resources"],function(A,C,q,L,a,r){"use strict";sap.ui.controller("sap.ushell.components.shell.UserSettings.userActivitiesHandler",{onInit:function(){this.oModel=A.getElementsModel().getModel();this.isTrackingEnable=this.oModel.getProperty("/enableTrackingActivity")!==undefined?this.oModel.getProperty("/enableTrackingActivity"):true;this.currentTrackingMode=this.isTrackingEnable;this.oView.trackUserActivitySwitch.setState(this.isTrackingEnable);},getContent:function(){var d=q.Deferred();d.resolve(this.getView());return d.promise();},getValue:function(){return q.Deferred().resolve(" ");},onCancel:function(){var d=q.Deferred();if(this.currentTrackingMode!==this.isTrackingEnable){this.isTrackingEnable=!this.isTrackingEnable;this.oView.trackUserActivitySwitch.setState(this.isTrackingEnable);}d.resolve();return d.promise();},onSave:function(){var d=q.Deferred();if(this.currentTrackingMode!==this.isTrackingEnable){this.oModel.setProperty("/enableTrackingActivity",this.isTrackingEnable);this.writeUserActivityModeToPersonalization(this.isTrackingEnable);if(!this.isTrackingEnable){this._handleCleanHistory();}this.currentTrackingMode=this.isTrackingEnable;C.emit("/core/shell/model/enableTrackingActivity",this.isTrackingEnable);}d.resolve();return d.promise();},writeUserActivityModeToPersonalization:function(i){var d,p;try{p=this._getPersonalizer().setPersData(i);}catch(e){L.error("Personalization service does not work:");L.error(e.name+": "+e.message);d=new q.Deferred();d.reject(e);p=d.promise();}return p;},_getPersonalizer:function(){var p=sap.ushell.Container.getService("Personalization"),c=a.getOwnerComponentFor(this),s={keyCategory:p.constants.keyCategory.FIXED_KEY,writeFrequency:p.constants.writeFrequency.LOW,clientStorageAllowed:true},P={container:"flp.settings.FlpSettings",item:"userActivitesTracking"};return p.getPersonalizer(P,s,c);},_handleCleanHistory:function(){sap.ushell.Container.getServiceAsync("UserRecents").then(function(s){s.clearRecentActivities();b();function b(){sap.ui.require(["sap/m/MessageToast"],function(M){var m=r.i18n.getText("savedChanges");M.show(m,{duration:3000,width:"15em",my:"center bottom",at:"center bottom",of:window,offset:"0 -50",collision:"fit fit"});});}});},_handleTrackUserActivitySwitch:function(i){this.isTrackingEnable=i;}});});},"sap/ushell/components/shell/UserSettings/userActivitiesHandler.view.js":function(){sap.ui.define(["sap/m/VBox","sap/m/Button","sap/m/FlexBox","sap/m/library","sap/m/Switch","sap/m/Label","sap/ui/Device","sap/ushell/resources"],function(V,B,F,m,S,L,D,r){"use strict";var a=m.SwitchType;sap.ui.jsview("sap.ushell.components.shell.UserSettings.userActivitiesHandler",{createContent:function(c){var i=r.i18n;var f=D.system.phone?"Column":"Row";var s=D.system.phone?"Stretch":"Center";var t=D.system.phone?"Left":"Right";var C="cleanActivityButton";this.trackingLabel=new L("trackingLabel",{text:i.getText("trackingLabel"),textAlign:t}).addStyleClass("sapUshellCleanActivityLabel");this.trackUserActivitySwitch=new S("trackUserActivitySwitch",{type:a.Default,customTextOn:i.getText("Yes"),customTextOff:i.getText("No"),change:function(e){c._handleTrackUserActivitySwitch(e.getParameter("state"));}}).addAriaLabelledBy(this.trackingLabel);var T=new F({alignItems:s,direction:f,items:[this.trackingLabel,this.trackUserActivitySwitch]});this.cleanActivityLabel=new L("cleanActivityLabel",{text:i.getText("cleanActivityLabel"),textAlign:t,labelFor:C}).addStyleClass("sapUshellCleanActivityLabel");this.cleanActivityButton=new B({id:"cleanActivityButton",text:i.getText("cleanActivityButton"),press:c._handleCleanHistory}).addAriaLabelledBy(this.cleanActivityLabel);var b=new F({alignItems:s,direction:f,items:[this.cleanActivityLabel,this.cleanActivityButton]});var v=new V({items:[T,b]});v.addStyleClass("sapUiSmallMargin");return v;},getControllerName:function(){return"sap.ushell.components.shell.UserSettings.userActivitiesHandler";}});});}},"Component-preload");
