// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/components/applicationIntegration/application/Application","sap/ui/thirdparty/URI","sap/ui/thirdparty/jquery"],function(A,U,q){"use strict";function B(){var c,a,b={},s={},h={"DEFAULT":{storageIdentifier:function(u){return this._stripURL(u);},setup:function(t,S){},isContentLoaded:function(i){return false;},create:function(i,u,S){return A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","create",{sCacheId:S,sUrl:u,sHash:window.hasher.getHash()});},destroy:function(i){return A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","destroy",{});},store:function(i,S){},restore:function(i,S){}},"URL":{setup:function(t,S){},create:function(i,u,S){return A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","create",{sCacheId:S,sUrl:u,sHash:window.hasher.getHash()},true);},destroy:function(i,S){return A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","destroy",{sCacheId:S},true);},store:function(i,S){return A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","store",{sCacheId:S},true);},restore:function(i,S){return A.postMessageToIframeApp(i,"sap.ushell.services.appLifeCycle","restore",{sCacheId:S,sHash:window.hasher.getHash()},true);}}};this.init=function(S,i,d){c={};A.init(this);a=d;if(i){s=q.extend(true,s,i.supportedTypes);}};this.mapCapabilities=function(C,d){this.setCapabilities(C,d);};this.getTypeSupported=function(t){return s[t];};this.isTypeSupported=function(t){var S=s[t];if(S&&S.isSupported===true){return true;}return false;};this.getCapabilities=function(o){return b[o].oCapMap;};this.isCapabilitySupported=function(o,S,i){if(b[o]&&b[o].oCapMap&&b[o].oCapMap[S]){return!!b[o].oCapMap[S][i];}return false;};this.setCapabilities=function(o,C){var d;if(!b[o]){b[o]={};}if(!b[o].oCapMap){b[o].oCapMap={};}d=b[o].oCapMap;Object.keys(C).forEach(function(k){var e=C[k],f;if(!d[e.service]){d[e.service]={};}f=d[e.service];f[e.action]=true;});};this.getStorageKey=function(o){return b[o].sStorageKey;};this.setStorageKey=function(o,d){if(!b[o]){b[o]={};}b[o].sStorageKey=d;};this.getStorageKey=function(o){if(!b[o]){return undefined;}return b[o].sStorageKey;};this.getHandler=function(){return q.extend(true,h.DEFAULT,h["URL"]);};this._stripURL=function(u){var n=u.indexOf("?"),d=u.indexOf("#"),e;if(n>=0){e=u.substr(0,n);}else if(d>=0){e=u.substr(0,d);}else{e=u;}return e;};this.getStateFul=function(u){var d=this._stripURL(u);return this.get(d);};this.destroyApp=function(d){a.postMessageToIframeApp("sap.ushell.services.appLifeCycle","destroy",{appId:d});};this.openApp=function(d){a.postMessageToIframeApp("sap.ushell.services.appLifeCycle","create",{appId:d,sHash:window.hasher.getHash()});};this.storeApp=function(d){a.postMessageToIframeApp("sap.ushell.services.appLifeCycle","store",{appId:d,sHash:window.hasher.getHash()});};this.restoreApp=function(d){a.postMessageToIframeApp("sap.ushell.services.appLifeCycle","restore",{appId:d,sHash:window.hasher.getHash()});};this.get=function(u){return c[u];};this.getById=function(i){for(var k in c){if(c.hasOwnProperty(k)){var e=c[k];if(e.sId===i){return e;}}}};this.set=function(u,i){var S=this._stripURL(u);c[S]=i;};}return new B();},true);
