sap.ui.require.preload({"sap/ushell/components/homepage/ActionMode.js":function(){
// ${copyright}
sap.ui.define(["sap/ushell/Config","sap/ushell/resources","sap/m/ActionSheet","sap/m/library","sap/m/Button","sap/ui/thirdparty/jquery"],function(C,r,A,m,B,q){"use strict";var P=m.PlacementType;var a=function(){this.oEventBus=sap.ui.getCore().getEventBus();this.oEventBus.subscribe("launchpad","actionModeInactive",this.scrollToViewPoint,this);this.oEventBus.subscribe("launchpad","actionModeActive",this.scrollToViewPoint,this);this.viewPoint=undefined;this.init=function(M){this.oModel=M;};};a.prototype.activate=function(){this.oModel.setProperty("/tileActionModeActive",true);this.aOrigHiddenGroupsIds=this.getHomepageManager().getCurrentHiddenGroupIds(this.oModel);var d=sap.ui.getCore().byId("dashboardGroups");d.addLinksToUnselectedGroups();var t=sap.ui.getCore().byId("ActionModeBtn");if(t){t.setTooltip(r.i18n.getText("exitEditMode"));t.setText(r.i18n.getText("exitEditMode"));if(t.setSelected){t.setSelected(true);}}this.oEventBus.publish("launchpad","actionModeActive");};a.prototype.scrollToViewPoint=function(){if(!this.viewPoint){return;}var d=this.viewPoint;d.restoreLastFocusedTile=true;if(!this.oModel.getProperty("/tileActionModeActive")){var j=q(".sapUshellTileContainerHeader[tabindex=0]");if(j&&j.length>0){var b=j[0].closest(".sapUshellTileContainer");if(b){d.restoreLastFocusedTileContainerById=b.id;}}}d.iDuration=0;window.setTimeout(q.proxy(this.oEventBus.publish,this.oEventBus,"launchpad","scrollToGroup",d),0);};a.prototype.deactivate=function(){var t=sap.ui.getCore().byId("TileActions");this.oModel.setProperty("/tileActionModeActive",false);this.oEventBus.publish("launchpad","actionModeInactive",this.aOrigHiddenGroupsIds);if(t!==undefined){t.destroy();}sap.ui.require(["sap/m/MessageToast"],function(M){M.show(r.i18n.getText("savedChanges"),{duration:4000});});var T=sap.ui.getCore().byId("ActionModeBtn");if(T){T.setTooltip(r.i18n.getText("activateEditMode"));T.setText(r.i18n.getText("activateEditMode"));if(T.setSelected){T.setSelected(false);}}};a.prototype.toggleActionMode=function(M,s,d){var t=M.getProperty("/tileActionModeActive"),c=M.getProperty("/topGroupInViewPortIndex"),h=M.getProperty("/homePageGroupDisplay"),g=M.getProperty("/groups")||[],f=null,n=0;if(!d){d=[];}var v=d.filter(function(i){return i.getVisible();});g.forEach(function(o,i){if(o.isGroupVisible&&o.visibilityModes[t?0:1]){n+=1;if(f===null){f=i;}o.showGroupHeader=true;}});if(n>1){g[f].showGroupHeader=false;}var G=C.last("/core/home/gridContainer");if(!t&&G){g[f].showGroupHeader=true;}var b=v[c];if(b){var e=t?-49:49;var j=(h==="tabs")?d[0].getDomRef():b.getDomRef();var S=0;if(j){S=j.offsetTop;}var k=document.getElementById("sapUshellDashboardPage-cont").scrollTop-S;this.viewPoint={group:v[c],fromTop:k+e};}else{this.viewPoint={fromTop:0};}if(t){this.deactivate();}else{this.activate();}};a.prototype.activateGroupEditMode=function(g){var j=q(g.getDomRef()).find(".sapUshellTileContainerContent");j.addClass("sapUshellTileContainerEditMode");};a.prototype.getHomepageManager=function(){if(!this.oHomepageManager){this.oHomepageManager=sap.ushell.components.getHomepageManager();}return this.oHomepageManager;};a.prototype._openActionsMenu=function(e,v){var t=this,T=v||e.getSource(),b=[],o=sap.ui.getCore().byId("TileActions"),i,n,c,d,f,h,g,j;if(T){f=T.getBindingContext().getObject().object;b=this.getHomepageManager().getTileActions(f);}t.oTileControl=T;q(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");g=q(e.getSource().getDomRef()).find(".sapUshellTileActionLayerDiv");g.addClass("sapUshellTileActionLayerDivSelected");if(o===undefined){o=new A("TileActions",{placement:P.Bottom,afterClose:function(){q(".sapUshellTileActionLayerDivSelected").removeClass("sapUshellTileActionLayerDivSelected");var E=sap.ui.getCore().getEventBus();E.publish("dashboard","actionSheetClose",t.oTileControl);}});}else{o.destroyButtons();}var k=T.getModel();var G=T.getParent().getBindingContext().getPath();if(b.length===0||k.getProperty(G+"/isGroupLocked")){n=new B({text:r.i18n.getText("tileHasNoActions"),enabled:false});o.addButton(n);}else{for(i=0;i<b.length;i++){d=b[i];h=(function(d){return function(){t._handleActionPress(d,T);};}(d));c=new B({text:d.text,icon:d.icon,press:h});o.addButton(c);}}j=e.getSource().getActionSheetIcon?e.getSource().getActionSheetIcon():undefined;if(j){o.openBy(j);}else{var M=sap.ui.getCore().byId(e.getSource().getId()+"-action-more");if(M){o.openBy(M);}else{o.openBy(e.getSource());}}};a.prototype._handleActionPress=function(o,t){if(o.press){o.press.call(o,t);}else if(o.targetURL){if(o.targetURL.indexOf("#")===0){hasher.setHash(o.targetURL);}else{window.open(o.targetURL,"_blank");}}else{sap.ui.require(["sap/m/MessageToast"],function(M){M.show("No Action");});}};return new a();},true);},"sap/ushell/components/homepage/Component.js":function(){sap.ui.define(["sap/ui/core/UIComponent","sap/ushell/bootstrap/common/common.load.model","sap/ushell/components/HomepageManager","sap/ushell/components/SharedComponentUtils","sap/ushell/Config","sap/ushell/resources"],function(U,m,H,s,C,r){"use strict";return U.extend("sap.ushell.components.homepage.Component",{metadata:{version:"${version}",library:"sap.ushell.components.homepage",dependencies:{libs:["sap.m"]},config:{semanticObject:"Shell",action:"home",title:r.i18n.getText("homeBtn_tooltip"),fullWidth:true,hideLightBackground:true}},init:function(){this.oModel=m.getModel();this.setModel(this.oModel);U.prototype.init.apply(this,arguments);var d={model:this.oModel,view:this.oDashboardView};this.oHomepageManager=new H("dashboardMgr",d);this.setModel(r.i18nModel,"i18n");sap.ui.getCore().getEventBus().subscribe("sap.ushell.services.UsageAnalytics","usageAnalyticsStarted",function(){sap.ui.require(["sap/ushell/components/homepage/FLPAnalytics"]);});s.toggleUserActivityLog();s.getEffectiveHomepageSetting("/core/home/homePageGroupDisplay","/core/home/enableHomePageSettings");C.on("/core/home/homePageGroupDisplay").do(function(n){this.oHomepageManager.handleDisplayModeChange(n);}.bind(this));s.getEffectiveHomepageSetting("/core/home/sizeBehavior","/core/home/sizeBehaviorConfigurable");C.on("/core/home/sizeBehavior").do(function(S){var M=this.oHomepageManager.getModel();M.setProperty("/sizeBehavior",S);}.bind(this));},createContent:function(){this.oDashboardView=sap.ui.view({viewName:"sap.ushell.components.homepage.DashboardContent",type:"JS",async:true});return this.oDashboardView;},exit:function(){this.oHomepageManager.destroy();}});});},"sap/ushell/components/homepage/ComponentKeysHandler.js":function(){sap.ui.define(["sap/ushell/Config","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ui/events/KeyCodes","sap/ui/thirdparty/jquery","sap/base/Log"],function(C,A,K,q,L){"use strict";var a=function(){};a.prototype={keyCodes:K,tileFocusCustomData:new A({key:"tabindex",value:"0",writeToDom:true}),goToTileContainer:function(){if(this.oModel.getProperty("/tileActionModeActive")){this.goToFirstVisibleTileContainer();}else{this.goToLastVisitedTile();}},goToFirstVisibleTileContainer:function(){var j=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");if(j.length){var b=q(j.get(t));if(b.length){this._setTileContainerSelectiveFocus(b);}}},goToLastVisitedTile:function(j,l){var b,d,e=q(".sapUshellTile, .sapMGTLineMode");if(l){var f=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),t=this.oModel.getProperty("/topGroupInViewPortIndex");var g=j||q(f.get(t));var h=g.find(".sapUshellTile, .sapMGTLineMode");b=h.filter(":visible").eq(0);d=h.filter("[tabindex=0]:visible").eq(0);if(!b.length){b=e.filter(":visible").eq(0);}}else{b=e.filter(":visible").eq(0);d=e.filter("[tabindex=0]:visible").eq(0);}if(d.length){this._moveScrollDashboard(d);}else if(b.length){b.attr("tabindex","0");this._moveScrollDashboard(b);}else{sap.ushell.renderers.fiori2.AccessKeysHandler.sendFocusBackToShell();}},_goToFirstTileOfNextGroup:function(d,e){this._preventDefault(e);var i=this._getGroupAndTilesInfo();if(i){var n=this._getNextGroup(d,i.oGroup,false,true);if(n){this._goToTileOfGroup("first",n);}}},_goToTileOfGroup:function(p,g){if(g){var b=g.getTiles();if(this.oModel.getProperty("/tileActionModeActive")){b.push(g.oPlusTile);}b=b.concat(g.getLinks());p=p==="first"?0:p;p=p==="last"?b.length-1:p;var t=b[p];if(t&&t.getDomRef()){var j=q(t.getDomRef());if(j.length===1){this._moveScrollDashboard(j);return true;}}}return false;},_moveTile:function(d){var i=this._getGroupAndTilesInfo(),D=this._getNextTile(d,true,i);if(D){var o=D.getParent();if(C.last("/core/home/gridContainer")&&o.getParent().getId()!=="dashboardGroups"){o=o.getParent();}var s=D.getMode?D.getMode():"ContentMode",b=i.oCurTile.getMode?i.oCurTile.getMode():"ContentMode",e=s==="LineMode"?o.getLinks():o.getTiles(),n=0;if(i.oGroup===o){n=e.indexOf(D);if(b==="LineMode"&&s==="ContentMode"&&d==="left"){n=e.length;}}else if(d==="left"||d==="up"){n=e.length;}var E,f,t=this;if(b===s){var g=q(".sapUshellDashboardView").control(0);E="movetile";f={sTileId:g.getController()._getTileUuid(i.oCurTile),toGroupId:o.getGroupId?o.getGroupId():o.groupId,toIndex:n,sToItems:b==="LineMode"?"links":"tiles",sFromItems:b==="LineMode"?"links":"tiles",sTileType:b==="LineMode"?"link":"tile"};if(s==="LineMode"){f.callBack=function(){setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t._moveScrollDashboard(e[n].$());},10);};}else{setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t._moveScrollDashboard(e[n].$());},10);}}else{E="convertTile";f={toGroupId:o.getGroupId?o.getGroupId():o.groupId,srcGroupId:i.oGroup.getGroupId?i.oGroup.getGroupId():i.oGroup.groupId,toIndex:n,callBack:function(){setTimeout(function(){e=s==="LineMode"?o.getLinks():o.getTiles();t._moveScrollDashboard(e[n].$());},10);},tile:i.oCurTile,longDrop:false};}sap.ui.getCore().getEventBus().publish("launchpad",E,f);}},callbackSetFocus:function(t){var b=this;setTimeout(function(){if(t.oParent&&t.oParent instanceof sap.ushell.ui.launchpad.Tile){b._moveScrollDashboard(q(t.oParent.getDomRef()));}else{b._moveScrollDashboard(t.$());}});},_getTileCenter:function(d,t,T){if(!(T instanceof HTMLElement)){var j=T.$().find(".sapMGTLineStyleHelper");if(T.isLink&&j&&j.length>1){if(d==="down"){return t.right;}return t.left;}}return t.right-((t.right-t.left)/2);},_getTileRect:function(d,t){if(t instanceof HTMLElement){return t.getBoundingClientRect();}var j=t.$().find(".sapMGTLineStyleHelper");if(t.isLink&&j&&j.length){if(d==="down"){return j.get(j.length-1).getBoundingClientRect();}return j.get(0).getBoundingClientRect();}if(t.getDomRef()){return t.getDomRef().getBoundingClientRect();}},_findClosestTile:function(d,t,o){var b=this._getTileRect(d,o),n=this._getTileCenter(d,b,o);var e,f=Infinity,g=d==="down"?1:-1,h=t.indexOf(o)+g,i;for(;;h+=g){var T=t[h];if(!T){return e;}if(!e){if(d==="down"&&h===t.length-1){return T;}if(d==="up"&&h===0){return T;}}var j=this._getTileRect(d,T);if(!j){return e;}if(d==="down"&&b.bottom+5>=j.bottom){continue;}if(d==="up"&&b.top-5<=j.top){continue;}if(e&&i!==j.top){return e;}i=j.top;var k=Math.min(Math.abs(j.left-n),Math.abs(j.right-n));if(f>k){f=k;e=T;}else{return e;}}},_getNextTile:function(d,m,g){var i=g||this._getGroupAndTilesInfo(),l=true;var n;var N;var G;var b;if(!i||(m&&i.oGroup.getProperty("isGroupLocked"))){return null;}if(m){var t=i.oCurTile.getBindingContext().getObject().object;l=sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported(t);}if(d==="right"||d==="left"){var f=i.oCurTile.isLink?i.aLinks:i.aTiles,e=f.indexOf(i.oCurTile),h=d==="right"?e+1:e-1;if(f[h]&&f[h].getDomRef()){if(m&&f[h]===i.oGroup.oPlusTile){}else{return f[h];}}if(d==="right"&&!i.oCurTile.isLink&&i.aLinks.length&&l){return i.aLinks[0];}if(d==="left"&&i.oCurTile.isLink&&i.aTiles.length){return i.oGroup.getShowPlaceholder()?i.oGroup.oPlusTile:i.aTiles[i.aTiles.length-1];}}var o=this._getNextGroup(d,i.oGroup,m,l);if(o){n=o.getTiles();N=o.getLinks();if(d==="right"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(n.length===0){return N[0];}return n[0];}if(d==="left"){if(n.length===0&&N.length===0){return o.oPlusTile;}else if(N.length===0){return n[n.length-1];}return N[N.length-1];}}if(d==="down"||d==="up"){G=l?i.aTiles.concat(i.aLinks):i.aTiles;b=[];if(o){var j=o.getTiles(),k=o.getLinks();b=l?j.concat(k):j;if(b.length===0){b.push(o.oPlusTile);}}var J=(d==="down")?G.concat(b):b.concat(G);return this._findClosestTile(d,J,i.oCurTile);}},_getNextGroup:function(d,o,m,l){var n,g=o.getParent().getGroups(),b=g.indexOf(o),e=b;if(d==="down"||d==="right"){n=1;}else{n=-1;}e+=n;while(g[e]){var N=g[e],f=N.getTiles(),h=N.getLinks();var i=l?f.concat(h):f;var I=N.getVisible()&&!(N.getIsGroupLocked()&&m)&&!(N.getIsGroupLocked()&&i.length===0)&&!(i.length===0&&!(m||this.oModel.getProperty("/tileActionModeActive")));if(I){return N;}e+=n;}},_getGroupAndTilesInfo:function(){var j=this._getFocusOnTile(q(document.activeElement));if(!j||!j.length){return null;}var o=j.control(0);o.isLink=j.hasClass("sapUshellLinkTile")||j.hasClass("sapMGTLineMode");var g=j.closest(".sapUshellTileContainer").control(0);if(!g){return null;}var t=g.getTiles();if(g.getShowPlaceholder()){t.push(g.oPlusTile);}return{oCurTile:o,oGroup:g,aTiles:t,aLinks:g.getLinks()};},_goToSiblingElementInTileContainer:function(d,j){var b=j.closest(".sapUshellTileContainer"),e,f,g;e=j.closest(".sapUshellTileContainerBeforeContent");if(e.length){if(d==="up"||d==="left"){this._goToNextTileContainer(e,d);}else{g=b.find(".sapUshellTileContainerHeader").eq(0);this._setTabIndexOnTileContainerHeader(g);g.focus();}return;}e=j.closest(".sapUshellTileContainerHeader");if(e.length){if(d==="up"){this._setTabIndexOnTileContainerHeader(g);if(!this._goToTileContainerBeforeContent(b)){this._goToNextTileContainer(e,d);}}else if(d==="down"){f=b.find(".sapUshellTile, .sapUshellLinkTile").eq(0);if(f.length){this._moveScrollDashboard(f);}else{this._goToNextTileContainer(e,d);}}else if(d==="left"){if(j.hasClass("sapUshellTileContainerHeader")){if(!this._goToTileContainerBeforeContent(b)){this._goToNextTileContainer(e,"left");}}else{g=j.closest(".sapUshellTileContainerHeader");g.focus();}}else if(d==="right"){var h=j.hasClass("sapMInputBaseInner");if(!h){f=b.find(".sapUshellTile, .sapUshellLinkTile").eq(0);if(f.length){this._moveScrollDashboard(f);}else{this._goToNextTileContainer(e,"down");}}}return;}e=this._getFocusOnTile(j);if(e){this._goFromFocusedTile(d,e,true);return;}e=j.closest(".sapUshellTileContainerAfterContent");if(e.length){if(d==="up"||d==="left"){this._goToTileOfGroup("first",e.control(0));}else{this._goToNextTileContainer(e,d);}}},_goToNextTileContainer:function(j,d){var b=j.closest(".sapUshellTileContainer");if(b.length===1){var e=q(".sapUshellTileContainer").filter(":visible"),n=(d==="down")?1:-1,f=q(e[e.index(b)+n]);if(f.length===1){var g=f.find(".sapUshellTileContainerHeader");if(d==="down"){if(!this._goToTileContainerBeforeContent(f)){this._setTabIndexOnTileContainerHeader(g);this._setTileContainerSelectiveFocus(f);}}else if(!this._goToTileContainerAfterContent(f)){if(d==="up"||d==="left"){var s=d==="up"?"first":"last";if(!this._goToTileOfGroup(s,f.control(0))){this._setTabIndexOnTileContainerHeader(g);g.focus();}}}}}},_goToTileContainerBeforeContent:function(j){var b=j.hasClass("sapUshellTileContainer")?j:j.closest(".sapUshellTileContainer"),d=b.find(".sapUshellTileContainerBeforeContent button").filter(":visible");if(d.length){d.focus();return true;}return false;},_goToTileContainerAfterContent:function(j){var b=j.hasClass("sapUshellTileContainer")?j:j.closest(".sapUshellTileContainer"),d=b.find(".sapUshellTileContainerAfterContent button").filter(":visible");if(d.length){d.focus();return true;}return false;},_goFromFocusedTile:function(d,$,i){var n=this._getNextTile(d);if(n){var N=n.$(),b=$.closest(".sapUshellTileContainer"),e=N.closest(".sapUshellTileContainer");if(i&&(b.get(0).id!==e.get(0).id)){if(d==="down"||d==="right"){if(!this._goToTileContainerAfterContent(b)){this._setTabIndexOnTileContainerHeader(e.find(".sapUshellTileContainerHeader"));this._setTileContainerSelectiveFocus(e);}}else if(d==="up"||d==="left"){var f=b.find(".sapUshellTileContainerHeader");this._setTabIndexOnTileContainerHeader(f);f.focus();}}else{this._moveScrollDashboard(N);}}},_setTabIndexOnTileContainerHeader:function(j){q(".sapUshellTileContainerHeader").attr("tabindex",-1);q(".sapUshellTileContainerHeader .sapUshellContainerTitle").attr("tabindex",-1);q(".sapUshellTileContainerHeader .sapUshellContainerHeaderActions button").attr("tabindex",-1);if(j){var b=j.find(".sapUshellContainerTitle").eq(0),d=j.find(".sapUshellContainerHeaderActions").eq(0);j.attr("tabindex",0);b.attr("tabindex",0);d.find("button").attr("tabindex",0);}},_setTileContainerSelectiveFocus:function(j){var b=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible"),d=j.find(".sapUshellTileContainerBeforeContent button"),e=j.find(".sapUshellTileContainerHeader").eq(0),B=d.length&&d.is(":visible");if(B){d.focus();}else if(j.get(0)===b.get(0)){this.goToLastVisitedTile();}else if(e.length){this._setTabIndexOnTileContainerHeader(e);e.focus();}},setTileFocus:function(j){if(!j.hasClass("sapUshellPlusTile")){if(j.parents("#catalogView").length>0){this.setFocusOnCatalogTile(j.find("[tabindex]").eq(0));}}var b=q(".sapUshellTile, .sapMGTLineMode, .sapUshellLinkTile, .sapMGT").filter("[tabindex=0]").get();for(var i=0;i<b.length;i++){b[i].setAttribute("tabindex","-1");}if(j.hasClass("sapFCard")){j=j.closest(".sapUshellCard");}if(j.length>0){j.attr("tabindex",0);if(j.prop("tagName")==="DIV"&&q(j).hasClass("sapUshellLinkTile")&&j.getMode===undefined){j=j.find("a").length?j.find("a")[0]:j;}j.focus();if(j[0]&&j[0].id){var t=sap.ui.getCore().byId(j[0].id);var d=this.tileFocusCustomData.getParent&&this.tileFocusCustomData.getParent();if(d){d.removeAggregation("customData",this.tileFocusCustomData,true);}if(t&&sap.ui.getCore().byId(t.getId())&&this.tileFocusCustomData&&sap.ui.getCore().byId(this.tileFocusCustomData.getId())){t.addAggregation("customData",this.tileFocusCustomData,true);}}}},setFocusOnCatalogTile:function(j){var p=q(".sapUshellTile[tabindex=0]"),b,v;if(p.length){q(".sapUshellTileContainerContent [tabindex=0]").get().forEach(function(h){q(h).attr("tabindex",-1);});b=p.find("[tabindex], a").andSelf().filter("[tabindex], a");b.attr("tabindex",-1);}if(!j){v=q(".sapUshellTile, .sapUshellAppBox").filter(":visible");if(v.length){j=q(v[0]);}else{return;}}j.attr("tabindex",0);j.find("button").attr("tabindex",0);j.focus();},_moveScrollDashboard:function(t){if(!t.length){return;}var f=t[0].parentElement.firstChild;var d=document.getElementById("dashboardGroups");var y=f.getBoundingClientRect().top-d.getBoundingClientRect().top;q("#sapUshellDashboardPage section").stop().animate({scrollTop:y},0,function(){this.setTileFocus(t);}.bind(this));},_moveGroupFromDashboard:function(d,j){var b,t=q(".sapUshellDashboardGroupsContainerItem"),i,e;b=j.closest(".sapUshellDashboardGroupsContainerItem");i=t.index(b);e=d==="up"||d==="left"?i-1:i+1;this._moveGroup(i,e);},_moveGroup:function(f,t){if(t<0||t>=q(".sapUshellDashboardGroupsContainerItem").length||t<q(".sapUshellDisableDragAndDrop").length){return;}sap.ui.getCore().getEventBus().publish("launchpad","moveGroup",{fromIndex:f,toIndex:t});var b=this;setTimeout(function(){var d=q(".sapUshellTileContainerHeader")[t];b._setTabIndexOnTileContainerHeader(q(d));q(d).focus();},100);},_getFocusOnTile:function(j){var b;[".sapUshellTile",".sapUshellLinkTile"].forEach(function(s){var d=j.closest(s);if(d.length){b=d;}});if(b&&b.hasClass("sapUshellCard")){b=b.children();}return b;},_renameGroup:function(j){if(j.closest(".sapUshellTileContainerHeader").length===1){j=j[0].tagName==="H2"?j:j.find("h2");j.click();}},_arrowsButtonsHandler:function(d,e,j){var i=this.oModel.getProperty("/tileActionModeActive");if((i&&j.hasClass("sapMInputBaseInner"))||j.hasClass("sapMITBFilter")){return;}this._preventDefault(e);if(j.hasClass("sapUshellAnchorItem")){this._handleAnchorNavigationItemsArrowKeys(d,j);return;}var b=this._getFocusOnTile(j);if(e.ctrlKey===true&&this.oModel.getProperty("/personalization")){var f=j.closest(".sapUshellTileContainerHeader");if(b){this._moveTile(d,b);}else if(f.length){var g=f.closest(".sapUshellTileContainerContent");if(!g.hasClass("sapUshellTileContainerDefault")||!g.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(d,f);}}}else if(i){this._goToSiblingElementInTileContainer(d,j);}else if(b){this._goFromFocusedTile(d,b,i);}else{this.goToLastVisitedTile();}},_handleAnchorNavigationItemsArrowKeys:function(d,j){var b=q(".sapUshellAnchorItem").filter(":visible"),n=b.index(j),N=j;if(d==="left"||d==="up"){if(n>0){N=b.get(n-1);}}else if(d==="right"||d==="down"){if(n<b.length-1){N=b.get(n+1);}}this._setAnchorItemFocus(q(N));},_setAnchorItemFocus:function(j){q(".sapUshellAnchorItem").get().forEach(function(h){q(h).attr("tabindex",-1);});j.attr("tabindex",0);j.focus();},_appFinderHomeEndButtonsHandler:function(d,e,j){var v=q(".sapUshellTile, .sapUshellAppBox").filter(":visible"),b;if(v.length){if(d==="home"){b=q(v.get(0));}if(d==="end"){b=q(v.get(v.length-1));}}if(b){this._preventDefault(e);this._appFinderFocusAppBox(j,b);}},_homeEndButtonsHandler:function(s,e,j){if(j.hasClass("sapUshellAnchorItem")){this._preventDefault(e);this._setAnchorItemFocus(q(".sapUshellAnchorItem").filter(":visible:"+s));}else if(e.ctrlKey===true){this._preventDefault(e);var b=q(".sapUshellTile").filter(":visible")[s]();this._moveScrollDashboard(b);}else{var d=j.closest(".sapUshellTileContainer");if(d){var g=d.control(0);if(g){this._preventDefault(e);this._goToTileOfGroup(s,g);}}}},_deleteButtonHandler:function(j){if(this.oModel.getProperty("/personalization")&&this.oModel.getProperty("/tileActionModeActive")){var b=this._getFocusOnTile(j);if(b&&!b.hasClass("sapUshellLockedTile")&&!b.hasClass("sapUshellPlusTile")){var i=this._getGroupAndTilesInfo();if(i){var d=q(".sapUshellDashboardView").control(0),t=d.getController()._getTileUuid(i.oCurTile),e=this;setTimeout(function(){if(i.oCurTile.getDomRef()){e._moveScrollDashboard(i.oCurTile.$());}else{e._moveScrollDashboard(i.oGroup.oPlusTile.$());}},100);sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",{tileId:t},this);}}}},_ctrlPlusArrowKeyButtonsHandler:function(d){var j=q(document.activeElement),b=j.closest(".sapUshellTileContainerHeader");if(this._getFocusOnTile(j)){this._moveTile(d);}else if(b.length){var e=b.closest(".sapUshellTileContainerContent");if(!e.hasClass("sapUshellTileContainerDefault")||!e.hasClass("sapUshellTileContainerLocked")){this._moveGroupFromDashboard(d,b);}}},_spaceButtonHandler:function(e,j){var b=this._getFocusOnTile(j);if(!b||!b.length){j.click();return;}e.preventDefault();if(b.hasClass("sapFCard")){b.control(0).getCardHeader().firePress();return;}b.control(0).firePress();},_enterButtonHandler:function(e,j){if(j.hasClass("sapMInputBaseInner")){var b=j.closest(".sapUshellTileContainerHeader"),t=this;if(b.length===1){setTimeout(function(){b=q("#"+b[0].id);t._setTabIndexOnTileContainerHeader(b);b.focus();},10);}}this._spaceButtonHandler(e,j);},goToSelectedAnchorNavigationItem:function(){this._setAnchorItemFocus(q(".sapUshellAnchorItemSelected"));return q(document.activeElement).hasClass("sapUshellAnchorItemSelected");},handleFocusOnMe:function(e,f){var r=sap.ushell.Container.getRenderer("fiori2"),h=c;if(r){var s=r.getCurrentCoreView();if(s==="home"){if(f){if(e.shiftKey){var d=window.document.getElementById("sapUshellDashboardFooterDoneBtn");if(d){d.focus();}else{h.goToLastVisitedTile();}}else if(!h.goToSelectedAnchorNavigationItem()){h.goToLastVisitedTile();}}else{h._dashboardKeydownHandler(e);}}if(s==="appFinder"){if(f){if(e.shiftKey){h.setFocusOnCatalogTile();}else{var o=sap.ui.getCore().byId("openCloseButtonAppFinderSubheader");if(o&&o.getVisible()){o.focus();}else{h.appFinderFocusMenuButtons(e);}}}else{h._appFinderKeydownHandler(e);}}}},_groupHeaderNavigation:function(j){var b;if(j.hasClass("sapUshellTileContainerHeader")){b=j.find(".sapUshellContainerTitle");b.focus();}else if(j.closest(".sapUshellTileContainerHeader")){b=j.closest(".sapUshellTileContainerHeader");b.focus();}},_appFinderFocusAppBox:function(j,b){if(j&&b){j.attr("tabindex","-1").find(".sapUshellPinButton").attr("tabindex","-1");b.attr("tabindex","0").focus();b.find(".sapUshellPinButton").attr("tabindex","0");}},_preventDefault:function(e){e.preventDefault();e.stopPropagation();e.stopImmediatePropagation();},_getNextCatalog:function(d,j){var b;if(d==="down"||d==="right"){b=j.next();}else if(d==="up"||d==="left"){b=j.prev();}else{L.error("Direction is unkown",d,"sap.ushell.components.homepage.ComponentKeysHandler");return null;}if(b.length>0){var n=b.find("li.sapUshellAppBox, li.sapUshellTile").get().length;if(n>0){return b;}return this._getNextCatalog(d,b);}},_getNextCatalogItem:function(d,j,p){var b=q(j.parents()[2]),e=b.find("li.sapUshellAppBox, li.sapUshellTile").get();if(d==="right"||d==="left"){var n=e.indexOf(j.get(0)),f=d==="right"?n+1:n-1;if(e[f]){return e[f];}}var g=this._getNextCatalog(d,b),N=g?g.find("li.sapUshellAppBox, li.sapUshellTile").get():[];if(N.length>0&&d==="right"){return N[0];}if(N.length>0&&d==="left"){return N[N.length-1];}if(d==="down"||d==="up"){if(N.length>0&&p){return N[0];}var J=(d==="down")?e.concat(N):N.concat(e);return this._findClosestTile(d,J,j.get(0));}},_appFinderKeysHandler:function(d,e,j,p){if(j.is(".sapUshellAppBox, .sapUshellTile")){this._preventDefault(e);var b=q(this._getNextCatalogItem(d,j,p));if(b){this._appFinderFocusAppBox(j,b);}}},appFinderFocusMenuButtons:function(e){var b=q("#catalog-button, #userMenu-button, #sapMenu-button").filter("[tabindex=0]");if(b.length){b.eq(0).focus();this._preventDefault(e);return true;}return false;},_appFinderKeydownHandler:function(e){var j=q(document.activeElement);if(e.srcElement.id!=="appFinderSearch-I"){var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL();if(i&&p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(i&&p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}switch(p){case this.keyCodes.ARROW_UP:this._appFinderKeysHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._appFinderKeysHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._appFinderKeysHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._appFinderKeysHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._appFinderKeysHandler("up",e,j,true);break;case this.keyCodes.PAGE_DOWN:this._appFinderKeysHandler("down",e,j,true);break;case this.keyCodes.HOME:this._appFinderHomeEndButtonsHandler("home",e,j);break;case this.keyCodes.END:this._appFinderHomeEndButtonsHandler("end",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;default:return;}}},_dashboardKeydownHandler:function(e){var p=e.keyCode,i=sap.ui.getCore().getConfiguration().getRTL(),j=q(document.activeElement);if(i){if(p===this.keyCodes.ARROW_RIGHT){p=this.keyCodes.ARROW_LEFT;}else if(p===this.keyCodes.ARROW_LEFT){p=this.keyCodes.ARROW_RIGHT;}}switch(p){case this.keyCodes.F2:this._renameGroup(j);break;case this.keyCodes.F7:this._groupHeaderNavigation(j);break;case this.keyCodes.DELETE:case this.keyCodes.BACKSPACE:this._deleteButtonHandler(j);break;case this.keyCodes.ARROW_UP:this._arrowsButtonsHandler("up",e,j);break;case this.keyCodes.ARROW_DOWN:this._arrowsButtonsHandler("down",e,j);break;case this.keyCodes.ARROW_RIGHT:this._arrowsButtonsHandler("right",e,j);break;case this.keyCodes.ARROW_LEFT:this._arrowsButtonsHandler("left",e,j);break;case this.keyCodes.PAGE_UP:this._goToFirstTileOfNextGroup("up",e);break;case this.keyCodes.PAGE_DOWN:this._goToFirstTileOfNextGroup("down",e);break;case this.keyCodes.HOME:this._homeEndButtonsHandler("first",e,j);break;case this.keyCodes.END:this._homeEndButtonsHandler("last",e,j);break;case this.keyCodes.SPACE:this._spaceButtonHandler(e,j);break;case this.keyCodes.ENTER:this._enterButtonHandler(e,j);break;default:break;}return true;},init:function(m){this.oModel=m;}};var c=new a();return c;},true);},"sap/ushell/components/homepage/DashboardContent.controller.js":function(){sap.ui.define(["sap/ui/thirdparty/jquery","./DashboardUIActions","sap/ushell/utils","sap/ushell/EventHub","sap/ui/Device","sap/ushell/components/homepage/ComponentKeysHandler","sap/ushell/resources","sap/ushell/Layout","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/base/Log"],function(q,D,u,E,a,C,r,L,F,b,c){"use strict";sap.ui.controller("sap.ushell.components.homepage.DashboardContent",{onInit:function(){var e=sap.ui.getCore().getEventBus();this.handleDashboardScroll=this._handleDashboardScroll.bind(this);e.subscribe("sap.ushell","appClosed",this._resizeHandler,this);e.subscribe("sap.ushell","appOpened",this._appOpenedHandler,this);e.subscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.subscribe("launchpad","actionModeInactive",this._handleGroupVisibilityChanges,this);e.subscribe("launchpad","switchTabBarItem",this._handleTabBarItemPressEventHandler,this);window.document.addEventListener("visibilitychange",u.handleTilesVisibility,false);if(a.browser.mobile){e.subscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);}this.isDesktop=(a.system.desktop&&(navigator.userAgent.toLowerCase().indexOf("tablet")<0));},onExit:function(){var e=sap.ui.getCore().getEventBus();e.unsubscribe("launchpad","contentRefresh",this._webkitMobileRenderFix,this);e.unsubscribe("sap.ushell","appClosed",this._resizeHandler,this);e.unsubscribe("sap.ushell","appOpened",this._appOpenedHandler,this);e.unsubscribe("launchpad","dashboardModelContentLoaded",this._modelLoaded,this);e.unsubscribe("launchpad","switchTabBarItem",this._handleTabBarItemPressEventHandler,this);window.document.removeEventListener("visibilitychange",u.handleTilesVisibility,false);},onAfterRendering:function(){u.setPerformanceMark("FLP - dashboard after rendering");var h=sap.ushell.components.getHomepageManager();if(!h.getPreparedGroupModel()){h.loadPersonalizedGroups();}else{E.once("firstSegmentCompleteLoaded").do(h.handleFirstSegmentLoaded.bind(h));}var e=sap.ui.getCore().getEventBus(),m,t,g,i,d;e.unsubscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.unsubscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);e.subscribe("launchpad","scrollToGroup",this._scrollToGroup,this);e.subscribe("launchpad","scrollToGroupByName",this._scrollToGroupByName,this);a.orientation.attachHandler(function(){var j=q("#dashboardGroups").find(".sapUshellTileContainer").filter(":visible");if(j.length){m=this.getView().getModel();t=m.getProperty("/topGroupInViewPortIndex");if(j.get(t)){g=sap.ui.getCore().byId(j.get(t).id);i=m.getProperty("/editTitle");this._publishAsync("launchpad","scrollToGroup",{group:g,isInEditTitle:i});}}},this);q(window).bind("resize",function(){clearTimeout(d);d=setTimeout(this._resizeHandler.bind(this),300);}.bind(this));this._updateTopGroupInModel();},_dashboardDeleteTileHandler:function(e){var t=e.getSource(),T=t.getBindingContext().getObject(),d={tileId:T.uuid};sap.ui.getCore().getEventBus().publish("launchpad","deleteTile",d,this);},dashboardTilePress:function(e){var t=e.getSource();if(!t){return;}var s=document.activeElement.id.indexOf("feedTile")!==-1;if(document.activeElement.tagName!=="INPUT"&&s!==true){if(sap.ui.getCore().byId(t.getId())){C.setTileFocus(t.$());}}sap.ui.getCore().getEventBus().publish("launchpad","dashboardTileClick",{uuid:t.getUuid()});},_updateTopGroupInModel:function(){var m=this.getView().getModel(),t=this._getIndexOfTopGroupInViewPort();var s=this._getModelGroupFromVisibleIndex(t);m.setProperty("/iSelectedGroup",s);m.setProperty("/topGroupInViewPortIndex",t);},_getIndexOfTopGroupInViewPort:function(){var v=this.getView(),d=v.getDomRef(),s=d.getElementsByTagName("section"),j=q(s).find(".sapUshellTileContainer"),o=j.not(".sapUshellHidden").eq(0).offset(),f=(o&&o.top)||0,t=[],n=s[0].scrollTop,e=0;if(!j||!o){return e;}j.each(function(){if(!q(this).hasClass("sapUshellHidden")){var h=q(this).parent().offset().top;t.push([h,h+q(this).parent().height()]);}});var g=n+f;q.each(t,function(i,h){var k=h[0],l=h[1];if(k-24<=g&&g<=l){e=i;return false;}});return e;},_handleDashboardScroll:function(){var v=this.getView(),m=v.getModel(),n=400;var h=m.getProperty("/homePageGroupDisplay"),e=h!=="tabs",t=m.getProperty("/tileActionModeActive");function H(){u.handleTilesVisibility();}clearTimeout(this.timeoutId);this.timeoutId=setTimeout(H,n);if(!a.system.phone){v.oAnchorNavigationBar.closeOverflowPopup();}if(e||t){this._updateTopGroupInModel();}v.oAnchorNavigationBar.reArrangeNavigationBarElements();},_handleGroupDeletion:function(g){var e=sap.ui.getCore().getEventBus(),G=g.getObject(),i=G.removable,s=G.title,d=G.groupId,R=r.i18n,m=sap.ushell.Container.getService("Message"),A,f,v=this.getView();sap.ui.require(["sap/m/MessageBox"],function(M){A=M.Action;f=(i?A.DELETE:R.getText("ResetGroupBtn"));m.confirm(R.getText(i?"delete_group_msg":"reset_group_msg",s),function(o){if(o===f){e.publish("launchpad",i?"deleteGroup":"resetGroup",{groupId:d});}},R.getText(i?"delete_group":"reset_group"),[f,A.CANCEL]);v.oAnchorNavigationBar.updateVisibility();});},_modelLoaded:function(){this.bModelInitialized=true;sap.ushell.Layout.getInitPromise().then(function(){this._initializeUIActions();}.bind(this));},_initializeUIActions:function(){this.oDashboardUIActionsModule=new D();this.oDashboardUIActionsModule.initializeUIActions(this);},_forceBrowserRerenderElement:function(e){var d=window.requestAnimationFrame||window.webkitRequestAnimationFrame;if(d){d(function(){var f=e.style.display;e.style.display="none";e.style.display=f;});}else{c.info("unsupported browser for animation frame");}},_webkitMobileRenderFix:function(){if(a.browser.chrome||a.os.android){this._forceBrowserRerenderElement(document.body);}},_resizeHandler:function(){u.recalculateBottomSpace();u.handleTilesVisibility();if(E.last("AppRendered")!==undefined){E.emit("AppRendered",undefined);}if(L&&q("#dashboardGroups").is(":visible")){L.reRenderGroupsLayout(null);this._initializeUIActions();}},_appOpenedHandler:function(s,e,d){var p,P,m=this.getView().getModel();p=this.getOwnerComponent();P=p.getMetadata().getComponentName();if(d.additionalInformation.indexOf(P)===-1){u.setTilesNoVisibility();}if(m.getProperty("/tileActionModeActive")&&sap.ushell.components.homepage.ActionMode){sap.ushell.components.homepage.ActionMode.toggleActionMode(m,"Menu Item");}if(this.oDashboardUIActionsModule){this.oDashboardUIActionsModule.disableAllDashboardUiAction();}},_scrollToGroupByName:function(s,e,d){var g=this.getView().getModel().getProperty("/groups"),G=d.groupName,l=sap.ushell.Container.getService("LaunchPage");g.forEach(g,function(o){if(l.getGroupTitle(o.object)===G){this._scrollToGroup(s,e,{groupId:o.groupId});}}.bind(this));},_scrollToGroup:function(s,e,d){var g=d.group?d.group.getGroupId():d.groupId;var G;if(this.oView.oDashboardGroupsBox.getGroups()){G=this.oView.oDashboardGroupsBox.getGroups().reduce(function(f,h){return h&&h.getGroupId()===g?h:f;},null);}var o=G&&G.getDomRef();if(!o){return;}var t=o.querySelector(".sapUshellTileContainerEditMode")||o.querySelector(".sapUshellTilesContainer-sortable");if(!t){return;}t.scrollIntoView();setTimeout(function(){var j=G.$();if(d.restoreLastFocusedTile){var l=false;if(d.restoreLastFocusedTileContainerById){j=q("#"+d.restoreLastFocusedTileContainerById);l=true;}C.goToLastVisitedTile(j,l);}else if(d.groupChanged){var f=j.find(".sapUshellTile, .sapMGTLineMode, .sapFCard").filter(":visible").eq(0);if(f.length){C.setTileFocus(f);}}if(d.isInEditTitle){G.setEditMode(true);}u.handleTilesVisibility();},0);},_handleDrop:function(e,d){var l=L.getLayoutEngine(),t=l.layoutEndCallback(),i=!t.dstArea,o=sap.ui.getCore().getEventBus(),n,f,T,g=q.Deferred(),v=this.getView(),m=v.getModel(),h=m.getProperty("/homePageGroupDisplay")&&m.getProperty("/homePageGroupDisplay")==="tabs",j=m.getProperty("/tileActionModeActive"),I=true,k=!!(m.getProperty("/personalization")&&(a.browser.msie||a.browser.edge)&&a.browser.version>=11&&(a.system.combi||a.system.tablet)),p=t.tile.getBindingContext().getObject().isLinkPersonalizationSupported;L.getLayoutEngine()._toggleAnchorItemHighlighting(false);if(t.dstGroup){var s=t.dstGroup.getBindingContext(),w=s.getProperty(s.sPath).isGroupLocked;I=i&&w;}if(!t.tileMovedFlag||(k&&l.isTabBarCollision())||I||(!p&&t.dstArea==="links")){o.publish("launchpad","sortableStop");return null;}if(!j&&!h&&t.dstArea==="links"&&!t.dstGroupData.getLinks().length){o.publish("launchpad","sortableStop");return null;}n=true;f=true;if((t.srcGroup!==t.dstGroup)){n=f=false;}else if(t.tile!==t.dstGroup.getTiles()[t.dstTileIndex]){f=false;}T=this._getTileUuid(t.tile);if(t.srcGroup&&t.srcGroup.removeAggregation&&t.srcArea){t.srcGroup.removeAggregation("tiles",t.tile,n);}var S=t.dstGroupData&&t.dstGroupData.insertAggregation&&t.dstArea===t.srcArea;if(S){t.tile.sParentAggregationName=t.dstArea;t.dstGroupData.insertAggregation(t.dstArea,t.tile,t.dstTileIndex,f);g=this._handleSameTypeDrop(t,T,S);}else if(i){g=this._handleShortDrop(t,T,S);}else{g=this._handleConvertDrop(t,S,d);}if(this.getView().getModel()){this.getView().getModel().setProperty("/draggedTileLinkPersonalizationSupported",true);}o.publish("launchpad","sortableStop");return g.promise();},_handleSameTypeDrop:function(t,T,s){var e=sap.ui.getCore().getEventBus(),d=q.Deferred();t.tile._getBindingContext().oModel.setProperty(t.tile._getBindingContext().sPath+"/draggedInTabBarToSourceGroup",false);e.publish("launchpad","movetile",{sTileId:T,sToItems:t.dstArea?t.dstArea:"tiles",sFromItems:t.srcArea?t.srcArea:"tiles",sTileType:t.dstArea?t.dstArea.substr(0,t.dstArea.length-1):undefined,toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,longDrop:s,callBack:function(){d.resolve();}});return d.promise();},_handleShortDrop:function(t,T,s){var e=sap.ui.getCore().getEventBus(),d=q.Deferred();e.publish("launchpad","movetile",{sTileId:T,sToItems:t.srcArea||"tiles",sFromItems:t.srcArea||"tiles",sTileType:t.srcArea?t.srcArea.substr(0,t.srcArea.length-1):undefined,toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,longDrop:s,callBack:function(){d.resolve();}});return d.promise();},_handleConvertDrop:function(t,s,d){var e=sap.ui.getCore().getEventBus(),o=q.Deferred();e.publish("launchpad","convertTile",{toGroupId:t.dstGroupData.getGroupId?t.dstGroupData.getGroupId():t.dstGroupData.groupId,toIndex:t.dstTileIndex,tile:sap.ui.getCore().byId(d.id),srcGroupId:t.srcGroup.getGroupId?t.srcGroup.getGroupId():t.srcGroup.groupId,longDrop:s,callBack:function(){o.resolve();}});return o.promise();},_getTileUuid:function(t){var T=t.getMode?t.getMode():"ContentMode",s;if(T==="LineMode"){s=t.getUuid?t.getUuid():t.getBindingContext().getObject().uuid;}else{s=t.getUuid?t.getUuid():t.getBindingContext().getObject().getParent().getUuid();}return s;},_handleDrag:function(e,d){var t=L.getLayoutEngine().layoutEndCallback(),T=t.tile.getBindingContext().getObject(),m=this.getView().getModel();if(m){m.setProperty("/draggedTileLinkPersonalizationSupported",T.isLinkPersonalizationSupported);}},_handleTabBarItemPressEventHandler:function(s,e,d){var v=this.getView(),m=v.getModel(),g=m.getProperty("/groups"),G=d.iGroupIndex;for(var i=0;i<g.length;i++){m.setProperty("/groups/"+i+"/isGroupSelected",false);}m.setProperty("/groups/"+G+"/isGroupSelected",true);this._handleTabBarItemPress(s,e,G);},_handleTabBarItemPress:function(s,e,g,o){var v=this.getView(),d,f;if(o){d=o.getParameter("group").getIndex();}else{d=g;}sap.ui.getCore().getEventBus().publish("launchpad","tabSelected",{iSelectedGroup:d});f=this._getVisibleGroupIndex(d);v.oDashboardGroupsBox.removeLinksFromUnselectedGroups();v.oDashboardGroupsBox.getBinding("groups").filter([v.oFilterSelectedGroup]);v.oAnchorNavigationBar.setSelectedItemIndex(f);v.oAnchorNavigationBar.reArrangeNavigationBarElements();setTimeout(function(){u.handleTilesVisibility();},0);},_getVisibleGroupIndex:function(s){var g=this.getView().getModel().getProperty("/groups");var h=0;for(var i=0;i<s;i++){if(!g[i].isGroupVisible||!g[i].visibilityModes[0]){h++;}}return s-h;},_getModelGroupFromVisibleIndex:function(s){var g=this.getView().getModel().getProperty("/groups"),v=0;for(var i=0;i<g.length;i++){if(g[i].isGroupVisible&&g[i].visibilityModes[0]){v++;if(v>s){return i;}}}return 0;},_handleAnchorItemPress:function(e){var v=this.getView(),m=v.getModel(),g=m.getProperty("/groups");if(a.system.phone&&e.getParameter("manualPress")){e.oSource.openOverflowPopup();}for(var i=0;i<g.length;i++){if(m.getProperty("/groups/"+i+"/isGroupSelected")===true){m.setProperty("/groups/"+i+"/isGroupSelected",false);}}m.setProperty("/groups/"+e.getParameter("group").getIndex()+"/isGroupSelected",true);m.setProperty("/iSelectedGroup",e.getParameter("group").getIndex());if(m.getProperty("/homePageGroupDisplay")&&m.getProperty("/homePageGroupDisplay")==="tabs"&&!m.getProperty("/tileActionModeActive")){this._handleTabBarItemPress(undefined,undefined,undefined,e);}else{if(!m.getProperty("/tileActionModeActive")){v.oDashboardGroupsBox.getBinding("groups").filter([new F("isGroupVisible",b.EQ,true)]);}else{v.oDashboardGroupsBox.getBinding("groups").filter([]);}this._scrollToGroup("launchpad","scrollToGroup",{group:e.getParameter("group"),groupChanged:true,focus:(e.getParameter("action")==="sapenter")});}},_addGroupHandler:function(d){var i,p=d.getSource().getBindingContext().getPath(),e=p.split("/");i=window.parseInt(e[e.length-1],10);if(d.getSource().sParentAggregationName==="afterContent"){i=i+1;}sap.ui.getCore().getEventBus().publish("launchpad","createGroupAt",{title:"",location:i,isRendered:true});},_publishAsync:function(s,e,d){var B=sap.ui.getCore().getEventBus();window.setTimeout(q.proxy(B.publish,B,s,e,d),1);},_changeGroupVisibility:function(g){var B=g.getPath(),m=g.getModel(),G=m.getProperty(B+"/isGroupVisible"),v=this.getView();if(m.getProperty(B+"/isDefaultGroup")||m.getProperty(B+"/isGroupLocked")){return;}m.setProperty(B+"/isGroupVisible",!G);v.oAnchorNavigationBar.updateVisibility();},_handleGroupVisibilityChanges:function(s,e,o){var l=sap.ushell.Container.getService("LaunchPage"),m=this.getView().getModel(),h=sap.ushell.components.getHomepageManager(),d=h.getCurrentHiddenGroupIds(m),S=d.length===o.length,i=S,p;d.some(function(H,I){if(!i){return true;}i=o&&Array.prototype.indexOf.call(o,H)!==-1;return!i;});if(!i){p=l.hideGroups(d);p.done(function(){m.updateBindings("groups");});p.fail(function(){var f=sap.ushell.Container.getService("Message");f.error(r.i18n.getText("hideGroups_error"));});}},_updateShellHeader:function(){if(!this.oShellUIService){this._initializeShellUIService();}else{this.oShellUIService.setTitle();this.oShellUIService.setHierarchy();}},_initializeShellUIService:function(){return sap.ui.require(["sap/ushell/ui5service/ShellUIService"],function(S){this.oShellUIService=new S({scopeObject:this.getOwnerComponent(),scopeType:"component"});this.oShellUIService.setTitle();this.oShellUIService.setHierarchy();return this.oShellUIService;}.bind(this));},_deactivateActionModeInTabsState:function(){var v=this.getView(),m=v.getModel(),i;var g=m.getProperty("/groups");for(i=0;i<g.length;i++){m.setProperty("/groups/"+i+"/isGroupSelected",false);}var s=v.oAnchorNavigationBar.getSelectedItemIndex();var h=0;if(!this._isGroupVisible(s)){for(i=0;i<g.length;i++){if(!this._isGroupVisible(i)){h++;}else{s=i;break;}}}else{for(i=0;i<s;i++){if(!this._isGroupVisible(i)){h++;}}}var f=s-h;v.oAnchorNavigationBar.adjustItemSelection(f);v.oAnchorNavigationBar.setSelectedItemIndex(f);m.setProperty("/groups/"+s+"/isGroupSelected",true);v.oDashboardGroupsBox.removeLinksFromAllGroups();var G=m.getProperty("/homePageGroupDisplay");if(G&&G==="tabs"){v.oDashboardGroupsBox.getBinding("groups").filter([v.oFilterSelectedGroup]);}},_isGroupVisible:function(g){var G=this.getView().getModel().getProperty("/groups");return(G[g].isGroupVisible&&G[g].visibilityModes[0]);}});});},"sap/ushell/components/homepage/DashboardContent.view.js":function(){sap.ui.define(["sap/ui/thirdparty/jquery","sap/m/library","sap/m/Page","sap/ui/core/AccessibleLandmarkRole","sap/ui/core/mvc/View","sap/ui/Device","sap/ui/model/Filter","sap/ushell/components/homepage/ComponentKeysHandler","sap/ushell/components/homepage/DashboardGroupsBox","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ushell/resources","sap/ushell/ui/launchpad/AnchorItem","sap/ushell/ui/launchpad/AnchorNavigationBar","sap/ushell/utils","sap/ui/core/Component","sap/ui/model/FilterOperator"],function(q,m,P,A,V,D,F,C,a,b,E,c,r,d,e,u,f,g){"use strict";sap.ui.jsview("sap.ushell.components.homepage.DashboardContent",{createContent:function(o){this.oModel=this.getModel();var h=this.oModel.getProperty("/personalization"),H=sap.ushell.components.getHomepageManager?sap.ushell.components.getHomepageManager():undefined;this.isCombi=D.system.combi;this.isTouch=this.isCombi?false:(D.system.phone||D.system.tablet);this.parentComponent=f.getOwnerComponentFor(this);this.addStyleClass("sapUshellDashboardView");this.ieHtml5DnD=h&&H&&H.isIeHtml5DnD();this.oRenderer=sap.ushell.Container.getRenderer("fiori2");sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeInactive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","contentRefresh",this._onDashboardShown,this);this.oDoable=E.once("CoreResourcesComplementLoaded").do(function(){this.oAnchorNavigationBar.setOverflowEnabled(true);if(h){sap.ui.require(["sap/ushell/components/homepage/ActionMode"],function(j){j.init(this.oModel);}.bind(this));this._createFooter();this._createActionModeMenuButton();}}.bind(this));this.oRenderer.getRouter().getRoute("home").attachMatched(this._onDashboardShown,this);this.oAnchorNavigationBar=this._getAnchorNavigationBar(o);var i=new a();this.oDashboardGroupsBox=i.createGroupsBox(o,this.oModel);this.oFilterSelectedGroup=new F("isGroupSelected",g.EQ,true);this.oPage=new P("sapUshellDashboardPage",{customHeader:this.oAnchorNavigationBar,landmarkInfo:{headerRole:A.Navigation},floatingFooter:true,content:[this.oDashboardGroupsBox]});this.oPage.addEventDelegate({onAfterRendering:function(){var j=this.getDomRef(),s=j.getElementsByTagName("section");q(s[0]).off("scrollstop",o.handleDashboardScroll);q(s[0]).on("scrollstop",o.handleDashboardScroll);}.bind(this)});return this.oPage;},getAnchorItemTemplate:function(){var t=this,h=b.last("/core/extension/enableHelp");var o=new d({index:"{index}",title:"{title}",groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",writeHelpId:h,selected:false,isGroupRendered:"{isRendered}",visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(i,j,v){if(!v[i?1:0]){return false;}return j||i;}},locked:"{isGroupLocked}",isGroupDisabled:{parts:["isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(i,I,s){return i&&I&&s==="tabs";}},press:function(i){t.oAnchorNavigationBar.handleAnchorItemPress(i);}});o.attachBrowserEvent("focus",function(){this.setNavigationBarItemsVisibility();}.bind(this.oAnchorNavigationBar));return o;},_getAnchorNavigationBar:function(o){var h=new e("anchorNavigationBar",{selectedItemIndex:"{/topGroupInViewPortIndex}",itemPress:[function(i){this._handleAnchorItemPress(i);},o],overflowEnabled:false});h.addEventDelegate({onsapskipforward:function(i){i.preventDefault();c.setIsFocusHandledByAnotherHandler(true);C.goToTileContainer(i,this.bGroupWasPressed);this.bGroupWasPressed=false;},onsapskipback:function(i){i.preventDefault();c.setIsFocusHandledByAnotherHandler(true);c.sendFocusBackToShell(i);},onsapenter:function(i){i.srcControl.getDomRef().click();},onsapspace:function(i){i.srcControl.getDomRef().click();}});h.addStyleClass("sapContrastPlus");return h;},_actionModeButtonPress:function(){this.oDashboardGroupsBox.getBinding("groups").filter([]);var h=this.oDashboardGroupsBox.getGroups();sap.ushell.components.homepage.ActionMode.toggleActionMode(this.oModel,"Menu Item",h);this.oAnchorNavigationBar.updateVisibility();if(this.oModel.getProperty("/homePageGroupDisplay")==="tabs"){if(this.oModel.getProperty("/tileActionModeActive")){var G=this.oModel.getProperty("/groups"),s;for(var i=0;i<G.length;i++){if(G[i].isGroupSelected){s=i;break;}}this.getController()._scrollToGroup("launchpad","scrollToGroup",{group:{getGroupId:function(){return G[s].groupId;}},groupChanged:false,focus:true});}else{this.getController()._deactivateActionModeInTabsState();}}},_createActionModeMenuButton:function(){var o={id:"ActionModeBtn",text:r.i18n.getText("activateEditMode"),icon:"sap-icon://edit",press:this._actionModeButtonPress.bind(this)};this.oTileActionsButton=sap.ui.getCore().byId(o.id);if(this.oTileActionsButton){this.oTileActionsButton.setTooltip(o.text);this.oTileActionsButton.setText(o.text);this.oTileActionsButton.attachPress(o.press);}else{var h={controlType:"sap.ushell.ui.launchpad.ActionItem",oControlProperties:o,bIsVisible:true,aStates:["home"]};this.oRenderer.addUserAction(h).done(function(i){this.oTileActionsButton=i;if(b.last("/core/extension/enableHelp")){this.oTileActionsButton.addStyleClass("help-id-ActionModeBtn");}}.bind(this));}},_handleEditModeChange:function(){if(this.oTileActionsButton){this.oTileActionsButton.toggleStyleClass("sapUshellAcionItemActive");}},_createFooter:function(){sap.ui.require(["sap/m/Bar","sap/m/Button","sap/m/ToolbarSpacer","sap/ui/core/InvisibleText"],function(B,h,T,I){var o=new B("sapUshellDashboardFooter",{visible:"{/tileActionModeActive}",contentRight:[new T()]});if(!this.oDoneBtnLabel){this.oDoneBtnLabel=new I({text:r.i18n.getText("exitEditMode")});this.oDoneBtnLabel.toStatic();}var i=new h("sapUshellDashboardFooterDoneBtn",{type:m.ButtonType.Emphasized,text:r.i18n.getText("closeEditMode"),ariaLabelledBy:this.oDoneBtnLabel.getId(),press:this._actionModeButtonPress.bind(this)});i.addEventDelegate({onsapskipforward:function(j){j.preventDefault();c.setIsFocusHandledByAnotherHandler(true);c.sendFocusBackToShell(j);},onsapskipback:function(j){j.preventDefault();c.setIsFocusHandledByAnotherHandler(true);C.goToFirstVisibleTileContainer();},onsaptabprevious:function(j){j.preventDefault();c.setIsFocusHandledByAnotherHandler(true);C.goToFirstVisibleTileContainer();},onsaptabnext:function(j){j.preventDefault();c.setIsFocusHandledByAnotherHandler(true);c.sendFocusBackToShell(j);}});o.addContentRight(i);this.oPage.setFooter(o);}.bind(this));},_onDashboardShown:function(){var i=this.oRenderer&&this.oRenderer.getCurrentCoreView()==="home";if(i){if(!D.system.phone){this.oRenderer.showRightFloatingContainer(false);}u.handleTilesVisibility();u.refreshTiles();C.goToTileContainer();}},getControllerName:function(){return"sap.ushell.components.homepage.DashboardContent";},exit:function(){V.prototype.exit.apply(this,arguments);if(this.oAnchorNavigationBar){this.oAnchorNavigationBar.handleExit();this.oAnchorNavigationBar.destroy();}if(this.oTileActionsButton){this.oTileActionsButton.destroy();}if(this.oDoable){this.oDoable.off();}if(this.oDoneBtnLabel){this.oDoneBtnLabel.destroy();}sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeInactive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._handleEditModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","contentRefresh",this._onDashboardShown,this);}});},false);},"sap/ushell/components/homepage/DashboardGroupsBox.js":function(){sap.ui.define(["sap/ushell/Layout","sap/ui/base/Object","sap/ui/model/Filter","sap/ui/model/FilterOperator","sap/ushell/ui/launchpad/Tile","sap/ushell/ui/launchpad/DashboardGroupsContainer","sap/ushell/Config","sap/ushell/EventHub","sap/ushell/utils","sap/ui/core/Component","sap/m/GenericTile","sap/ui/Device","sap/ushell/ui/launchpad/PlusTile","sap/ushell/resources","sap/ushell/renderers/fiori2/AccessKeysHandler","sap/ushell/components/homepage/ComponentKeysHandler","sap/ushell/ui/launchpad/TileContainer","sap/ushell/ui/launchpad/LinkTileWrapper","sap/m/Button","sap/ushell/ui/launchpad/AccessibilityCustomData","sap/ushell/ui/launchpad/GroupHeaderActions","sap/base/util/isEmptyObject","sap/ui/thirdparty/jquery","sap/ui/performance/Measurement"],function(L,b,F,a,c,D,C,E,u,d,G,e,P,r,A,f,T,g,B,h,j,k,q,M){"use strict";var l=b.extend("sap.ushell.components.homepage.DashboardGroupsBox",{metadata:{publicMethods:["createGroupsBox"]},constructor:function(){if(sap.ushell.components.homepage.getDashboardGroupsBox&&sap.ushell.components.homepage.getDashboardGroupsBox()){return sap.ushell.components.homepage.getDashboardGroupsBox();}sap.ushell.components.homepage.getDashboardGroupsBox=(function(v){return function(){return v;};}(this.getInterface()));this.oController=undefined;this.oGroupsContainer=undefined;this.isLinkPersonalizationSupported=sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported();sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeInactive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().subscribe("launchpad","GroupHeaderVisibility",this._updateGroupHeaderVisibility,this);},destroy:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeInactive",this._handleActionModeChange,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","GroupHeaderVisibility",this._updateGroupHeaderVisibility,this);sap.ushell.components.homepage.getDashboardGroupsBox=undefined;},calculateFilter:function(){var i=[];var o;var s=this.oModel.getProperty("/homePageGroupDisplay"),m=this.oModel.getProperty("/tileActionModeActive");if(!m){if(s&&s==="tabs"){o=new F("isGroupSelected",a.EQ,true);}else{o=new F("isGroupVisible",a.EQ,true);}i.push(o);}return i;},createGroupsBox:function(o,m){this.oController=o;var t=this,i,n,p=function(w){var x,y;if(w&&(x=w.getDomRef())){y=x.querySelector(".sapUshellPlusTile");if(y){return y;}}return null;},s=function(w){var x=p(w.currentGroup),y=p(w.endGroup),z=(w.tiles[w.tiles.length-2]===w.item)||(w.endGroup.getTiles().length===0);if(z){t._hidePlusTile(y);}else{t._showPlusTile(y);}if(w.currentGroup!==w.endGroup){t._showPlusTile(x);}};i=function(){L.getLayoutEngine().setExcludedControl(P);L.getLayoutEngine().setReorderTilesCallback.call(L.layoutEngine,s);};n=function(){if(!L.isInited){L.init({getGroups:this.getGroups.bind(this),getAllGroups:t.getAllGroupsFromModel.bind(t),isTabBarActive:t.isTabBarActive.bind(t)}).done(i);e.media.attachHandler(function(){if(!this.bIsDestroyed){L.reRenderGroupsLayout(null);}},this,e.media.RANGESETS.SAP_STANDARD);var w=this.getDomRef();o.getView().sDashboardGroupsWrapperId=!k(w)&&w.parentNode?w.parentNode.id:"";}L.reRenderGroupsLayout(null);if(this.getGroups().length){if(o.bModelInitialized){o._initializeUIActions();}u.recalculateBottomSpace();if(this.getModel().getProperty("/enableTilesOpacity")){u.handleTilesOpacity(this.getModel());}}E.emit("CenterViewPointContentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRendered");sap.ui.getCore().getEventBus().publish("launchpad","contentRefresh");this.getBinding("groups").filter(t.calculateFilter());};this.isTabBarActive=function(){return this.oModel.getProperty("/homePageGroupDisplay")==="tabs";};this.oModel=m;var v=this.calculateFilter(),U=C.last("/core/home/gridContainer");this.oGroupsContainer=new D("dashboardGroups",{accessibilityLabel:r.i18n.getText("DashboardGroups_label"),displayMode:"{/homePageGroupDisplay}",afterRendering:n});if(U){sap.ui.require(["sap/ushell/ui/launchpad/GridContainer"],function(){t.oGroupsContainer.bindAggregation("groups",{filters:v,path:"/groups",factory:function(){return t._createGridContainer(o,m);}});});}else{this.oGroupsContainer.bindAggregation("groups",{filters:v,path:"/groups",factory:function(){return t._createTileContainer(o,m);}});}this.oGroupsContainer.addEventDelegate({onsapskipback:function(w){w.preventDefault();A.setIsFocusHandledByAnotherHandler(true);if(q(".sapUshellAnchorItem").is(":visible")){f.goToSelectedAnchorNavigationItem();}else{A.sendFocusBackToShell(w);}},onsapskipforward:function(w){w.preventDefault();var x=window.document.getElementById("sapUshellDashboardFooterDoneBtn");if(x){x.focus();}else if(q("#sapUshellFloatingContainerWrapper").is(":visible")&&w.originalEvent.srcElement.id!==""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else{A.setIsFocusHandledByAnotherHandler(true);A.sendFocusBackToShell(w);}},onsaptabnext:function(w){if(t.oModel.getProperty("/tileActionModeActive")){if(q(document.activeElement).closest(".sapUshellTileContainerHeader").length){var x=q(document.activeElement).closest(".sapUshellTileContainer");var y=q(document.activeElement).hasClass("sapUshellContainerTitle");var z=x.find(".sapUshellHeaderActionButton");if(y&&!z.length||document.activeElement.id===z.last()[0].id){if(x.find(".sapUshellTile, .sapUshellLink, .sapFCard").is(":visible")){w.preventDefault();f.goToLastVisitedTile(x,true);return;}}if(z.length&&document.activeElement.id!==z.last()[0].id){return;}}var H=window.document.getElementById("sapUshellDashboardFooterDoneBtn");if(H){w.preventDefault();H.focus();return;}}w.preventDefault();if(q("#sapUshellFloatingContainerWrapper").is(":visible")&&(w.originalEvent.srcElement.id)!==""){sap.ui.getCore().getEventBus().publish("launchpad","shellFloatingContainerIsAccessible");}else{A.setIsFocusHandledByAnotherHandler(true);A.sendFocusBackToShell(w);}},onsaptabprevious:function(w){A.setIsFocusHandledByAnotherHandler(true);var x=q(":focus");if(t.oModel.getProperty("/tileActionModeActive")&&!x.hasClass("sapUshellTileContainerHeader")){var y=q(document.activeElement);if(y.hasClass("sapUshellTile")){w.preventDefault();var z=y.closest(".sapUshellTileContainer");var H=z.find(".sapUshellHeaderActionButton").filter(":visible").last();if(H.length>0){H.focus();}else{z.find(".sapUshellContainerTitle").focus();}}}}});return this.oGroupsContainer;},getAllGroupsFromModel:function(){return this.oModel.getProperty("/groups");},_createTileContainer:function(o){var t=this,i=new F("isTileIntentSupported",a.EQ,true),m=new T({headerText:"{title}",showEmptyLinksArea:{parts:["/tileActionModeActive","links/length","isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(n,p,s,I,v){if(p){return true;}else if(s){return false;}return n||I&&v==="tabs";}},showMobileActions:{parts:["/tileActionModeActive"],formatter:function(I){return I&&!this.getDefaultGroup();}},showIcon:{parts:["/isInDrag","/tileActionModeActive"],formatter:function(I,n){return(this.getIsGroupLocked()&&(I||n));}},deluminate:{parts:["/isInDrag"],formatter:function(I){return this.getIsGroupLocked()&&I;}},transformationError:{parts:["/isInDrag","/draggedTileLinkPersonalizationSupported"],formatter:function(I,n){return I&&!n;}},showBackground:"{/tileActionModeActive}",tooltip:"{title}",tileActionModeActive:"{/tileActionModeActive}",ieHtml5DnD:o.getView().ieHtml5DnD,enableHelp:"{/enableHelp}",groupId:"{groupId}",defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",isGroupLocked:"{isGroupLocked}",isGroupSelected:"{isGroupSelected}",showHeader:true,showGroupHeader:"{showGroupHeader}",homePageGroupDisplay:"{/homePageGroupDisplay}",editMode:"{editMode}",supportLinkPersonalization:this.isLinkPersonalizationSupported,titleChange:function(n){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:n.getSource().getGroupId(),newTitle:n.getParameter("newTitle")});},showEmptyLinksAreaPlaceHolder:{parts:["links/length","/isInDrag","/homePageGroupDisplay"],formatter:function(n,I,s){return I&&s==="tabs"&&!n;}},showPlaceholder:{parts:["/tileActionModeActive","tiles/length"],formatter:function(n){return n&&!this.getIsGroupLocked();}},visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(n,p,v){if(!v[n?1:0]){return false;}return p||n;}},hidden:{parts:["/tileActionModeActive","isGroupVisible"],formatter:function(I,n){return I&&!n;}},links:this._getLinkTemplate(),tiles:{path:"tiles",factory:this._itemFactory.bind(this),filters:[i]},add:function(n){t._handleAddTileToGroup(n);}});return m;},_createGridContainer:function(o){var i=sap.ui.require("sap/ushell/ui/launchpad/GridContainer"),m=new F("isTileIntentSupported",a.EQ,true);return new i({groupId:"{groupId}",showHeader:true,defaultGroup:"{isDefaultGroup}",isLastGroup:"{isLastGroup}",headerText:"{title}",showGroupHeader:"{showGroupHeader}",homePageGroupDisplay:"{/homePageGroupDisplay}",visible:{parts:["/tileActionModeActive","isGroupVisible","visibilityModes"],formatter:function(t,n,v){if(!v[t?1:0]){return false;}return n||t;}},isGroupLocked:"{isGroupLocked}",isGroupSelected:"{isGroupSelected}",editMode:"{editMode}",showBackground:"{/tileActionModeActive}",showIcon:{parts:["/isInDrag","/tileActionModeActive"],formatter:function(I,n){return(this.getIsGroupLocked()&&(I||n));}},tileActionModeActive:"{/tileActionModeActive}",supportLinkPersonalization:this.isLinkPersonalizationSupported,ieHtml5DnD:o.getView().ieHtml5DnD,enableHelp:"{/enableHelp}",showEmptyLinksAreaPlaceHolder:{parts:["links/length","/isInDrag","/homePageGroupDisplay"],formatter:function(n,I,s){return I&&s==="tabs"&&!n;}},showEmptyLinksArea:{parts:["/tileActionModeActive","links/length","isGroupLocked","/isInDrag","/homePageGroupDisplay"],formatter:function(t,n,p,I,s){if(n){return true;}else if(p){return false;}return t||I&&s==="tabs";}},titleChange:function(n){sap.ui.getCore().getEventBus().publish("launchpad","changeGroupTitle",{groupId:n.getSource().getGroupId(),newTitle:n.getParameter("newTitle")});},tooltip:"{title}",links:this._getLinkTemplate(),tiles:{path:"tiles",factory:this._itemFactory.bind(this),filters:[m]}});},_getLinkTemplate:function(){var o=new F("isTileIntentSupported",a.EQ,true);if(!this.isLinkPersonalizationSupported){return{path:"links",templateShareable:true,template:new g({uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",target:"{target}",isLocked:"{isLocked}",tileActionModeActive:"{/tileActionModeActive}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.oController.getView().ieHtml5DnD,tileViews:{path:"content",factory:function(i,m){return m.getObject();}},afterRendering:function(i){var m=q(this.getDomRef().getElementsByTagName("a"));m.attr("tabindex",-1);}}),filters:[o]};}return{path:"links",factory:function(i,m){var n=m.getObject().content[0];if(n&&n.bIsDestroyed){n=n.clone();m.getModel().setProperty(m.getPath()+"/content/0",n);}return n;},filters:[o]};},_itemFactory:function(i,o){var t=o.getProperty(o.sPath),m,n,p,s;if(t){if(t.isCard){m=t&&t.content;n=m&&m.length&&m[0];if(n&&n["sap.card"]){s=n;}else if(t.manifest){s={"sap.flp":t.manifest&&t.manifest["sap.flp"],"sap.card":{"type":"List"}};}else{return this._createErrorTile();}sap.ui.getCore().loadLibrary("sap.ui.integration");var v=sap.ui.requireSync("sap/ui/integration/widgets/Card");p=new v({manifest:s});}else{p=this._createTile();}t.controlId=p&&p.getId&&p.getId();}return p;},_createErrorTile:function(){return new c({tileViews:{path:"content",factory:function(){return new G({state:"Failed"});}}});},_createTile:function(){var t=new c({"long":"{long}",isDraggedInTabBarToSourceGroup:"{draggedInTabBarToSourceGroup}",uuid:"{uuid}",tileCatalogId:"{tileCatalogId}",isCustomTile:"{isCustomTile}",target:"{target}",isLocked:"{isLocked}",navigationMode:"{navigationMode}",tileActionModeActive:"{/tileActionModeActive}",showActionsIcon:"{showActionsIcon}",rgba:"{rgba}",animationRendered:false,debugInfo:"{debugInfo}",ieHtml5DnD:this.oController.getView().ieHtml5DnD,tileViews:{path:"content",factory:function(i,o){return o.getObject();}},coverDivPress:function(o){if(!o.oSource.getBindingContext().getObject().tileIsBeingMoved&&sap.ushell.components.homepage.ActionMode){sap.ushell.components.homepage.ActionMode._openActionsMenu(o);}},showActions:function(o){if(sap.ushell.components.homepage.ActionMode){sap.ushell.components.homepage.ActionMode._openActionsMenu(o);}},deletePress:[this.oController._dashboardDeleteTileHandler,this.oController],press:[this.oController.dashboardTilePress,this.oController]});var v=sap.ui.getCore().byId("viewPortContainer");t.addEventDelegate({onclick:function(){M.start("FLP:DashboardGroupsBox.onclick","Click on tile","FLP");M.start("FLP:OpenApplicationonClick","Open Application","FLP");function i(){M.end("FLP:DashboardGroupsBox.onclick");v.detachAfterNavigate(i);}v.attachAfterNavigate(i);}});return t;},_updateGroupHeaderVisibility:function(o,i,m){this._updateFirstGroupHeaderVisibility(m.group.getModel().getProperty("/tileActionModeActive"),this.oModel.getProperty("/homePageGroupDisplay")!=="tabs");},_updateFirstGroupHeaderVisibility:function(I,m){var n=this.oGroupsContainer.getGroups(),o=undefined,v=0;for(var i=0;i<n.length;i++){if(n[i].getProperty("visible")){v++;if(o===undefined){o=i;}else{n[i].setShowGroupHeader(I||m);}}}if(o!==undefined){var s=this.oModel.getProperty("/homePageGroupDisplay"),V=I||(v==1&&m),p=n.length>1||s==="tabs";n[o].setShowGroupHeader(V,p);}},_handleActionModeChange:function(){var i=this.oModel.getProperty("/tileActionModeActive");if(i){this._addTileContainersContent();}else{L.reRenderGroupsLayout(null);}},_addTileContainersContent:function(){var m=this.oGroupsContainer.getGroups();for(var i=0;i<m.length;i++){var o=m[i];if(!o.getBeforeContent().length){o.addBeforeContent(this._getBeforeContent());}if(!o.getAfterContent().length){o.addAfterContent(this._getAfterContent());}if(!o.getHeaderActions().length){o.addHeaderAction(this._getGroupHeaderAction());}}},_handleAddGroupButtonPress:function(o){this.oController._addGroupHandler(o);this._addTileContainersContent();},_getBeforeContent:function(){var o=new B({icon:"sap-icon://add",text:r.i18n.getText("add_group_at"),visible:"{= !${isGroupLocked} && !${isDefaultGroup} && ${/tileActionModeActive}}",enabled:"{= !${/editTitle}}",press:[this._handleAddGroupButtonPress.bind(this)]});o.addStyleClass("sapUshellAddGroupButton");o.addCustomData(new h({key:"tabindex",value:"-1",writeToDom:true}));return o;},_getAfterContent:function(){var o=new B({icon:"sap-icon://add",text:r.i18n.getText("add_group_at"),visible:"{= ${isLastGroup} && ${/tileActionModeActive}}",enabled:"{= !${/editTitle}}",press:[this._handleAddGroupButtonPress.bind(this)]}).addStyleClass("sapUshellAddGroupButton");o.addStyleClass("sapUshellAddGroupButton");o.addCustomData(new h({key:"tabindex",value:"-1",writeToDom:true}));return o;},_getGroupHeaderAction:function(){return new j({content:this._getHeaderActions(),tileActionModeActive:"{/tileActionModeActive}",isOverflow:"{/isPhoneWidth}"}).addStyleClass("sapUshellOverlayGroupActionPanel");},_getHeaderActions:function(){var H=[];if(C.last("/core/home/gridContainer")){var o=new B({text:r.i18n.getText("AddTileBtn"),visible:"{= !${isGroupLocked}}",enabled:"{= !${/editTitle}}",press:this._handleAddTileToGroup.bind(this)}).addStyleClass("sapUshellHeaderActionButton");if(e.system.phone){o.setIcon("sap-icon://add");}H.push(o);}H.push(new B({text:{path:"isGroupVisible",formatter:function(i){return r.i18n.getText(i?"HideGroupBtn":"ShowGroupBtn");}},icon:{path:"isGroupVisible",formatter:function(i){if(e.system.phone){return i?"sap-icon://hide":"sap-icon://show";}return"";}},visible:"{= ${/enableHideGroups} && !${isGroupLocked} && !${isDefaultGroup}}",enabled:"{= !${/editTitle}}",press:function(i){var s=i.getSource(),m=s.getBindingContext();this.oController._changeGroupVisibility(m);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton"));H.push(new B({text:{path:"removable",formatter:function(i){return r.i18n.getText(i?"DeleteGroupBtn":"ResetGroupBtn");}},icon:{path:"removable",formatter:function(i){if(e.system.phone){return i?"sap-icon://delete":"sap-icon://refresh";}return"";}},visible:"{= !${isDefaultGroup}}",enabled:"{= !${/editTitle}}",press:function(i){var s=i.getSource(),m=s.getBindingContext();this.oController._handleGroupDeletion(m);}.bind(this)}).addStyleClass("sapUshellHeaderActionButton"));return H;},_handleAddTileToGroup:function(o){if(document.toDetail){document.toDetail();}d.getOwnerComponentFor(this.oController.getView().parentComponent).getRouter().navTo("appfinder",{"innerHash*":"catalog/"+JSON.stringify({targetGroup:encodeURIComponent(o.getSource().getBindingContext().sPath)})});},_hidePlusTile:function(p){if(p){p.classList.add("sapUshellHidePlusTile");}},_showPlusTile:function(p){if(p){p.classList.remove("sapUshellHidePlusTile");}}});return l;});},"sap/ushell/components/homepage/DashboardUIActions.js":function(){sap.ui.define(["sap/ui/base/Object","sap/ushell/Layout","sap/ui/Device","sap/ui/thirdparty/jquery","sap/base/Log"],function(b,L,D,q,a){"use strict";var c=b.extend("sap.ushell.components.homepage.DashboardUIActions",{metadata:{publicMethods:["initializeUIActions"]},constructor:function(){this.aTabBarItemsLocation=[];if(sap.ushell.components.homepage.getDashboardUIActions&&sap.ushell.components.homepage.getDashboardUIActions()){return sap.ushell.components.homepage.getDashboardUIActions();}sap.ushell.components.homepage.getDashboardUIActions=(function(v){return function(){return v;};}(this.getInterface()));this.oTileUIActions=undefined;this.oLinkUIActions=undefined;this.oGroupUIActions=undefined;this.oController=undefined;this.UIActionsInitialized=false;sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeActive",this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().subscribe("launchpad","actionModeInactive",this._disableGroupUIActions,this);},destroy:function(){sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeActive",this._enableGroupUIActions,this);sap.ui.getCore().getEventBus().unsubscribe("launchpad","actionModeInactive",this._disableGroupUIActions,this);sap.ushell.components.homepage.getDashboardUIActions=undefined;this.oGroupUIActions=null;this.oTileUIActions=null;this.oLinkUIActions=null;},initializeUIActions:function(C){this.oController=C;if(C.getView().getModel().getProperty("/homePageGroupDisplay")==="tabs"){this._fillTabBarItemsArray();}var i=sap.ushell.Container?sap.ushell.Container.getService("LaunchPage").isLinkPersonalizationSupported():null;var p=q("#sapUshellDashboardPage").width();var d=C.getView().sDashboardGroupsWrapperId,A,r=sap.ui.getCore().getConfiguration().getRTL(),o={containerSelector:"#dashboardGroups",wrapperSelector:d?"#"+d:undefined,rootSelector:"#shell"},e=q.extend(true,{},o,{switchModeDelay:1000,isTouch:C.getView().isTouch,isCombi:C.getView().isCombi,debug:false}),l={draggableSelector:".sapUshellLinkTile",placeHolderClass:"sapUshellLinkTile-placeholder",cloneClass:"sapUshellLinkTile-clone",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleLinkDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),onBeforeCreateClone:this._onBeforeCreateLinkClone.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:C.getView().isTouch||C.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:"sapUshellLockedTile",onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?p:-p,defaultMouseMoveHandler:function(){}},t={draggableSelector:".sapUshellTile",draggableSelectorExclude:".sapUshellPlusTile",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",deltaTop:-44,scrollContainerSelector:undefined,startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),endDragAndScrollCallback:this._handleTileDragAndScrollContinuation.bind(this),moveTolerance:C.getView().isTouch||C.getView().isCombi?10:3,isLayoutEngine:true,disabledDraggableSelector:"sapUshellLockedTile",onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?p:-p,defaultMouseMoveHandler:function(){}},g={draggableSelector:".sapUshellDashboardGroupsContainerItem:not(.sapUshellDisableDragAndDrop)",draggableSelectorBlocker:".sapUshellTilesContainer-sortable, .sapUshellTileContainerBeforeContent, .sapUshellTileContainerAfterContent",draggableSelectorExclude:".sapUshellHeaderActionButton",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",cloneClass:"sapUshellDashboardGroupsContainerItem-clone",startCallback:this._handleGroupsUIStart.bind(this),endCallback:this._handleGroupDrop.bind(this),dragCallback:this._handleGroupStartDrag.bind(this),moveTolerance:C.getView().isTouch||C.getView().isCombi?10:0.1,isLayoutEngine:false,isVerticalDragOnly:true,draggableElement:".sapUshellTileContainerHeader"},w={type:"tiles",draggableSelector:".sapUshellTile",placeHolderClass:"sapUshellTile-placeholder",cloneClass:"sapUshellTile-clone",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleTileDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?p:-p},W={type:"links",draggableSelector:".sapUshellLinkTile",placeHolderClass:"sapUshellLinkTile-placeholder",startCallback:this._handleTileUIStart.bind(this),endCallback:this._handleLinkDrop.bind(this),dragCallback:this._handleStartDragTile.bind(this),dragAndScrollCallback:this._handleTileDragMove.bind(this),onBeforeCreateClone:this._onBeforeCreateLinkClone.bind(this),onDragStartUIHandler:this._markDisableGroups.bind(this),onDragEndUIHandler:this._endUIHandler.bind(this),offsetLeft:r?p:-p},f={type:"groups",draggableSelector:".sapUshellTileContainerHeader",placeHolderClass:"sapUshellDashboardGroupsContainerItem-placeholder",_publishAsync:C._publishAsync};if(C.getView().oDashboardGroupsBox.getGroups().length){if(C.getView().getModel().getProperty("/personalization")){if(!C.getView().ieHtml5DnD){sap.ui.require(["sap/ushell/UIActions"],function(U){this._disableTileUIActions();this._disableGroupUIActions();this._disableLinkUIActions();this.oTileUIActions=new U(q.extend(true,{},e,t)).enable();this.oGroupUIActions=new U(q.extend(true,{},e,g));if(i){this.oLinkUIActions=new U(q.extend(true,{},e,l)).enable();}A=C.getView().getModel().getProperty("/tileActionModeActive");if(A){this.oGroupUIActions.enable();}}.bind(this));}else{sap.ui.require(["sap/ushell/UIActionsWin8"],function(U){this._disableTileUIActions();this._disableGroupUIActions();this._disableLinkUIActions();this.oTileUIActions=U.getInstance(q.extend(true,{},o,w)).enable();this.oLinkUIActions=U.getInstance(q.extend(true,{},o,W)).enable();this.oGroupUIActions=U.getInstance(q.extend(true,{},o,f)).enable();}.bind(this));}}}},_enableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.enable();}},disableAllDashboardUiAction:function(){this._disableTileUIActions();this._disableLinkUIActions();this._disableGroupUIActions();},_disableTileUIActions:function(){if(this.oTileUIActions){this.oTileUIActions.disable();}},_disableLinkUIActions:function(){if(this.oLinkUIActions){this.oLinkUIActions.disable();}},_disableGroupUIActions:function(){if(this.oGroupUIActions){this.oGroupUIActions.disable();}},_handleTileDragMove:function(d){if(!d.isScrolling){L.getLayoutEngine().moveDraggable(d.moveX,d.moveY,this.aTabBarItemsLocation);}},_handleTileDragAndScrollContinuation:function(m){var A=q("#anchorNavigationBar").offset(),i=A.top;if(m<i){L.getLayoutEngine()._cancelLongDropTimmer();}return L.getLayoutEngine()._isTabBarCollision(m);},_fillTabBarItemsArray:function(){var i=q(".sapUshellAnchorItem"),l=i.length,d,B=10,t=0,T,e=[],I,o,f,n;for(d=0;d<l;d++){I=i[d];o=I.getBoundingClientRect();e[d]=o.width;}for(d=0;d<l;d++){f=e[d];if(f===0){continue;}n=Math.round(f/B);for(T=t;T<t+n;T++){this.aTabBarItemsLocation[T]=d;}t=T;}},_handleTileUIStart:function(e,u){if((D.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))){this.titleElement=u.querySelector("[title]");if(this.titleElement){this.titleElement.setAttribute("data-title",this.titleElement.getAttribute("title"));this.titleElement.removeAttribute("title");}}},_changeTileDragAndDropAnimate:function(e,u){var d=this.dragNDropData.jqDashboard.scrollTop(),j,t,f,g,h,T,i,C;for(i=0;i<this.dragNDropData.jqDraggableElements.length;i++){j=this.dragNDropData.jqDraggableElements.eq(i);t=j[0];f=j.position();g=j.offset();if((g.left===t.offset.left)&&(g.top===t.offset.top)){continue;}t.position=f;t.offset=g;C=j.data("clone");if(!C){continue;}h=t.position.left+this.dragNDropData.containerLeftMargin;T=this._getTileTopOffset(j,t.position,d);C.stop(true,false).animate({left:h,top:T},{duration:250},{easing:"swing"});}},_preventTextSelection:function(){if(window.getSelection){var s=window.getSelection();try{s.removeAllRanges();}catch(e){}}},_handleStartDragTile:function(e,t){this._preventTextSelection();L.getLayoutEngine().layoutStartCallback(t);q(t).find("a").removeAttr("href");this.oController._handleDrag.call(this.oController,e,t);sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},_onBeforeCreateLinkClone:function(e,d){L.getLayoutEngine().saveLinkBoundingRects(d);},_handleLinkDrop:function(e,t,A){var d=q.Deferred(),p;if(L.isTabBarActive()){L.tabBarTileDropped();}if((D.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))&&this.titleElement){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}if(D.desktop){q("body").removeClass("sapUshellDisableUserSelect");}if(L.getLayoutEngine().isLinkIntersected()||L.getLayoutEngine().isOriginalAreaChanged()){p=this.oController._handleDrop.call(this.oController,e,t);}if(p){p.then(function(){q("#dashboardGroups .sapUshellHidePlusTile").removeClass("sapUshellHidePlusTile");setTimeout(function(){d.resolve();},300);});}else{setTimeout(function(){d.resolve();},0);}return d.promise();},_handleTileDrop:function(e,t,A){if(L.getLayoutEngine().isOriginalAreaChanged()){return this._handleTileToLinkDrop(e,t,A);}return this._handleTileToTileDrop(e,t,A);},_handleTileToLinkDrop:function(e,t,A){return this._handleLinkDrop(e,t,A);},_handleTileToTileDrop:function(e,t,A){var j,h,T,d=function(e,t){q("#dashboardGroups .sapUshellHidePlusTile").removeClass("sapUshellHidePlusTile");if((D.browser.msie)&&((navigator.msMaxTouchPoints>0)||(navigator.maxTouchPoints>0))&&this.titleElement){this.titleElement.setAttribute("title",this.titleElement.getAttribute("data-title"));}this.oController._handleDrop.call(this.oController,e,t);if(D.desktop){q("body").removeClass("sapUshellDisableUserSelect");}};h=q(".sapUshellTabBarHoverOn");h.removeClass("sapUshellTabBarHoverOn");T=q(".sapUshellTileDragOpacity");T.removeClass("sapUshellTileDragOpacity");if(L.isTabBarActive()){L.tabBarTileDropped();}if(L.isTabBarActive()&&L.isOnTabBarElement()){if(A&&A.clone){var o=q.Deferred();j=q(A.clone);j.css("display","none");setTimeout(function(){o.resolve();d.call(this,e,t);}.bind(this),300);return o.promise();}d.apply(this,arguments);}d.apply(this,arguments);},_getTileTopOffset:function(t,p,d){var i=0,T=i+d;T+=t.closest(".sapUshellDashboardGroupsContainerItem").position().top;T+=p.top;return T;},_markDisableGroups:function(){if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty("/isInDrag",true);}},_endUIHandler:function(){if(this.oController.getView().getModel()){this.oController.getView().getModel().setProperty("/isInDrag",false);}},_handleGroupStartDrag:function(e,u){this.oTileUIActions.disable();if(this.oLinkUIActions){this.oLinkUIActions.disable();}var g=q(".sapUshellDashboardGroupsContainerItem-clone"),d=g.find(".sapUshellContainerTitle"),t=d.height(),f=d.width(),h,i,j,s,r=sap.ui.getCore().getConfiguration().getRTL();if(!D.system.phone){g.find(".sapUshellTileContainerEditMode").offset({top:this.oGroupUIActions.getMove().y-t,left:r?q("#sapUshellDashboardPage").width()+this.oGroupUIActions.getMove().x+f:this.oGroupUIActions.getMove().x-(f/2)});q(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerHidden");}else{q(".sapUshellTilesContainer-sortable").addClass("sapUshellTileContainerRemoveContent");q(".sapUshellLineModeContainer, .sapUshellLinksContainer").addClass("sapUshellTileContainerRemoveContent");q(".sapUshellTileContainerBeforeContent").addClass("sapUshellTileContainerRemoveContent");q(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");}q(".sapUshellTileContainerAfterContent").addClass("sapUshellTileContainerRemoveContent");q(u).find(".sapUshellContainerHeaderActions").addClass("sapUshellTileContainerHidden");this.oController.getView().getModel().setProperty("/isInDrag",true);q(u).attr("startPos",q(u).index());a.info("startPos - "+q(u).index());setTimeout(function(){sap.ui.getCore().getEventBus().publish("launchpad","sortableStart");},0);h=q("#dashboardGroups").offset().top;i=q(".sapUshellDashboardGroupsContainerItem-placeholder").offset().top;j=q(".sapUshellDashboardGroupsContainerItem-clone").offset().top;s=i-h-j;q(".sapUshellDashboardView section").animate({scrollTop:s},0);},_handleGroupsUIStart:function(e,u){q(u).find(".sapUshellTileContainerContent").css("outline-color","transparent");},_handleGroupDrop:function(e,u){var B=sap.ui.getCore().getEventBus(),Q=q(u),f=q(Q.children()[0]).attr("id"),g=sap.ui.getCore().byId(f),d=sap.ui.getCore().byId("dashboardGroups"),o={group:g,groupChanged:false,focus:false},n=Q.index();Q.startPos=window.parseInt(Q.attr("startPos"),10);d.removeAggregation("groups",g,true);d.insertAggregation("groups",g,n,true);this._handleGroupMoved(e,{item:Q});Q.removeAttr("startPos");sap.ui.getCore().getEventBus().publish("launchpad","sortableStop");setTimeout(function(){q(".sapUshellContainerHeaderActions").removeClass("sapUshellTileContainerHidden");q(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerHidden");q(".sapUshellTileContainerBeforeContent").removeClass("sapUshellTileContainerRemoveContent");q(".sapUshellTileContainerAfterContent").removeClass("sapUshellTileContainerRemoveContent");q(".sapUshellTilesContainer-sortable").removeClass("sapUshellTileContainerRemoveContent");q(".sapUshellLineModeContainer, .sapUshellLinksContainer").removeClass("sapUshellTileContainerRemoveContent");},0);window.setTimeout(q.proxy(B.publish,B,"launchpad","scrollToGroup",o),1);this.oTileUIActions.enable();if(this.oLinkUIActions){this.oLinkUIActions.enable();}},_handleGroupMoved:function(e,u){var f=u.item.startPos,t=u.item.index(),m=this.oController.getView().getModel();if(t!==-1){this.oController._publishAsync("launchpad","moveGroup",{fromIndex:f,toIndex:t});setTimeout(function(){m.setProperty("/isInDrag",false);},100);}},_setController:function(C){this.oController=C;}});return c;});},"sap/ushell/components/homepage/FLPAnalytics.js":function(){sap.ui.define(["sap/ushell/services/AppConfiguration","sap/base/Log","sap/ui/thirdparty/jquery"],function(A,L,q){"use strict";var o=["deleteTile","actionModeActive","catalogTileClick","dashboardTileClick","dashboardTileLinkClick"],E=sap.ui.getCore().getEventBus(),t=this,l={};function s(c){var m=sap.ushell.services.AppConfiguration.getMetadata();l[c]={};l[c].startTime=new Date();l[c].title=m.title;}function a(c){var d=0;try{d=(new Date()-l[c].startTime)/1000;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Time in Application (sec)",d,[l[c].title]);}catch(e){L.warning("Duration in application "+c+" could not be calculated",null,"sap.ushell.components.homepage.FLPAnalytics");}}function h(c,d,D){var f=hasher.getHash(),g;window.swa.custom1={ref:f};switch(d){case"appOpened":s(f);sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","Direct Launch",[l[f].title]);E.unsubscribe("sap.ushell","appOpened",h);break;case"bookmarkTileAdded":g=window.document.title;sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Save as Tile",[g,D&&D.group&&D.group.title?D.group.title:"",D&&D.group&&D.group.id?D.group.id:"",D&&D.tile&&D.tile.title?D.tile.title:g]);break;case"actionModeActive":sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Personalization","Enter Action Mode",[D.source]);break;case"catalogTileClick":sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Catalog",[]);break;case"dashboardTileClick":sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Homepage",[]);break;case"dashboardTileLinkClick":sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Launch point","Tile Group Link",[]);break;default:break;}}function b(c){var f,T,d;if(c.getParameter("from")&&c.getParameter("to")){f=c.getParameter("from").getId().replace("application-","").replace("applicationShellPage-","");window.swa.custom1={ref:f};a(f);d=c.getParameter("to");T=d.getId().replace("application-","").replace("applicationShellPage-","");s(T);window.swa.custom1={ref:T};sap.ushell.Container.getService("UsageAnalytics").logCustomEvent("FLP: Application Opened","Fiori Navigation",[l[T].title]);}}q(window).on("unload",function(c){var d=window.location.hash.substr(1);a(d);});try{sap.ui.getCore().byId("viewPortContainer").attachAfterNavigate(b,t);}catch(e){L.warning("Failure when subscribing to viewPortContainer 'AfterNavigate' event",null,"sap.ushell.components.homepage.FLPAnalytics");}E.subscribe("sap.ushell.services.Bookmark","bookmarkTileAdded",h,t);o.forEach(function(i){E.subscribe("launchpad",i,h,t);});E.subscribe("sap.ushell","appOpened",h,t);},false);}},"Component-preload");
