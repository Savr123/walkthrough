// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define([],function(){"use strict";var m={};var o=[];var b=[];var a=[];var f=[];var E=function(){};E.prototype.add=function(O,M,c){var C=O.getMetadata().getName();if(O.prototype[M]){throw Error("Cannot add function to module: Method '"+M+"' already exists.");}if(!f[C]){f[C]=[];}f[C].push({oOriginalModule:O,sMethodName:M,fnMethod:c});};E.prototype.override=function(O,M,c){var C=O.getMetadata().getName();if(!O.prototype[M]){throw Error("Cannot register override: Method '"+M+"' does not exist in original module.");}if(!o[C]){o[C]=[];}o[C].push({oOriginalModule:O,fnOriginalMethod:O.prototype[M],sMethodName:M,fnMethod:c});};E.prototype.addBeforeHook=function(O,M,c){var C=O.getMetadata().getName();if(!O.prototype[M]){throw Error("Cannot register beforeHook: Method '"+M+"' does not exist in original module.");}if(!b[C]){b[C]=[];}b[C].push({oOriginalModule:O,fnOriginalMethod:O.prototype[M],sMethodName:M,fnMethod:c});};E.prototype.addAfterHook=function(O,M,c){var C=O.getMetadata().getName();if(!O.prototype[M]){throw Error("Cannot register afterHook: Method '"+M+"' does not exist in original module.");}if(!a[C]){a[C]=[];}a[C].push({oOriginalModule:O,fnOriginalMethod:O.prototype[M],sMethodName:M,fnMethod:c});};E.prototype.registerExtension=function(n,M){m[n]=M;this._applyAdded(M);this._applyOverrides(M);this._applyBeforeHooks(M);this._applyAfterHooks(M);};E.prototype.deRegisterExtension=function(n){var M=m[n];if(!M){return;}this._removeAdded(M);this._restoreOverrides(M);this._removeBeforeHooks(M);this._removeAfterHooks(M);};E.prototype.reset=function(){m={};o=[];b=[];a=[];f=[];};E.prototype._applyAdded=function(M){var F=this._getRelevantFunctions(M,f);var s,i;for(i=0;i<F.length;i++){s=F[i];s.oOriginalModule.prototype[s.sMethodName]=s.fnMethod;}};E.prototype._applyOverrides=function(M){var O=this._getRelevantFunctions(M,o);var c,i;for(i=0;i<O.length;i++){c=O[i];c.oOriginalModule.prototype[c.sMethodName]=c.fnMethod;}};E.prototype._applyBeforeHooks=function(M){var h=this._getRelevantFunctions(M,b);var H,i;var c=function createBeforeHook(e){return function beforeHook(){e.fnMethod.apply(this,arguments);e.fnOriginalMethod.apply(this,arguments);};};for(i=0;i<h.length;i++){H=h[i];H.oOriginalModule.prototype[H.sMethodName]=c(H);}};E.prototype._applyAfterHooks=function(M){var h=this._getRelevantFunctions(M,a);var H,i;var c=function createAfterHook(e){return function afterHook(){e.fnOriginalMethod.apply(this,arguments);e.fnMethod.apply(this,arguments);};};for(i=0;i<h.length;i++){H=h[i];H.oOriginalModule.prototype[H.sMethodName]=c(H);}};E.prototype._removeAdded=function(M){var F=this._getRelevantFunctions(M,f);var A,i;for(i=0;i<F.length;i++){A=F[i];delete M.prototype[A.sMethodName];}};E.prototype._restoreOverrides=function(M){var F=this._getRelevantFunctions(M,o);var O,i;for(i=0;i<F.length;i++){O=F[i];M.prototype[O.sMethodName]=O.fnOriginalMethod;}};E.prototype._removeBeforeHooks=function(M){var h=this._getRelevantFunctions(M,b);var H,i;for(i=0;i<h.length;i++){H=h[i];M.prototype[H.sMethodName]=H.fnOriginalMethod;}};E.prototype._removeAfterHooks=function(M){var h=this._getRelevantFunctions(M,a);var H,i;for(i=0;i<h.length;i++){H=h[i];M.prototype[H.sMethodName]=H.fnOriginalMethod;}};E.prototype._getRelevantFunctions=function(M,F){var c=M.getMetadata().getName();return F[c]||[];};return new E();});
