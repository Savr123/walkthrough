// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/utils","sap/ui/util/Storage","sap/base/util/ObjectPath"],function(u,S,O){"use strict";var P=function(s,p,a){var b=O.get("config.storageType",a)||S.Type.local;if(b!==S.Type.local&&b!==S.Type.session){throw new u.Error("PagePersistence Adapter Local Platform: unsupported storage type: '"+b+"'");}this._oStorage=new S(b,"com.sap.ushell.adapters.local.PagePersistence");};P.prototype.getPages=function(){var t=this;return new Promise(function(r){var p=t._oStorage.get("pages")||[];r(p);});};P.prototype.getPage=function(i){var t=this;return new Promise(function(r,a){var p=t._oStorage.get("pages")||[];p.forEach(function(b){if(b.content.id===i){r(b);}});a({error:"No page with id '"+i+"' was found."});});};P.prototype.createPage=function(p){var t=this;return new Promise(function(r,a){if(!p.content){a("Wrong page format. Content is required ({ content: { //page data }).");}var b=t._oStorage.get("pages")||[];b.forEach(function(c){if(c.content.id===p.content.id){a({error:"A page with ID '"+p.content.id+"' does already exist"});}});b.push(p);t._oStorage.put("pages",b);r();});};P.prototype.updatePage=function(p){var t=this;return new Promise(function(r,a){if(!p.content){a("Wrong page format. Content is required ({ content: { //page data }).");}var b=t._oStorage.get("pages")||[];b=b.filter(function(c){return c.content.id!==p.content.id;});b.push(p);t._oStorage.put("pages",b);r();});};P.prototype.deletePage=function(i){var t=this;return new Promise(function(r){var p=t._oStorage.get("pages")||[];p=p.filter(function(a){return a.content.id!==i;});t._oStorage.put("pages",p);r();});};return P;},true);
