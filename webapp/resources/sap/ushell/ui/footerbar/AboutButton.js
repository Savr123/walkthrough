// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/m/Button","sap/m/Dialog","sap/m/ObjectHeader","sap/m/VBox","sap/ui/core/TitleLevel","sap/ui/layout/form/SimpleForm","sap/ushell/resources","sap/ushell/ui/launchpad/ActionItem","sap/ushell/services/AppConfiguration","sap/m/Label","sap/m/Text","sap/ushell/utils/type","sap/base/Log","sap/base/util/isEmptyObject","sap/ui/layout/library","./AboutButtonRenderer"],function(B,D,O,V,T,S,r,A,a,L,b,t,c,i,l){"use strict";var d=l.form.SimpleFormLayout;var e=A.extend("sap.ushell.ui.footerbar.AboutButton",{metadata:{library:"sap.ushell"}});e.prototype.init=function(){if(A.prototype.init){A.prototype.init.apply(this,arguments);}this.setIcon("sap-icon://hint");this.setText(r.i18n.getText("about"));this.setTooltip(r.i18n.getText("about"));this.attachPress(this.showAboutDialog);this._translationBundle=r.i18n;};e.prototype.showAboutDialog=function(){var m=a.getMetadata(),o=sap.ushell.Container.getService("AppLifeCycle").getCurrentApplication(),p=sap.ushell.Container.getLogonSystem().getProductVersion(),C=this._getClientRoleDescription(),s=new S({id:"aboutDialogFormID",editable:false,layout:d.ResponsiveGridLayout,content:[new L({text:this._translationBundle.getText("technicalName")}),new b({text:m.technicalName||""}),new L({text:this._translationBundle.getText("fioriVersionFld")}),new b({text:m.version||""}),new L({text:this._translationBundle.getText("sapui5Fld")}),new b({text:(sap.ui.version||"")+(" ("+(sap.ui.buildinfo.buildtime||"")+")")||""}),new L({text:this._translationBundle.getText("userAgentFld")}),new b({text:navigator.userAgent||""}),new L({text:this._translationBundle.getText("productVersionFld"),visible:!!p}),new b({text:p||"",visible:!!p}),new L({text:this._translationBundle.getText("clientRoleFld"),visible:!!C}),new b({text:C||"",visible:!!C})]}),h=new O({title:m.title,titleLevel:T.H3,icon:m.icon}).addStyleClass("sapUshellAboutDialogHeader"),f,v,g=new B({text:this._translationBundle.getText("okBtn"),press:function(){f.close();}});if(o){o.getTechnicalParameter("sap-fiori-id").then(function(F){if(t.isArray(F)&&F[0]){s.addContent(new L({text:this._translationBundle.getText("fioriAppId")}));s.addContent(new b({text:F[0]}));}}.bind(this),function(E){c.error("Cannot get technical parameter 'sap-fiori-id'",E,"sap.ushell.ui.footerbar.AboutButton");});o.getTechnicalParameter("sap-ach").then(function(j){if(t.isArray(j)&&j[0]){s.addContent(new L({text:this._translationBundle.getText("sapAch")}));s.addContent(new b({text:j[0]}));}}.bind(this),function(E){c.error("Cannot get technical parameter 'sap-ach'",E,"sap.ushell.ui.footerbar.AboutButton");});}if(i(m)||!m.icon){v=new V({items:[s]});}else{v=new V({items:[h,s]});}f=new D({id:"aboutContainerDialogID",title:this._translationBundle.getText("about"),contentWidth:"25rem",horizontalScrolling:false,leftButton:g,afterClose:function(){f.destroy();if(window.document.activeElement&&window.document.activeElement.tagName==="BODY"){window.document.getElementById("meAreaHeaderButton").focus();}}});f.addContent(v);f.open();};e.prototype._getClientRoleDescription=function(){var C=sap.ushell.Container.getLogonSystem().getClientRole();var o={"P":"clientRoleProduction","T":"clientRoleTest","C":"clientRoleCustomizing","D":"clientRoleDemonstration","E":"clientRoleTraining","S":"clientRoleSAPReference"};return this._translationBundle.getText(o[C]);};return e;});
