//Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/model/json/JSONModel","sap/ushell/resources"],function(U,J,r){"use strict";return U.extend("sap.ushell.applications.PageComposerLegacy.Component",{metadata:{"manifest":"json"},init:function(){U.prototype.init.apply(this,arguments);this.refreshModel();this.setModel(this._createInitialButtonStateModel(),"buttonStates");this.setModel(r.i18nModel,"i18n");},refreshModel:function(){return this._loadAvailablePages().then(function(p){this.setModel(new J(p));}.bind(this));},_loadAvailablePages:function(){return sap.ushell.Container.getServiceAsync("PagePersistence").then(function(P){return P.getPages();}).then(function(p){return{pages:p.map(function(P){return{Id:P.content.id,Name:P.content.title||"",Description:P.content.description||"",CreatedBy:P.content.createdBy||"",CreatedOn:P.content.createdOn||"",ChangedBy:P.content.changedBy||"",ChangedOn:P.content.changedOn||""};})};});},_createInitialButtonStateModel:function(){return new J({isDeleteEnabled:false,isCopyEnabled:false});}});});
