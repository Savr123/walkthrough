// Copyright (c) 2009-2017 SAP SE, All Rights Reserved
sap.ui.define(["sap/ushell/applications/PageComposer/controller/BaseController","sap/ui/model/json/JSONModel","sap/ushell/applications/PageComposer/model/formatter"],function(B,J,f){"use strict";return B.extend("sap.ushell.applications.PageComposer.controller.PageDetailEdit",{onInit:function(){var r=this.getRouter();r.getRoute("edit").attachPatternMatched(this._onPageMatched,this);},formatter:f,onSave:function(){this._savePage(this.getModel().getProperty("/page")).then(function(){this._navigateToPageOverview();}.bind(this));},onCancel:function(){this._navigateToPageOverview();},_navigateToPageOverview:function(){this.getRouter().navTo("overview");},_onPageMatched:function(e){var p=e.getParameter("arguments").pageId;this._loadPage(decodeURIComponent(p)).then(function(P){this.setModel(new J({page:P}));}.bind(this));},_loadPage:function(p){return sap.ushell.Container.getServiceAsync("PagePersistence").then(function(P){return P.getPage(p);});},_savePage:function(p){return sap.ushell.Container.getServiceAsync("PagePersistence").then(function(P){return P.updatePage(p);});},onShowCards:function(){},onShowPreview:function(){}});});
