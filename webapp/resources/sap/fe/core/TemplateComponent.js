/*
 * ! SAP UI development toolkit for HTML5 (SAPUI5)
        (c) Copyright 2009-2017 SAP SE. All rights reserved
    
 */
sap.ui.define(['sap/base/util/merge','sap/ui/core/UIComponent','sap/ui/core/ComponentContainer',"sap/fe/viewFactory","sap/ui/core/routing/HashChanger"],function(m,U,C,V,H){"use strict";function g(o){return o.getParent().getParent();}function c(p,M){var l=[],L="";if(M&&p){var b=p.split("/");b.pop();for(var i=0;i<b.length;i++){L=L+"/"+b[i];l.push({'context':M.getMetaModel().getMetaContext(L.replace(/ *\([^)]*\) */g,"")+"/$Type")});}}return l;}function a(p){var v;if(p){p="/"+p;}v=p.split("/").length-1;return v;}var T=U.extend("sap.fe.core.TemplateComponent",{metadata:{properties:{entitySet:{type:"string",defaultValue:null},navigation:{type:"object"}},library:"sap.fe"},getComponentContainer:function(){return this.oContainer;},onBeforeBinding:function(o,p){return this.oViewPromise;},onAfterBinding:function(o){return true;},onBeforeRendering:function(){if(!this.getRootControl()){var t=this,v={},o=t.getComponentContainer(),M=o.getModel(),A=g(o),s=A.getMetadata().getComponentName(),l=A.getLocalId(this.getId()),e=t.getEntitySet(),b=t.get_templateName();if(M){v.navigation=t.getNavigation();v.links=c(H.getInstance().getHash(),M);v.viewLevel=a(H.getInstance().getHash());if(t.getViewData){m(v,t.getViewData());}this.oViewPromise=V.create({viewId:s+"::"+l,viewName:b,appComponent:A,entitySet:e,viewData:v,model:A.getModel()});this.oViewPromise.then(function(d){t.setAggregation("rootControl",d);o.invalidate();});}}}});return T;},true);
