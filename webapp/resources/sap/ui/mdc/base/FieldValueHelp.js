/*
 * ! SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(['./FieldHelpBase','./FilterOperatorConfig','./Condition','sap/ui/base/ManagedObjectObserver','sap/base/util/ObjectPath','sap/base/util/deepEqual','sap/ui/model/resource/ResourceModel'],function(F,a,C,M,O,d,R){"use strict";var D;var B;var V;var b;var c;var e;var f=F.extend("sap.ui.mdc.base.FieldValueHelp",{metadata:{library:"sap.ui.mdc",properties:{filterFields:{type:"string",defaultValue:"$search"},keyPath:{type:"string",defaultValue:""},descriptionPath:{type:"string",defaultValue:""},showConditionPanel:{type:"boolean",defaultValue:false},title:{type:"string",group:"Appearance",defaultValue:""},noDialog:{type:"boolean",group:"Appearance",defaultValue:false}},aggregations:{content:{type:"sap.ui.mdc.base.FieldValueHelpContentWrapperBase",multiple:false},filterBar:{type:"sap.ui.mdc.base.filterbar.FilterBar",multiple:false},inParameters:{type:"sap.ui.mdc.base.InParameter",group:"Data",multiple:true},outParameters:{type:"sap.ui.mdc.base.OutParameter",group:"Data",multiple:true},_dialog:{type:"sap.m.Dialog",multiple:false,visibility:"hidden"}},defaultAggregation:"content",events:{dataRequested:{}}}});f.prototype.init=function(){F.prototype.init.apply(this,arguments);this._oObserver=new M(g.bind(this));this._oObserver.observe(this,{properties:["filterValue","conditions","showConditionPanel","title","filterFields"],aggregations:["content","filterBar","inParameters"]});};f.prototype.exit=function(){F.prototype.exit.apply(this,arguments);if(this._oManagedObjectModel){this._oManagedObjectModel.destroy();delete this._oManagedObjectModel;}this._oObserver.disconnect();this._oObserver=undefined;};f.prototype.invalidate=function(i){if(i){var j=this.getAggregation("_dialog");var k=this.getFilterBar();if((j&&i===j)||(k&&i===k)){if(i.bOutput&&!this._bIsBeingDestroyed){var d1=this.getParent();if(d1){d1.invalidate(this);}}return;}}F.prototype.invalidate.apply(this,arguments);};f.prototype.connect=function(i){F.prototype.connect.apply(this,arguments);var j=this._oField&&this._oField.getBindingContext();this.setBindingContext(j);Z.call(this,this.getShowConditionPanel());return this;};f.prototype.getIcon=function(){if(this.getNoDialog()){return"sap-icon://slim-arrow-down";}else{return"sap-icon://value-help";}};f.prototype._createPopover=function(){var i=F.prototype._createPopover.apply(this,arguments);if(i){var j=this._getField();if(j){i.setInitialFocus(this._getControlForSuggestion());}var k=this.getContent();if(k){k.initialize(true);}i._getAllContent=function(){var d1=this.getParent();var e1=[];if(d1){var f1=c1.call(d1);if(f1){e1.push(f1);}}return e1;};if(this._bNavigate){this._bNavigate=false;this.navigate(this._iStep);this._iStep=null;}}return i;};f.prototype._handleAfterOpen=function(i){F.prototype._handleAfterOpen.apply(this,arguments);var j=this.getContent();if(j){j.fieldHelpOpen(true);}};f.prototype.open=function(i){if(this.getNoDialog()&&!i){i=true;}this._bUseFilterBar=!i;var j=this.getContent();if(j&&j.getFilterEnabled()){if(!this._oFilterConditionModel){I.call(this);}else{v.call(this);}}if(this._bUpdateFilterAfterClose){this._bUpdateFilterAfterClose=false;p.call(this,this.getFilterValue());}var k=this.getAggregation("_popover");if(i){b1.call(this);if(!j){this._bOpenIfContent=true;this.fireOpen({suggestion:i});}else{if(k){k.setInitialFocus(this._getControlForSuggestion());}j.fieldHelpOpen(i);F.prototype.open.apply(this,[i]);}}else{a1.call(this);if(k){if(k.isOpen()){this.close();}k.$().remove();}var d1=T.call(this);if(d1){var e1=d1.getContent()[0];e1.setShowTokenizer(this.getMaxConditions()!==1&&!!j);e1.setFormatOptions(K.call(this));e1.bindProperty("conditions",{path:"$help>/conditions"});this.fireOpen({suggestion:i});if(j){j.fieldHelpOpen(false);o.call(this);}this._aOldConditions=this.getConditions();d1.open();}else{this._bOpen=true;}}return;};f.prototype.toggleOpen=function(i){if(this.getNoDialog()&&!i){i=true;}if(i){F.prototype.toggleOpen.apply(this,[i]);}else{var j=T.call(this);if(j){if(j.isOpen()){var k=j.oPopup.getOpenState();if(k!=="CLOSED"&&k!=="CLOSING"){this.close();}else{this._bReopen=true;}}else{this.open(i);}}else{this._bOpen=!this._bOpen;}}};f.prototype.close=function(){if(!this._bDialogOpen){F.prototype.close.apply(this,arguments);}else{this._bUseFilterBar=false;var i=this.getAggregation("_dialog");if(i){this._bClosing=true;i.close();var j=this.getContent();if(j){j.fieldHelpClose();if(!j.getAsyncKeyText()){_.call(this);}}}this._bReopen=false;}};f.prototype.isOpen=function(){var i=F.prototype.isOpen.apply(this,arguments);if(!i){var j=this.getAggregation("_dialog");if(j){i=j.isOpen();}}return i;};function _(){if(!this._oFilterConditionModel){return;}var i=this._oFilterConditionModel.getAllConditions();var j=false;for(var k in i){if(i[k].length>0){j=true;break;}}if(j){this._oFilterConditionModel.removeAllConditions();}}f.prototype._handleAfterClose=function(i){F.prototype._handleAfterClose.apply(this,arguments);var j=this.getContent();if(j){if(!j.getAsyncKeyText()){_.call(this);}j.fieldHelpClose();}};function g(i){if(i.object==this){if(i.name==="content"){S.call(this,i.mutation,i.child);}if(i.name==="filterBar"){$.call(this,i.mutation,i.child);}if(i.name==="conditions"){n.call(this,i.current);}if(i.name==="filterValue"){if(this._bClosing){this._bUpdateFilterAfterClose=true;}else{p.call(this,i.current);}}if(i.name==="showConditionPanel"){Z.call(this,i.current);}if(i.name==="title"){var j=this.getAggregation("_dialog");if(j){j.setTitle(i.current);}}if(i.name==="filterFields"){var j=this.getAggregation("_dialog");if(j){var k=j.getContent()[0];k.bindProperty("filterConditions",{path:"filter>/conditions/"+i.current});}}if(i.name==="inParameters"){q.call(this,i.child,i.mutation);}}else if(i.object.isA("sap.ui.mdc.base.InParameter")){if(i.name==="value"){t.call(this,i.object.getHelpPath(),i.current,i.old,i.object.getUseConditions());}if(i.name==="helpPath"){u.call(this,i.current,i.old,i.object.getValue(),i.object.getUseConditions());}}}f.prototype.openByTyping=function(){return true;};f.prototype.navigate=function(i){var j=this.getContent();var k;if(j){k=this._getPopover();}if(!k){this._bNavigate=true;this._iStep=i;if(!j){this.fireOpen({suggestion:true});}return;}else if(!k.isOpen()){this.fireOpen({suggestion:true});}if(j){j.navigate(i);}};function h(i){var j=this._getPopover();var k=i.getParameter("key");var d1=i.getParameter("description");var e1=i.getParameter("inParameters");var f1=i.getParameter("outParameters");var g1;if(!j.isOpen()){this.open(true);}g1=C.createItemCondition(k,d1);if(e1){g1.inParameters=w.call(this,e1);}if(f1){g1.outParameters=x.call(this,f1);}this.setProperty("conditions",[g1],true);this.fireNavigate({value:d1,key:k,condition:g1});}f.prototype.getTextForKey=function(k,i,j,d1){var e1="";var f1=this.getContent();if(f1){var g1=f1.getListBinding();if(!g1){this.fireDataRequested();}var h1=this.getBindingContext();var i1=false;if(!this.isOpen()&&d1&&h1!==d1&&((!i&&this.getInParameters().length>0)||(!i&&this.getOutParameters().length>0))){i1=true;this._bNoInOutFilterUpdate=true;this.setBindingContext(d1);}e1=f1.getTextForKey(k,z.call(this,i),A.call(this,j,true));if(i1){this.setBindingContext(h1);this._bNoInOutFilterUpdate=false;}}return e1;};f.prototype.getKeyForText=function(i,j){var k;var d1=this.getContent();if(d1){var e1=d1.getListBinding();if(!e1){this.fireDataRequested();}var f1=this.getBindingContext();var g1=false;if(!this.isOpen()&&j&&f1!==j&&this.getInParameters().length>0){g1=true;this._bNoInOutFilterUpdate=true;this.setBindingContext(j);}k=d1.getKeyForText(i,z.call(this));if(g1){this.setBindingContext(f1);this._bNoInOutFilterUpdate=false;}}return k;};function l(k){var d1=k.getParameter("selectedItems");var e1;var f1=this.getConditions();var g1;var i=0;var j=0;var h1=false;var i1=this.getMaxConditions();for(i=f1.length-1;i>=0;i--){g1=f1[i];g1.inParameters=z.call(this,g1.inParameters);g1.outParameters=A.call(this,g1.outParameters);if(g1.operator==="EEQ"){h1=false;for(j=0;j<d1.length;j++){e1=d1[j];if(g1.values[0]===e1.key&&(!g1.inParameters||!e1.inParameters||d(g1.inParameters,e1.inParameters))&&(!g1.outParameters||!e1.outParameters||d(g1.outParameters,e1.outParameters))){h1=true;break;}}if(!h1){f1.splice(i,1);}}}for(i=0;i<d1.length;i++){e1=d1[i];h1=false;for(j=0;j<f1.length;j++){g1=f1[j];if(g1.operator==="EEQ"&&g1.values[0]===e1.key&&(!g1.inParameters||d(g1.inParameters,e1.inParameters))&&(!g1.outParameters||d(g1.outParameters,e1.outParameters))){h1=true;g1.inParameters=e1.inParameters;g1.outParameters=e1.outParameters;break;}}if(!h1){g1=C.createItemCondition(e1.key,e1.description,e1.inParameters,e1.outParameters);f1.push(g1);}}if(i1>0&&f1.length>i1){f1.splice(0,f1.length-i1);}for(i=0;i<f1.length;i++){g1=f1[i];if(g1.inParameters){g1.inParameters=w.call(this,g1.inParameters);}else{delete g1.inParameters;}if(g1.outParameters){g1.outParameters=x.call(this,g1.outParameters);}else{delete g1.outParameters;}}if(this._bDialogOpen){this.setProperty("conditions",f1,true);}else{this.close();this.setProperty("conditions",f1,true);this.fireSelect({conditions:f1,add:true});}}function m(i){var j=i.getParameter("contentChange");var k=this.getContent();var d1=k.getAsyncKeyText();if(j){var e1=this.getAggregation("_popover");var f1=this.getAggregation("_dialog");if(k){if(this._oFilterConditionModel&&k.getListBinding()!==this._oFilterConditionModel._oListBinding){this.setModel(null,"filter");this._oFilterConditionModel.destroy();this._oFilterConditionModel=undefined;}if(k.getFilterEnabled()&&!this._oFilterConditionModel&&((e1&&this._bOpenIfContent)||f1)){I.call(this);}if(e1&&this._bOpenIfContent){var g1=this._getField();if(g1){k.fieldHelpOpen(true);e1.openBy(this._getControlForSuggestion());}this._bOpenIfContent=false;}else if(f1){var h1=f1.getContent()[0];Q.call(this,h1,k.getDialogContent());}}}if(!d1){this.fireDataUpdate();}}function n(i){o.call(this);}function o(){if(!this._oField){return;}var j=this.getContent();if(j){var k=this.getConditions();var d1=[];for(var i=0;i<k.length;i++){var e1=k[i];if(e1.operator==="EEQ"){d1.push({key:e1.values[0],description:e1.values[1],inParameters:z.call(this,e1.inParameters),outParameters:A.call(this,e1.outParameters)});}}if(!d(d1,j.getSelectedItems())){j.setSelectedItems(d1);}}}function p(i){if(!this._oFilterConditionModel){return;}var j=this.getFilterFields();if(!j){return;}if(i){this._bOwnFilterChange=true;}this._oFilterConditionModel.removeAllConditions(j);i=i.trim();if(i){this._bOwnFilterChange=false;var k=C.createCondition("StartsWith",[i]);this._oFilterConditionModel.addCondition(j,k);}}function q(i,j){var k=i.getHelpPath();var d1=false;if(j==="remove"){this._oObserver.unobserve(i);d1=s.call(this,k);}else{this._oObserver.observe(i,{properties:true});if(this._oField){var e1=i.getValue();var f1=i.getUseConditions();d1=s.call(this,k);d1=r.call(this,k,e1,f1)||d1;}}}function r(j,k,d1){var e1=false;if(this._oFilterConditionModel&&j&&k){var f1=this.getFilterBar();if(this._bUseFilterBar&&f1){var g1=f1.getConditions();if(!g1[j]){g1[j]=[];}}if(d1){if(Array.isArray(k)){for(var i=0;i<k.length;i++){this._oFilterConditionModel.addCondition(j,k[i]);if(this._bUseFilterBar&&f1){g1[j].push(k[i]);}e1=true;}}}else{var h1=C.createCondition("EQ",[k]);this._oFilterConditionModel.addCondition(j,h1);if(this._bUseFilterBar&&f1){g1[j].push(h1);}e1=true;}}if(e1&&this._bUseFilterBar&&f1){f1.setConditions(g1);}return e1;}function s(i){if(this._oFilterConditionModel&&i&&this._oFilterConditionModel.getConditions(i).length>0){this._oFilterConditionModel.removeAllConditions(i);var j=this.getFilterBar();if(this._bUseFilterBar&&j){var k=j.getConditions();if(k[i]&&k[i].length>0){k[i]=[];j.setConditions(k);}}return true;}return false;}function t(i,j,k,d1){if(this._bNoInOutFilterUpdate){return;}if(!this.sUpdateTimer){this.sUpdateTimer=setTimeout(function(){this.sUpdateTimer=undefined;this.fireDataUpdate();}.bind(this),0);}if(!this._oField){return;}var e1=false;e1=s.call(this,i);e1=r.call(this,i,j,d1)||e1;}function u(i,j,k,d1){if(!this._oField){return;}var e1=false;e1=s.call(this,j);e1=r.call(this,i,k,d1)||e1;}function v(){var j=this.getInParameters();var k=false;for(var i=0;i<j.length;i++){var d1=j[i];var e1=d1.getHelpPath();var f1=d1.getValue();var g1=d1.getUseConditions();k=s.call(this,e1)||k;k=r.call(this,e1,f1,g1)||k;}}f.prototype.onFieldChange=function(){var d1=this.getOutParameters();var e1=this.getConditions();for(var i=0;i<e1.length;i++){var f1=e1[i];if(f1.outParameters){for(var g1 in f1.outParameters){for(var j=0;j<d1.length;j++){var h1=d1[j];var i1=h1.getValue();var j1=h1.getUseConditions();var k1=true;if(h1.getMode()==="WhenEmpty"){if(j1){k1=!i1||(Array.isArray(i1)&&i1.length===0);}else{k1=!i1;}}if(k1){if(j1){var l1;if(!h1.getHelpPath()){l1=C.createCondition("EEQ",[h1.getFixedValue()]);}else if(h1.getFieldPath()===g1){l1=C.createCondition("EEQ",[f1.outParameters[g1]]);var m1=h1.getBinding("value");var n1=m1&&m1.getModel();if(n1&&n1.isA("sap.ui.mdc.base.ConditionModel")){var o1=n1.getFilterField(g1);var p1=o1&&o1.getFieldHelp();var q1=p1&&sap.ui.getCore().byId(p1);if(q1){var r1=q1.getInParameters();for(var k=0;k<r1.length;k++){var s1=r1[k];var t1=s1.getFieldPath();if(f1.outParameters[t1]){if(!l1.outParameters){l1.outParameters={};}l1.outParameters[t1]=f1.outParameters[t1];}}}}}else{continue;}if(!i1){i1=[];}if(!Array.isArray(i1)){throw new Error("Value on OutParameter must be an array "+h1);}if(C.indexOfCondition(l1,i1)<0){i1.push(l1);h1.setValue(i1);}}else{if(!h1.getHelpPath()){h1.setValue(h1.getFixedValue());}else if(h1.getFieldPath()===g1){h1.setValue(f1.outParameters[g1]);}}}}}}}};function w(i){return y.call(this,i,this.getInParameters());}function x(i){return y.call(this,i,this.getOutParameters());}function y(j,k){if(!j){return null;}var d1={};for(var i=0;i<k.length;i++){var e1=k[i];var f1=e1.getHelpPath();var g1=e1.getFieldPath();if(f1&&g1){for(var h1 in j){if(f1===h1){d1[g1]=j[h1];break;}}}else if(!f1&&g1&&e1.getFixedValue){d1[g1]=e1.getFixedValue();}}return d1;}function z(i){return E.call(this,i,this.getInParameters());}function A(i,j){return E.call(this,i,this.getOutParameters(),j);}function E(j,k,d1){var e1;var f1;var g1;var h1;var i=0;if(k.length>0){e1={};if(!j){if(!d1){for(i=0;i<k.length;i++){f1=k[i];g1=f1.getHelpPath();var i1=f1.getValue();if(g1&&i1){if(f1.getUseConditions()){e1[g1]=i1[0]&&i1[0].values[0];}else{e1[g1]=i1;}}}}}else{for(var j1 in j){for(i=0;i<k.length;i++){f1=k[i];g1=f1.getHelpPath();h1=f1.getFieldPath();if(h1&&h1===j1&&g1){e1[g1]=j[j1];}}}}}return e1;}function G(){if(!this._oFilterConditionModel){return;}this._oFilterConditionModel.applyFilters(this._oFilterConditionModel._oListBinding,true);}function H(i){if(this._bOwnFilterChange){return;}G.call(this);}function I(){if(!c&&!this._bFilterConditionModelRequested){c=sap.ui.require("sap/ui/mdc/base/ConditionModel");if(!c){sap.ui.require(["sap/ui/mdc/base/ConditionModel"],J.bind(this));this._bFilterConditionModelRequested=true;}}if(c){var i=this.getFilterValue();var j=this.getContent();var k=j&&j.getListBinding();if(k){this._oFilterConditionModel=c.getFor(k,this.getId());if(i){p.call(this,i);}v.call(this);var d1=this._oFilterConditionModel.bindProperty("/conditions",this._oFilterConditionModel.getContext("/conditions"));d1.attachChange(H.bind(this));this.setModel(this._oFilterConditionModel,"filter");}}}function J(i){c=i;this._bFilterConditionModelRequested=false;if(!this._bIsBeingDestroyed){I.call(this);}}f.prototype.getMaxConditions=function(){if(this._oField&&this._oField.getMaxConditionsForHelp){return this._oField.getMaxConditionsForHelp();}else if(this._oField&&this._oField.getMaxConditions){return this._oField.getMaxConditions();}else{return 1;}};f.prototype.getDisplay=function(){if(this._oField&&this._oField.getDisplay){return this._oField.getDisplay();}};f.prototype.getRequired=function(){if(this._oField&&this._oField.getRequired){return this._oField.getRequired();}else{return false;}};f.prototype.getDataType=function(){if(this._oField.getDataType){return this._oField.getDataType();}else{return"sap.ui.model.type.String";}};f.prototype._getDataType=function(){if(this._oField._getDataType){return this._oField._getDataType();}else{var i=O.get("sap.ui.model.odata.type.String");return new i();}};function K(){if(this._oField&&this._oField._getFormatOptions){return this._oField._getFormatOptions();}else{return{};}}f.prototype._getKeyPath=function(){var k=this.getKeyPath();if(!k&&this._oField&&this._oField.getFieldPath&&this._oField.getFieldPath()){k=this._oField.getFieldPath();}return k;};f.prototype.clone=function(i,j){var k=this.getContent();var d1=this.getFilterBar();if(k){k.detachEvent("navigate",h,this);k.detachEvent("selectionChange",l,this);k.detachEvent("dataUpdate",m,this);}if(d1){d1.detachEvent("filtersChanged",a1,this);}var e1=F.prototype.clone.apply(this,arguments);if(k){k.attachEvent("navigate",h,this);k.attachEvent("selectionChange",l,this);k.attachEvent("dataUpdate",m,this);}if(d1){d1.attachEvent("filtersChanged",a1,this);}return e1;};function L(){var i;if((!D||!B||!V||!b)&&!this._bDialogRequested){D=sap.ui.require("sap/m/Dialog");B=sap.ui.require("sap/m/Button");V=sap.ui.require("sap/ui/mdc/base/ValueHelpPanel");b=sap.ui.require("sap/ui/mdc/base/DefineConditionPanel");e=sap.ui.require("sap/ui/model/base/ManagedObjectModel");if(!D||!B||!V||!b||!c){sap.ui.require(["sap/m/Dialog","sap/m/Button","sap/ui/mdc/base/ValueHelpPanel","sap/ui/mdc/base/DefineConditionPanel","sap/ui/model/base/ManagedObjectModel"],N.bind(this));this._bDialogRequested=true;}}if(D&&B&&V&&b&&!this._bDialogRequested){if(!this._oResourceBundle){this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");}var j=new B(this.getId()+"-ok",{text:this._oResourceBundle.getText("valuehelp.OK"),press:U.bind(this)});var k=new B(this.getId()+"-cancel",{text:this._oResourceBundle.getText("valuehelp.CANCEL"),press:W.bind(this)});this._oManagedObjectModel=new e(this);var d1=P.call(this);i=new D(this.getId()+"-dialog",{contentHeight:"600px",contentWidth:"1000px",horizontalScrolling:false,verticalScrolling:false,title:this.getTitle(),resizable:true,draggable:true,content:[d1],afterOpen:X.bind(this),afterClose:Y.bind(this),buttons:[j,k]});this.setAggregation("_dialog",i,true);i.setModel(new R({bundleName:"sap/ui/mdc/messagebundle",async:false}),"$i18n");Z.call(this,this.getShowConditionPanel());}return i;}function N(i,j,k,d1,e1){D=i;B=j;V=k;b=d1;e=e1;this._bDialogRequested=false;if(!this._bIsBeingDestroyed){L.call(this);if(this._bOpen){this.open();delete this._bOpen;}}}function P(){var i=this.getContent();var j=this.getFilterBar();var k=new V(this.getId()+"-VHP",{height:"100%",showFilterbar:!!j,filterConditions:{path:"filter>/conditions/"+this.getFilterFields()},formatOptions:K.call(this)});k.setModel(this._oManagedObjectModel,"$help");if(i){i.initialize(false);Q.call(this,k,i.getDialogContent());}if(j){k.setFilterbar(j);}return k;}function Q(i,j){i.setTable(j);}function S(i,j){var k=this.getAggregation("_popover");var d1=this.getAggregation("_dialog");if(i==="remove"){j.detachEvent("navigate",h,this);j.detachEvent("selectionChange",l,this);j.detachEvent("dataUpdate",m,this);j=undefined;}else{j.attachEvent("navigate",h,this);j.attachEvent("selectionChange",l,this);j.attachEvent("dataUpdate",m,this);o.call(this);}this.fireDataUpdate();if(this._bNavigate){this._bNavigate=false;this.navigate(this._iStep);this._iStep=null;}else if(k){k.invalidate();var e1=this.getFilterValue();if(e1){p.call(this,e1);}v.call(this);if(j&&j.getFilterEnabled()&&!this._oFilterConditionModel){I.call(this);}if(j&&this._bOpenIfContent){j.initialize(true);var f1=this._getField();if(f1){j.fieldHelpOpen(true);k.openBy(this._getControlForSuggestion());}this._bOpenIfContent=false;}}else if(j&&this._bOpenIfContent){this._bOpenIfContent=false;this.open(true);}if(d1){if(j){j.initialize(false);if(j.getFilterEnabled()&&!this._oFilterConditionModel){I.call(this);}var g1=d1.getContent()[0];Q.call(this,g1,j.getDialogContent());if(d1.isOpen()){j.fieldHelpOpen(false);}}}}function T(){var i=this.getAggregation("_dialog");if(!i){i=L.call(this);}return i;}function U(i){this.close();var j=this.getAggregation("_dialog");var k=j.getContent()[0];k.unbindProperty("conditions",true);var d1=this.getConditions();d1=C._removeEmptyConditions(d1);this._bNoConditionModelUpdate=true;this.setProperty("conditions",d1,true);this.fireSelect({conditions:d1,add:false});}function W(i){this.close();var j=this.getAggregation("_dialog");var k=j.getContent()[0];k.unbindProperty("conditions",true);this.setProperty("conditions",this._aOldConditions,true);}function X(i){this._bDialogOpen=true;}function Y(i){this._bDialogOpen=false;this._aOldConditions=undefined;this._bUseFilterBar=false;var j=this.getContent();if(j){j.fieldHelpClose();}this._handleAfterClose(i);}function Z(i){var j=this.getAggregation("_dialog");if(j&&this._oField){var k=j.getContent()[0];if(i&&this._oField._getOnlyEEQ&&!this._oField._getOnlyEEQ()){if(!k._oDefineConditionPanel){var d1=new b(this.getId()+"-DCP");k.setDefineConditions(d1);}}else{k.setDefineConditions();}}}function $(i,j){if(i==="remove"){j.detachEvent("filtersChanged",a1,this);j=undefined;}else{j.attachEvent("filtersChanged",a1,this);}var k=this.getAggregation("_dialog");if(k){var d1=k.getContent()[0];d1.setFilterbar(j);d1.setShowFilterbar(!!j);v.call(this);}}function a1(){if(!this._oFilterConditionModel||!this._bUseFilterBar){return;}var j=this.getFilterBar();if(j){var k=this._oFilterConditionModel.getAllConditions();var d1=j.getConditions();var e1=this.getFilterFields();var i=0;var f1;for(f1 in k){if(f1!==e1){for(i=0;i<k[f1].length;i++){var g1=k[f1][i];if(!d1[f1]||C.indexOfCondition(g1,d1[f1])<0){this._oFilterConditionModel.removeCondition(f1,g1);}}}}for(f1 in d1){for(i=0;i<d1[f1].length;i++){if(!k[f1]||C.indexOfCondition(d1[f1][i],k[f1])<0){this._oFilterConditionModel.addCondition(f1,d1[f1][i]);}}}}}function b1(){if(!this._oFilterConditionModel){return;}var i=this.getFilterBar();if(!i){return;}var j=this._oFilterConditionModel.getAllConditions();var k=this.getFilterFields();var d1;for(d1 in j){if(d1!==k){this._oFilterConditionModel.removeAllConditions(d1);}}v.call(this);}function c1(){var i=this.getContent();if(i){return i.getSuggestionContent();}}f.prototype.getScrollDelegate=function(){var i=this.getAggregation("_dialog");if(i&&(i.isOpen()||i.oPopup.getOpenState()==="Opening")){var j=this.getContent();var k=j&&j.getDialogContent();if(k&&k.getScrollDelegate){return k.getScrollDelegate();}else{return undefined;}}else{return F.prototype.getScrollDelegate.apply(this,arguments);}};return f;},true);
