/*!
 * SAPUI5

		(c) Copyright 2009-2019 SAP SE. All rights reserved
	
 */
sap.ui.define(['sap/ui/thirdparty/jquery','sap/ui/Device','sap/ui/mdc/library','./FieldBaseRenderer','./FilterOperatorConfig','./Condition','./type/ConditionType','./type/ConditionsType','sap/ui/core/library','sap/ui/core/Control','sap/ui/core/message/MessageMixin','sap/base/util/ObjectPath','sap/base/util/deepEqual','sap/base/util/merge','sap/base/Log','sap/base/util/isEmptyObject','sap/ui/dom/containsOrEquals','sap/ui/model/Filter','sap/ui/model/base/ManagedObjectModel','sap/ui/base/ManagedObjectObserver',"sap/ui/base/SyncPromise",'sap/ui/events/KeyCodes'],function(q,D,l,F,a,C,b,c,d,e,M,O,f,m,L,g,h,j,k,n,S,K){"use strict";var E=l.EditMode;var o=l.FieldDisplay;var V=d.ValueState;var p=d.CalendarType;var r=e.extend("sap.ui.mdc.base.FieldBase",{metadata:{interfaces:["sap.ui.core.IFormContent"],library:"sap.ui.mdc",properties:{dataType:{type:"string",group:"Data",defaultValue:'sap.ui.model.type.String'},dataTypeConstraints:{type:"object",group:"Data",defaultValue:null},dataTypeFormatOptions:{type:"object",group:"Data",defaultValue:null},editMode:{type:"sap.ui.mdc.EditMode",group:"Data",defaultValue:E.Editable},required:{type:"boolean",group:"Data",defaultValue:false},display:{type:"sap.ui.mdc.FieldDisplay",defaultValue:o.Value},textAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:sap.ui.core.TextAlign.Initial},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:sap.ui.core.TextDirection.Inherit},placeholder:{type:"string",group:"Misc",defaultValue:""},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:sap.ui.core.ValueState.None},valueStateText:{type:"string",group:"Misc",defaultValue:null},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null},multipleLines:{type:"boolean",group:"Appearance",defaultValue:false},maxConditions:{type:"int",group:"Behavior",defaultValue:-1},conditions:{type:"object[]",group:"Data",defaultValue:[],byValue:true},label:{type:"string",group:"Misc",defaultValue:""},_fieldHelpEnabled:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"},_onlyEEQ:{type:"boolean",group:"Appearance",defaultValue:false,visibility:"hidden"}},aggregations:{content:{type:"sap.ui.core.Control",multiple:false},contentEdit:{type:"sap.ui.core.Control",multiple:false},contentDisplay:{type:"sap.ui.core.Control",multiple:false},_content:{type:"sap.ui.core.Control",multiple:true,visibility:"hidden"},fieldInfo:{type:"sap.ui.mdc.base.FieldInfoBase",multiple:false}},associations:{fieldHelp:{type:"sap.ui.mdc.base.FieldHelpBase",multiple:false},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{liveChange:{parameters:{value:{type:"string"},escPressed:{type:"boolean"},previousValue:{type:"string"}}},press:{}},publicMethods:[],defaultAggregation:"content"},_oManagedObjectModel:null});M.call(r.prototype);var s={"default":{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Token"],editMultiLine:"sap/m/TextArea",display:"sap/m/Text",createEdit:b1,createEditMulti:d1,createEditMultiLine:e1,createDisplay:f1},search:{edit:"sap/m/SearchField",display:"sap/m/Text",createEdit:c1,createDisplay:f1},date:{edit:"sap/m/DatePicker",editMulti:["sap/m/MultiInput","sap/m/Token"],display:"sap/m/Text",createEdit:g1,createEditMulti:d1,createDisplay:f1},time:{edit:"sap/m/TimePicker",editMulti:["sap/m/MultiInput","sap/m/Token"],display:"sap/m/Text",createEdit:g1,createEditMulti:d1,createDisplay:f1},dateTime:{edit:"sap/m/DateTimePicker",editMulti:["sap/m/MultiInput","sap/m/Token"],display:"sap/m/Text",createEdit:g1,createEditMulti:d1,createDisplay:f1},link:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Token"],editMultiLine:"sap/m/TextArea",display:"sap/m/Link",createEdit:b1,createEditMulti:d1,createEditMultiLine:e1,createDisplay:h1},bool:{edit:"sap/m/Input",display:"sap/m/Text",createEdit:i1,createDisplay:f1},unit:{edit:"sap/m/Input",editMulti:["sap/m/MultiInput","sap/m/Input","sap/m/Token"],display:"sap/m/Text",createEdit:j1,createEditMulti:k1,createDisplay:f1}};var t={};var u={bool:{name:"sap/ui/mdc/base/BoolFieldHelp",id:"BoolDefaultHelp",control:undefined}};r.prototype.init=function(){this._oManagedObjectModel=new k(this);this._oObserver=new n(this._observeChanges.bind(this));this._oObserver.observe(this,{properties:["display","editMode","dataType","dataTypeFormatOptions","dataTypeConstraints","multipleLines","maxConditions","conditions","_onlyEEQ"],aggregations:["fieldInfo","content","contentEdit","contentDisplay"],associations:["fieldHelp"]});this._oDatePickerRequested={};this.attachEvent("modelContextChange",this._handleModelContextChange,this);this._oResourceBundle=sap.ui.getCore().getLibraryResourceBundle("sap.ui.mdc");this._aAsyncChanges=[];};r.prototype.exit=function(){var i=this.getFieldInfo();if(i){i.detachEvent("dataUpdate",J1,this);}var R1=this.getContent();if(R1){Y.call(this,R1);}var S1=this.getContentEdit();if(S1){Y.call(this,S1);}var T1=this.getContentDisplay();if(T1){Y.call(this,T1);}this._oManagedObjectModel.destroy();delete this._oManagedObjectModel;this._oObserver.disconnect();this._oObserver=undefined;if(this._oFilterOperatorConfig){this._oFilterOperatorConfig.destroy();delete this._oFilterOperatorConfig;}if(this._oConditionType){this._oConditionType.destroy();this._oConditionType=undefined;}if(this._oConditionsType){this._oConditionsType.destroy();this._oConditionsType=undefined;}var U1=R.call(this);if(U1){U1.removeFilterField(this);}var V1=y1.call(this);if(V1){V1.detachEvent("dataUpdate",D1,this);if(this._bConnected){E1.call(this);V1.connect();}}if(this.iLiveChangeTimer){clearTimeout(this.iLiveChangeTimer);}};r.prototype.onBeforeRendering=function(){Z.call(this);};r.prototype.onAfterRendering=function(){if(y1.call(this)&&this.getEditMode()!=E.Display){var R1=this.getAggregation("_content",[]);for(var i=0;i<R1.length;i++){var S1=R1[i];var T1=S1.getFocusDomRef();q(T1).attr("autocomplete","off");}}};r.prototype.onfocusin=function(i){F1.call(this);};r.prototype.onsapup=function(i){var R1=y1.call(this);var S1=i.srcControl;if(R1&&(!this._bIsMeasure||S1.getShowValueHelp())){i.preventDefault();i.stopPropagation();R1.navigate(-1);}};r.prototype.onsapdown=function(i){var R1=y1.call(this);var S1=i.srcControl;if(R1&&(!this._bIsMeasure||S1.getShowValueHelp())){i.preventDefault();i.stopPropagation();R1.navigate(1);}};r.prototype.clone=function(i,R1){this.detachEvent("modelContextChange",this._handleModelContextChange,this);var S1=this.getContent();if(S1){Y.call(this,S1);}var T1=this.getContentEdit();if(T1){Y.call(this,T1);}var U1=this.getContentDisplay();if(U1){Y.call(this,U1);}var V1=this.getFieldInfo();if(V1){V1.detachEvent("dataUpdate",J1,this);}var W1=e.prototype.clone.apply(this,arguments);this.attachEvent("modelContextChange",this._handleModelContextChange,this);if(S1){X.call(this,S1);}if(T1){X.call(this,T1);}if(U1){X.call(this,U1);}if(V1){V1.attachEvent("dataUpdate",J1,this);}return W1;};r.prototype.getFieldPath=function(){var i=this.getBindingPath("conditions");if(i&&i.startsWith("/conditions/")){return i.slice(12);}else{return"";}};function _(i,R1,S1,T1){if(!T1){if(R1){T1=Promise.resolve(this._getResultForPromise(i));}else{T1=Promise.reject(S1);}}this._fireChange(i,R1,S1,T1);}r.prototype._fireChange=function(i,R1,S1,T1){};r.mapEdmTypes={"Edm.Boolean":"sap.ui.model.odata.type.Boolean","Edm.Byte":"sap.ui.model.odata.type.Byte","Edm.Date":"sap.ui.model.odata.type.Date","Edm.DateTime":"sap.ui.model.odata.type.DateTime","Edm.DateTimeOffset":"sap.ui.model.odata.type.DateTimeOffset","Edm.Decimal":"sap.ui.model.odata.type.Decimal","Edm.Double":"sap.ui.model.odata.type.Double","Edm.Float":"sap.ui.model.odata.type.Single","Edm.Guid":"sap.ui.model.odata.type.Guid","Edm.Int16":"sap.ui.model.odata.type.Int16","Edm.Int32":"sap.ui.model.odata.type.Int32","Edm.Int64":"sap.ui.model.odata.type.Int64","Edm.SByte":"sap.ui.model.odata.type.SByte","Edm.Single":"sap.ui.model.odata.type.Single","Edm.String":"sap.ui.model.odata.type.String","Edm.Time":"sap.ui.model.odata.type.Time","Edm.TimeOfDay":"sap.ui.model.odata.type.TimeOfDay"};function v(i){var R1=w.call(this,i);if(R1){return new R1(B.call(this,i,this.getDataTypeFormatOptions(),this.getDataTypeConstraints()),this.getDataTypeConstraints());}else{return null;}}function w(i){var R1;while(!R1){R1=O.get(i||"");if(!R1){i=r.mapEdmTypes[i];if(!i){break;}}}return R1;}function x(){if(!this._oDataType){this._oDataType=this.getDataType();if(typeof this._oDataType==="string"){this._oDataType=v.call(this,this._oDataType);}}return this._oDataType;}r.prototype._initDataType=function(){if(this._oDataType){this._oDataType.destroy();this._oDataType=undefined;}if(this._oDateOriginalType){this._oDateOriginalType.destroy();this._oDateOriginalType=undefined;}if(this._oUnitOriginalType){this._oUnitOriginalType.destroy();this._oUnitOriginalType=undefined;}delete this._sDisplayFormat;delete this._sValueFormat;delete this._sCalendarType;};r.prototype._getDataType=function(){return x.call(this);};function y(){if(this._oDataType&&typeof this._oDataType==="object"){return this._oDataType.getMetadata().getName();}else{return this.getDataType();}}function z(){if(this._oDataType&&typeof this._oDataType==="object"&&this._oDataType.oConstraints){return this._oDataType.oConstraints;}else{return this.getDataTypeConstraints();}}function A(){if(this._oDataType&&typeof this._oDataType==="object"&&this._oDataType.oFormatOptions){return this._oDataType.oFormatOptions;}else{return this.getDataTypeFormatOptions();}}function B(i,R1,S1){if(this.getMaxConditions()!==1||this.getEditMode()===E.Display){return R1;}switch(i){case"Edm.Date":case"sap.ui.model.type.Date":case"sap.ui.model.odata.type.Date":this._sValueFormat="yyyy-MM-dd";break;case"Edm.DateTime":case"sap.ui.model.odata.type.DateTime":if(S1&&(S1.displayFormat==="Date"||S1.isDateOnly)){this._sValueFormat="yyyy-MM-dd";}else{this._sValueFormat="yyyy-MM-dd'T'HH:mm:ss";}break;case"Edm.DateTimeOffset":case"sap.ui.model.type.DateTime":case"sap.ui.model.odata.type.DateTimeOffset":this._sValueFormat="yyyy-MM-dd'T'HH:mm:ss";break;case"Edm.TimeOfDay":case"sap.ui.model.type.Time":case"sap.ui.model.odata.type.TimeOfDay":this._sValueFormat="HH:mm:ss";break;default:return R1;}this._sDisplayFormat="medium";if(R1){R1=m({},R1);if(R1.style){this._sDisplayFormat=R1.style;delete R1.style;}else if(R1.pattern){this._sDisplayFormat=R1.pattern;}if(R1.calendarType){this._sCalendarType=R1.calendarType;}R1.pattern=this._sValueFormat;R1.calendarType=p.Gregorian;}else{R1={pattern:this._sValueFormat,calendarType:p.Gregorian};}return R1;}function G(){var i=x.call(this);var R1=i.getMetadata().getName();var S1=i.oFormatOptions;var T1=i.oConstraints;if(!S1||S1.style||!S1.pattern||S1.pattern!==this._sValueFormat||!S1.calendarType||S1.calendarType!==p.Gregorian){if(T1&&T1.isDateOnly){T1=m({},T1);delete T1.isDateOnly;T1.displayFormat="Date";}var U1=O.get(R1);this._oDateOriginalType=this._oDataType;this._oDataType=new U1(B.call(this,R1,S1,T1),T1);K1.call(this);}}function H(){var i=x.call(this);var R1=i.getMetadata().getName();var S1=i.oFormatOptions;var T1=g(i.oConstraints)?undefined:i.oConstraints;if(!S1||!S1.hasOwnProperty("showMeasure")||S1.showMeasure){S1=m({},S1);S1.showMeasure=false;if(S1.customCurrencies){delete S1.customCurrencies;}if(S1.customUnits){delete S1.customUnits;}var U1=O.get(R1);this._oUnitOriginalType=this._oDataType;this._oDataType=new U1(S1,T1);K1.call(this);}}function I(i,R1){var S1=y1.call(this);if(S1&&this._bConnected){z1.call(this,i,S1);}}r.prototype._getContent=function(){var i=this.getContent();if(!i){if(this.getEditMode()===E.Display){i=this.getContentDisplay();}else{i=this.getContentEdit();}}if(i){return[i];}else{return this.getAggregation("_content",[]);}};function J(i){if(i&&i===E.Editable){return true;}else{return false;}}function N(i){if(i&&i!==E.Disabled){return true;}else{return false;}}function P(i){if(i&&i!==E.Editable){return true;}else{return false;}}function Q(){var i=y.call(this);if(i==="Edm.Boolean"||i==="sap.ui.model.type.Boolean"||i==="sap.ui.model.odata.type.Boolean"||i==="sap.ui.mdc.base.type.Boolean"){return true;}else{return this.getProperty("_onlyEEQ");}}r.prototype._getOnlyEEQ=function(){return Q.call(this);};r.prototype._handleModelContextChange=function(i){if(!this._bFFAdded){var R1=R.call(this);if(R1){R1.addFilterField(this);this._bFFAdded=true;}}};function R(){var i=this.getBinding("conditions");if(i){var R1=i.getModel();if(R1.isA("sap.ui.mdc.base.ConditionModel")){return R1;}}return undefined;}r.prototype._getFilterOperatorConfig=function(){var i=R.call(this);if(i){return i.getFilterOperatorConfig();}else if(this._oFilterOperatorConfig){return this._oFilterOperatorConfig;}else{this._oFilterOperatorConfig=a.getFor();return this._oFilterOperatorConfig;}};function T(i){var R1=R.call(this);if(R1){R1.setUIMessage(this.getFieldPath(),i);}else{this.setValueState(V.Error);this.setValueStateText(i);}}function U(){var i=R.call(this);if(i){i.removeUIMessage(this.getFieldPath());}else{this.setValueState(V.None);this.setValueStateText();}}r.prototype._observeChanges=function(R1){if(R1.name==="editMode"){if(this.getAggregation("_content")){Z.call(this);}}if(R1.name==="multipleLines"){if(this.getAggregation("_content")){Z.call(this);}}if(R1.name==="dataType"){if(this._oDataType){var S1=w.call(this,R1.current);if(!(this._oDataType instanceof S1)){this._initDataType();this.destroyAggregation("_content");K1.call(this);}}}if(R1.name==="dataTypeFormatOptions"||R1.name==="dataTypeConstraints"){if(this._oDataType){this._oDataType.destroy();this._oDataType=undefined;delete this._sDisplayFormat;delete this._sValueFormat;delete this._sCalendarType;this.destroyAggregation("_content");K1.call(this);}}if(R1.name==="maxConditions"){if(this.getAggregation("_content")){Z.call(this);}K1.call(this);}if(R1.name==="conditions"){this._bParseError=false;I.call(this,R1.current,R1.old);var T1=false;var i=0;for(i=0;i<this._aAsyncChanges.length;i++){var U1=this._aAsyncChanges[i];if(U1.waitForUpdate&&f(U1.result,R1.current)){s1.call(this,U1);T1=true;break;}}if(T1){this._aAsyncChanges.splice(i,1);}}if(R1.name==="display"){this.destroyAggregation("_content");K1.call(this);}if(R1.name==="fieldHelp"&&R1.ids){x1.call(this,R1.ids,R1.mutation);K1.call(this);}if(R1.name==="fieldInfo"&&R1.child){I1.call(this,R1.child,R1.mutation);}if(R1.name==="content"&&R1.child){W.call(this,R1.child,R1.mutation);}if(R1.name==="contentEdit"&&R1.child){W.call(this,R1.child,R1.mutation);}if(R1.name==="contentDisplay"&&R1.child){W.call(this,R1.child,R1.mutation);}if(R1.name==="_onlyEEQ"){K1.call(this);}};r.prototype.getFocusDomRef=function(){var i=this._getContent();if(i.length>0){return i[0].getFocusDomRef();}else{return this.getDomRef();}};r.prototype.getIdForLabel=function(){var i;var R1=this._getContent();if(R1.length>0){i=R1[0].getIdForLabel();}else{i=this.getId();}return i;};r.prototype.getControlForSuggestion=function(){var i=this._getContent();if(i.length>0){if(this._bIsMeasure){return i[1];}else{return i[0];}}else{return this;}};r.prototype.getMaxConditionsForHelp=function(){if(this._bIsMeasure){return 1;}else{return this.getMaxConditions();}};r.prototype.enhanceAccessibilityState=function(i,R1){var S1=this.getParent();if(S1&&S1.enhanceAccessibilityState){S1.enhanceAccessibilityState(this,R1);}return R1;};r.prototype.connectLabel=function(i){a1.call(this,i);i.bindProperty("text",{path:"$field>/label"});i.setLabelFor(this);return this;};function W(i,R1){if(R1==="remove"){Y.call(this,i);m1.call(this,i);}else if(R1==="insert"){l1.call(this,i);a1.call(this,i);X.call(this,i);if(this.getAggregation("_content")){this.destroyAggregation("_content");}var S1;var T1;for(T1 in i.getMetadata().getAllProperties()){if(i.getBindingPath(T1)==="/conditions"){S1=i.getBindingInfo(T1);if(S1&&S1.type&&S1.type instanceof c){this._oConditionsType=S1.type;K1.call(this);}this._sBoundProperty=T1;}if(T1==="editable"&&!i.getBindingPath(T1)&&i.isPropertyInitial(T1)){i.bindProperty(T1,{path:"$field>/editMode",formatter:J});}if(T1==="enabled"&&!i.getBindingPath(T1)&&i.isPropertyInitial(T1)){i.bindProperty(T1,{path:"$field>/editMode",formatter:N});}if(T1==="displayOnly"&&!i.getBindingPath(T1)&&i.isPropertyInitial(T1)){i.bindProperty(T1,{path:"$field>/editMode",formatter:P});}if(T1==="required"&&!i.getBindingPath(T1)&&i.isPropertyInitial(T1)){i.bindProperty(T1,{path:"$field>/required"});}if(T1==="textAlign"&&!i.getBindingPath(T1)&&i.isPropertyInitial(T1)){i.bindProperty(T1,{path:"$field>/textAlign"});}if(T1==="textDirection"&&!i.getBindingPath(T1)&&i.isPropertyInitial(T1)){i.bindProperty(T1,{path:"$field>/textDirection"});}if(T1==="valueState"&&!i.getBindingPath(T1)&&i.isPropertyInitial(T1)){i.bindProperty(T1,{path:"$field>/valueState"});}if(T1==="valueStateText"&&!i.getBindingPath(T1)&&i.isPropertyInitial(T1)){i.bindProperty(T1,{path:"$field>/valueStateText"});}if(T1==="placeholder"&&!i.getBindingPath(T1)&&i.isPropertyInitial(T1)){i.bindProperty(T1,{path:"$field>/placeholder"});}if(T1==="tooltip"&&!i.getBindingPath(T1)&&i.isPropertyInitial(T1)){i.bindProperty(T1,{path:"$field>/tooltip"});}}for(var U1 in i.getMetadata().getAllAggregations()){if(i.getBindingPath(U1)==="/conditions"){S1=i.getBindingInfo(U1);if(S1&&S1.template){for(T1 in S1.template.getMetadata().getAllProperties()){var V1=S1.template.getBindingInfo(T1);if(V1&&V1.type&&V1.type instanceof b){this._oConditionType=V1.type;K1.call(this);break;}}}break;}}}}function X(i){if(i.getMetadata().getEvents().change){i.attachEvent("change",r1,this);}if(i.getMetadata().getEvents().liveChange){i.attachEvent("liveChange",u1,this);}if(i.getMetadata().getEvents().press){i.attachEvent("press",v1,this);}}function Y(i){if(i.getMetadata().getEvents().change){i.detachEvent("change",r1,this);}if(i.getMetadata().getEvents().liveChange){i.detachEvent("liveChange",u1,this);}if(i.getMetadata().getEvents().press){i.detachEvent("press",v1,this);}}function Z(){var R1=this.getEditMode();if(this.getContent()||this._bIsBeingDestroyed||(R1===E.Display&&this.getContentDisplay())||(R1!==E.Display&&this.getContentEdit())){this.destroyAggregation("_content");return;}var S1=y.call(this);var T1=z.call(this);var U1=A.call(this);var V1=this.getMaxConditions();var W1;var X1;var Y1;var Z1=this.getAggregation("_content",[]);var $1;var _1;if(Z1.length>0){$1=Z1[0];_1=$1.getMetadata().getName().replace(/\./g,"/");}switch(S1){case"Edm.Date":case"sap.ui.model.type.Date":case"sap.ui.model.odata.type.Date":W1=s.date;break;case"Edm.DateTime":case"sap.ui.model.odata.type.DateTime":if(T1&&(T1.displayFormat==="Date"||T1.isDateOnly)){W1=s.date;}else{W1=s.dateTime;}break;case"Edm.DateTimeOffset":case"sap.ui.model.type.DateTime":case"sap.ui.model.odata.type.DateTimeOffset":W1=s.dateTime;break;case"Edm.TimeOfDay":case"sap.ui.model.type.Time":case"sap.ui.model.odata.type.TimeOfDay":W1=s.time;break;case"Edm.Boolean":case"sap.ui.model.type.Boolean":case"sap.ui.model.odata.type.Boolean":case"sap.ui.mdc.base.type.Boolean":W1=s.bool;break;case"sap.ui.model.odata.type.Unit":case"sap.ui.model.odata.type.Currency":case"sap.ui.model.type.Unit":case"sap.ui.model.type.Currency":if(!U1||!U1.hasOwnProperty("showMeasure"||U1.showMeasure)){W1=s.unit;}else{W1=s.default;}break;default:if(this.getFieldInfo()&&this._bTriggerable){W1=s.link;}else{var a2=new RegExp("^\\*(.*)\\*|\\$search$");if(a2.test(this.getFieldPath())&&this.getMaxConditions()===1){W1=s.search;}else{W1=s.default;}}break;}if(R1===E.Display){X1=W1.display;Y1=W1.createDisplay;}else if(V1!==1){X1=W1.editMulti;Y1=W1.createEditMulti;}else if(this.getMultipleLines()){X1=W1.editMultiLine;Y1=W1.createEditMultiLine;}else{X1=W1.edit;Y1=W1.createEdit;}if(!X1){throw new Error("No control defined for type "+S1+" in "+this);}var b2;if(Array.isArray(X1)){b2=X1;X1=b2[0];}else{b2=[X1];}if(X1!==_1){this._bHideOperator=false;if($1){this.destroyAggregation("_content");if($1.isA("sap.m.DateTimeField")){this._initDataType();}K1.call(this);}var c2;for(var i=0;i<b2.length;i++){var d2=b2[i];if(!t[d2]){t[d2]={};}else if(!t[d2].control){t[d2].control=sap.ui.require(d2);if(!t[d2].control){c2=undefined;}}else if(i===0){c2=t[d2].control;}}if(!c2){if(t[X1].promise){t[X1].promise.then(Z.bind(this));return;}else{t[X1].promise=new Promise(function(h2){t[X1].resolve=h2;sap.ui.require(b2,$.bind(this));}.bind(this)).then(Z.bind(this));return;}}var e2=this.getId()+"-inner";var f2=Y1.call(this,c2,e2);for(var i=0;i<f2.length;i++){var g2=f2[i];g2.attachEvent("parseError",p1,this);g2.attachEvent("validationError",q1,this);l1.call(this,g2);a1.call(this,g2);if(this._bConnected&&((i===0&&!this._bIsMeasure)||(i===1&&this._bIsMeasure))){G1.call(this,g2);}this.addAggregation("_content",g2);}}}function $(){for(var i=0;i<arguments.length;i++){var R1=arguments[i];var S1=R1.getMetadata().getName();S1=S1.replace(/\./g,"/");t[S1].control=R1;if(t[S1].resolve){t[S1].resolve();delete t[S1].resolve;}}}function a1(i){i.setModel(this._oManagedObjectModel,"$field");}function b1(i,R1){var S1=M1.call(this);var T1=new i(R1,{value:{path:"$field>/conditions",type:S1},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:J},enabled:{path:"$field>/editMode",formatter:N},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",width:"100%",tooltip:"{$field>/tooltip}",change:r1.bind(this),liveChange:u1.bind(this),valueHelpRequest:A1.bind(this),showSuggestion:true});H1.call(this,T1);this._sBoundProperty="value";return[T1];}function c1(i,R1){this._bHideOperator=true;var S1=L1.call(this);var T1=new i(R1,{value:{path:"$field>/conditions/0",type:S1,mode:"OneWay"},placeholder:"{$field>/placeholder}",width:"100%",tooltip:"{$field>/tooltip}",search:r1.bind(this)});return[T1];}function d1(i,R1){var S1=sap.ui.require("sap/m/Token");var T1=L1.call(this);var U1=new S1(R1+"-token",{text:{path:'$field>',type:T1}});var V1=new i(R1,{placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:J},enabled:{path:"$field>/editMode",formatter:N},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",width:"100%",tooltip:"{$field>/tooltip}",tokens:{path:"$field>/conditions",template:U1},dependents:[U1],change:r1.bind(this),liveChange:u1.bind(this),tokenUpdate:w1.bind(this),valueHelpRequest:A1.bind(this)});H1.call(this,V1);return[V1];}function e1(i,R1){var S1=M1.call(this);var T1=new i(R1,{value:{path:"$field>/conditions",type:S1},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:J},enabled:{path:"$field>/editMode",formatter:N},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",change:r1.bind(this),liveChange:u1.bind(this)});this._sBoundProperty="value";return[T1];}function f1(i,R1){var S1=M1.call(this);var T1=new i(R1,{text:{path:"$field>/conditions",type:S1},textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",wrapping:"{$field>/multipleLines}",width:"100%",tooltip:"{$field>/tooltip}"});this._sBoundProperty="text";return[T1];}function g1(i,R1){this._bHideOperator=true;var S1=M1.call(this);G.call(this);var T1=new i(R1,{value:{path:"$field>/conditions",type:S1},displayFormat:this._sDisplayFormat,valueFormat:this._sValueFormat,placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:J},enabled:{path:"$field>/editMode",formatter:N},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",width:"100%",tooltip:"{$field>/tooltip}",change:r1.bind(this)});if(T1.setDisplayFormatType){T1.setDisplayFormatType(this._sCalendarType);}this._sBoundProperty="value";return[T1];}function h1(i,R1){var S1=M1.call(this);var T1=new i(R1,{text:{path:"$field>/conditions",type:S1},textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",tooltip:"{$field>/tooltip}",press:v1.bind(this)});this._sBoundProperty="text";return[T1];}function i1(i,R1){if(!this.getFieldHelp()){n1.call(this,"bool");}return b1.call(this,i,R1);}function j1(i,R1){H.call(this);this._bIsMeasure=true;var S1=M1.call(this);var T1=new i(R1,{value:{path:"$field>/conditions",type:S1},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:J},enabled:{path:"$field>/editMode",formatter:N},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",change:r1.bind(this),liveChange:u1.bind(this)});S1=N1.call(this);var U1=new i(R1+"-unit",{value:{path:"$field>/conditions",type:S1},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:J},enabled:{path:"$field>/editMode",formatter:N},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",width:"30%",tooltip:"{$field>/tooltip}",change:r1.bind(this),liveChange:u1.bind(this),valueHelpRequest:A1.bind(this)});H1.call(this,U1);this._sBoundProperty="value";return[T1,U1];}function k1(i,R1){H.call(this);this._bIsMeasure=true;var S1=sap.ui.require("sap/m/Token");var T1=sap.ui.require("sap/m/Input");var U1=L1.call(this);var V1=new S1(R1+"-token",{text:{path:'$field>',type:U1}});var W1=new j({path:"values",test:function($1){if(!Array.isArray($1[0])||$1[0][0]){return true;}else{return false;}}});var X1=new i(R1,{placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:J},enabled:{path:"$field>/editMode",formatter:N},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:false,width:"70%",tooltip:"{$field>/tooltip}",tokens:{path:"$field>/conditions",template:V1,filters:[W1]},dependents:[V1],change:r1.bind(this),liveChange:u1.bind(this),tokenUpdate:w1.bind(this)});var Y1=N1.call(this);var Z1=new T1(R1+"-unit",{value:{path:"$field>/conditions",type:Y1},placeholder:"{$field>/placeholder}",textAlign:"{$field>/textAlign}",textDirection:"{$field>/textDirection}",required:"{$field>/required}",editable:{path:"$field>/editMode",formatter:J},enabled:{path:"$field>/editMode",formatter:N},valueState:"{$field>/valueState}",valueStateText:"{$field>/valueStateText}",showValueHelp:"{$field>/_fieldHelpEnabled}",width:"30%",tooltip:"{$field>/tooltip}",change:r1.bind(this),liveChange:u1.bind(this),valueHelpRequest:A1.bind(this)});H1.call(this,Z1);this._sBoundProperty="value";return[X1,Z1];}function l1(i){if(i.onsapprevious){i._origOnsapprevious=i.onsapprevious;i.onsapprevious=function(R1){var S1=y1.call(this);if(R1.keyCode!==K.ARROW_UP&&(!S1||!S1.isOpen())){var i=this._getContent()[0];i._origOnsapprevious(R1);}}.bind(this);}if(i.onsapnext){i._origOnsapnext=i.onsapnext;i.onsapnext=function(R1){var S1=y1.call(this);if(R1.keyCode!==K.ARROW_DOWN&&(!S1||!S1.isOpen())){var i=this._getContent()[0];i._origOnsapnext(R1);}}.bind(this);}if(i.onsapup){i._origOnsapup=i.onsapup;i.onsapup=function(R1){var S1=y1.call(this);if(!S1||!S1.isOpen()){var i=this._getContent()[0];i._origOnsapup(R1);}}.bind(this);}if(i.onsapdown){i._origOnsapdown=i.onsapdown;i.onsapdown=function(R1){var S1=y1.call(this);if(!S1||!S1.isOpen()){var i=this._getContent()[0];i._origOnsapdown(R1);}}.bind(this);}if(i.onsapbackspace){i._origOnsapbackspace=i.onsapbackspace;i.onsapbackspace=function(R1){var S1=y1.call(this);if(!S1||!S1.isOpen()){var i=this._getContent()[0];i._origOnsapbackspace(R1);}}.bind(this);}}function m1(i){if(i._origOnsapprevious){i.onsapprevious=i._origOnsapprevious;delete i._origOnsapprevious;}if(i._origOnsapnext){i.onsapnext=i._origOnsapnext;delete i._origOnsapnext;}if(i._origOnsapup){i.onsapup=i._origOnsapup;delete i._origOnsapup;}if(i._origOnsapdown){i.onsapdown=i._origOnsapdown;delete i._origOnsapdown;}if(i._origOnsapbackspace){i.onsapbackspace=i._origOnsapbackspace;delete i._origOnsapbackspace;}}function n1(i){this.setProperty("_fieldHelpEnabled",true,true);this._sDefaultFieldHelp=u[i].id;var R1=u[i].control;if(!R1){if(u[i].promise){u[i].promise.then(o1.bind(this));}var S1=sap.ui.require(u[i].name);if(!S1&&!u[i].promise){u[i].promise=new Promise(function(T1){u[i].resolve=T1;sap.ui.require([u[i].name],function(U1){n1.call(this,i);}.bind(this));}.bind(this)).then(o1.bind(this));}if(S1){R1=new S1(u[i].id);u[i].control=R1;R1.connect(this);if(u[i].resolve){u[i].resolve();delete u[i].resolve;}if(!u[i].promise){o1.call(this);}}}}function o1(){x1.call(this,"BoolDefaultHelp","insert");H1.call(this,this.getAggregation("_content",[])[0]);}function p1(i){this._bParseError=true;}function q1(i){this._bParseError=true;}function r1(i){var R1={parameters:m({},i.getParameters()),source:i.getSource()};var S1=this._aAsyncChanges.length;if(S1>0&&!this._aAsyncChanges[S1-1].changeFired){this._aAsyncChanges[S1-1].changeFired=true;this._aAsyncChanges[S1-1].changeEvent=R1;_.call(this,undefined,undefined,undefined,this._aAsyncChanges[S1-1].promise);return;}var T1={changeEvent:R1};s1.call(this,T1);}function s1(R1){var S1=this.getConditions();var T1;var U1=true;var V1;var W1;var X1=R1.changeEvent.source;var Y1=false;if(R1.changeEvent.parameters.hasOwnProperty("valid")){U1=R1.changeEvent.parameters["valid"];if(!U1&&R1.changeEvent.parameters.hasOwnProperty("value")){V1=R1.changeEvent.parameters["value"];}}var Z1=false;var $1=this._sBoundProperty&&X1.getBindingInfo(this._sBoundProperty);if($1&&$1.binding&&$1.binding.sPath==="/conditions"&&U1){W1=S1[0];T1=S1[0]&&S1[0].values[0];}else if(R1.changeEvent.parameters.hasOwnProperty("value")){T1=R1.changeEvent.parameters["value"];if(U1){Z1=true;}}else if(R1.changeEvent.parameters.hasOwnProperty("query")){T1=R1.changeEvent.parameters["query"];Z1=true;}else{W1=S1[0];T1=S1[0]&&S1[0].values[0];}if(Z1){U.call(this);var _1;var a2;W1=S.resolve().then(function(){if(this._oNavigateCondition){U1=true;return this._oNavigateCondition;}else{_1=L1.call(this);var c2=_1.parseValue(T1);var d2=this._aAsyncChanges.length;if(d2>0&&!this._aAsyncChanges[d2-1].changeFired){a2=this._aAsyncChanges[d2-1];a2.changeFired=true;a2.changeEvent=R1.changeEvent;_.call(this,undefined,undefined,undefined,a2.promise);}return c2;}}.bind(this)).then(function(W1){t1.call(this,W1,S1,_1,U1,T1,X1,a2||R1);return W1;}.bind(this)).catch(function(c2){U1=false;V1=T1;T.call(this,c2.message);if(a2&&a2.reject){a2.reject(c2);}else if(Y1){this._fireChange(S1,U1,V1);}}.bind(this)).unwrap();if(W1 instanceof Promise){Y1=true;}}else if(this._oNavigateCondition){S1[0]=this._oNavigateCondition;if(this._bIsMeasure){for(var i=1;i<S1.length;i++){S1[i].values[0][1]=this._oNavigateCondition.values[0][1];if(S1[i].operator==="BT"){S1[i].values[1][1]=this._oNavigateCondition.values[0][1];}if(this._oNavigateCondition.inParameters){S1[i].inParameters=this._oNavigateCondition.inParameters;}if(this._oNavigateCondition.outParameters){S1[i].outParameters=this._oNavigateCondition.outParameters;}}}if(!f(S1,this.getConditions())){this.setProperty("conditions",S1,true);}}else if(!R1.changeEvent.parameters.hasOwnProperty("valid")&&this._bParseError){V1=R1.changeEvent.parameters["value"];U1=false;}var b2=y1.call(this);if(b2&&this._bConnected){if(sap.ui.getCore().getCurrentFocusedControlId()===X1.getId()){b2.close();}b2.setFilterValue("");if(!Y1){z1.call(this,S1,b2);}if(this.iLiveChangeTimer){clearTimeout(this.iLiveChangeTimer);}}if(this._oNavigateCondition){b2.onFieldChange();this._oNavigateCondition=undefined;}if(R1.resolve){Q1.call(this,R1);}else if(!Y1){_.call(this,S1,U1,V1);}}function t1(i,R1,S1,T1,U1,V1,W1){if(S1){S1.validateValue(i);}var X1=this.getMaxConditions();if(T1){if(i){if(this._bIsMeasure&&R1.length===1&&R1[0].values[0][0]===undefined){R1=[];}if(C.indexOfCondition(i,R1)>=0){throw new Error(this._oResourceBundle.getText("field.CONDITION_ALREADY_EXIST",[U1]));}else{if(X1>0&&X1<=R1.length){R1.splice(0,R1.length-X1+1);}R1.push(i);}}else if(X1===1){R1=[];}if(!f(R1,this.getConditions())){this.setProperty("conditions",R1,true);}if(X1!==1){V1.setValue("");}}if(W1.resolve){var Y1=y1.call(this);if(Y1&&this._bConnected){z1.call(this,R1,Y1);}W1.result=R1;Q1.call(this,W1);}}function u1(i){var R1;var S1;var T1=false;var U1=i.getSource();this._oNavigateCondition=undefined;if("value"in i.getParameters()){R1=i.getParameter("value");}if("escPressed"in i.getParameters()){T1=i.getParameter("escPressed");}if("previousValue"in i.getParameters()){S1=i.getParameter("previousValue");}else{var V1=this.getConditions();S1=V1[0]&&V1[0].values[0];}var W1=y1.call(this);if(W1&&W1.openByTyping()&&(!this._bIsMeasure||U1.getShowValueHelp())){var X1;if(R1[0]==="="&&R1[1]==="="){X1=R1.slice(2);}else if(R1[0]==="="){X1=R1.slice(1);}else{X1=R1;}var Y1=this.getDisplay();if(Y1!==o.Value){var Z1=this._getFilterOperatorConfig().getOperator("EEQ");var $1=Z1.splitText(X1,Y1);X1="";if($1[0]){X1=$1[0];if($1[1]){X1=X1+" ";}}if($1[1]){X1=X1+$1[1];}}if(this.iLiveChangeTimer){clearTimeout(this.iLiveChangeTimer);delete this.iLiveChangeTimer;}this.iLiveChangeTimer=setTimeout(function(){if(this._bConnected&&this._getContent()[0]&&(sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[0].getId()||(this._getContent()[1]&&sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[1].getId()))){W1.setFilterValue(X1);if(W1.getConditions().length>0){W1.setConditions([]);}W1.open(true);}}.bind(this),300);}this.fireLiveChange({value:R1,escPressed:T1,previousValue:S1});}function v1(i){var R1=this.getFieldInfo();if(R1){R1.getTriggerHref().then(function(S1){if(S1){window.location.href=S1;}else{R1.open(this._getContent()[0]);}}.bind(this));}this.firePress();}function w1(R1){if(R1.getParameter("type")==="removed"){var S1=R1.getParameter("removedTokens");var T1=this.getConditions();var U1;var i;for(i=0;i<S1.length;i++){var V1=S1[i];var W1=V1.getBindingContext("$field").sPath;var X1=parseInt(W1.slice(W1.lastIndexOf("/")+1));T1[X1].delete=true;}for(i=T1.length-1;i>=0;i--){if(T1[i].delete){if(this._bIsMeasure){U1=T1[i].values[0][1];}T1.splice(i,1);}}if(this._bIsMeasure&&U1&&T1.length===0){T1=[C.createItemCondition([undefined,U1],undefined)];}this.setProperty("conditions",T1,true);_.call(this,T1,true);}}function x1(i,R1){var S1=sap.ui.getCore().byId(i);if(R1==="remove"){S1.detachEvent("select",B1,this);S1.detachEvent("navigate",C1,this);S1.detachEvent("dataUpdate",D1,this);S1.detachEvent("disconnect",E1,this);this.setProperty("_fieldHelpEnabled",false,true);}else if(R1==="insert"){if(S1){S1.attachEvent("dataUpdate",D1,this);this.setProperty("_fieldHelpEnabled",true,true);}}I.call(this,this.getConditions());}function y1(){var i=this.getFieldHelp();var R1;if(!i&&this._sDefaultFieldHelp){i=this._sDefaultFieldHelp;}if(i){R1=sap.ui.getCore().byId(i);}return R1;}function z1(R1,S1){if(!S1){S1=y1.call(this);}if(this._bIsMeasure){var T1=[];for(var i=0;i<R1.length;i++){var U1=R1[i];if(U1.values[0]&&U1.values[0][1]){var V1=C.createItemCondition(U1.values[0][1],undefined,U1.inParameters,U1.outParameters);T1.push(V1);}}S1.setConditions(T1);}else{S1.setConditions(R1);}}function A1(i){var R1=y1.call(this);if(R1){R1.setFilterValue("");var S1=this.getConditions();z1.call(this,S1,R1);R1.toggleOpen(false);}}function B1(R1){var S1=this.getConditions();var T1=R1.getParameter("conditions");var U1=R1.getParameter("add");var V1=R1.oSource;var W1=this.getMaxConditions();var X1=Q.call(this);var Y1;var Z1=this.getControlForSuggestion();var $1;var i=0;if(this._bIsMeasure){if(T1.length>1){throw new Error("Only one item must be selected! "+this);}if(T1[0].operator!=="EEQ"){throw new Error("Only EEQ allowed! "+this);}if(S1.length>0){for(i=0;i<S1.length;i++){S1[i].values[0][1]=T1[0].values[0];if(S1[i].operator==="BT"){S1[i].values[1][1]=T1[0].values[0];}if(T1[0].inParameters){S1[i].inParameters=T1[0].inParameters;}if(T1[0].outParameters){S1[i].outParameters=T1[0].outParameters;}}}else{Y1=m({},T1[0]);Y1.values[0]=[undefined,Y1.values[0]];Y1.values[1]=undefined;S1.push(Y1);if(this._oConditionType){$1=this._oConditionType.formatValue(Y1);}else if(this._oConditionsType){$1=this._oConditionsType.formatValue(S1);}}}else{if(!U1){S1=[];}for(i=0;i<T1.length;i++){Y1=T1[i];if(X1&&Y1.operator!=="EQ"&&Y1.operator!=="EEQ"){continue;}if(X1&&this._checkValueInitial(Y1.values[0])){L.warning("FieldBase","Entry with empty key not valid! It is not taken into the field");continue;}if(!U1||C.indexOfCondition(Y1,S1)===-1){S1.push(Y1);}}}if(W1>0&&W1<S1.length){S1.splice(0,S1.length-W1);}if(f(S1,this.getConditions())){if(Z1&&Z1.setDOMValue&&this.getMaxConditionsForHelp()===1&&S1.length>0){if(this._bIsMeasure&&this._oUnitConditionsType){$1=this._oUnitConditionsType.formatValue(S1);}else if(this._oConditionType){$1=this._oConditionType.formatValue(S1[0]);}else if(this._oConditionsType){$1=this._oConditionsType.formatValue(S1);}Z1.setDOMValue($1);}}else{if(Z1&&Z1.setDOMValue){if(W1!==1){Z1.setDOMValue("");}}this._oNavigateCondition=undefined;this.setProperty("conditions",S1,true);V1.onFieldChange();_.call(this,S1,true);}}function C1(i){var R1=i.getParameter("value");var S1=i.getParameter("key");var T1=i.getParameter("condition");var U1;var V1;var W1=this.getControlForSuggestion();var X1=Q.call(this);if(T1){this._oNavigateCondition=m({},T1);S1=T1.values[0];R1=T1.values[1];}else{this._oNavigateCondition=C.createItemCondition(S1,R1);}if(X1&&this._checkValueInitial(S1)){L.warning("FieldBase","Entry with empty key not valid! It is not taken into the field");this._oNavigateCondition=undefined;R1="";}if(this._bIsMeasure){var Y1=this.getConditions();if(Y1.length>0){this._oNavigateCondition.operator=Y1[0].operator;this._oNavigateCondition.values[0]=[Y1[0].values[0][0],this._oNavigateCondition.values[0]];if(Y1[0].operator==="BT"){this._oNavigateCondition.values[1]=[Y1[0].values[1][0],this._oNavigateCondition.values[0][1]];}else{this._oNavigateCondition.values[1]=undefined;}}else{this._oNavigateCondition.values[0]=[undefined,this._oNavigateCondition.values[0]];}}if(this.getDisplay()!==o.Value){U1=S1;}else if(R1){U1=R1;}else{U1=S1;}if(W1&&W1.setDOMValue){if(!V1){if(this._bIsMeasure&&this._oUnitConditionsType&&this._oNavigateCondition){V1=this._oUnitConditionsType.formatValue([this._oNavigateCondition]);}else if(this._oConditionType&&this._oNavigateCondition){V1=this._oConditionType.formatValue(this._oNavigateCondition);}else if(this._oConditionsType&&this._oNavigateCondition){V1=this._oConditionsType.formatValue([this._oNavigateCondition]);}else{V1=R1||S1;}}W1.setDOMValue(V1);W1._doSelect();}this.fireLiveChange({value:U1});}function D1(i){var R1=this.getEditMode()===E.Editable&&this._getContent().length>0&&sap.ui.getCore().getCurrentFocusedControlId()===this._getContent()[0].getId();if(!R1&&this.getConditions().length>0&&(this.getMaxConditions()!==1||(this.getDisplay()!==o.Value&&!this._bParseError))){this._oManagedObjectModel.checkUpdate(true);}}function E1(i){var R1=y1.call(this);R1.detachEvent("select",B1,this);R1.detachEvent("navigate",C1,this);R1.detachEvent("disconnect",E1,this);this._bConnected=false;}function F1(){var i=y1.call(this);if(i&&!this._bConnected){i.connect(this);this._bConnected=true;i.attachEvent("select",B1,this);i.attachEvent("navigate",C1,this);i.attachEvent("disconnect",E1,this);var R1=this.getConditions();z1.call(this,R1,i);var S1=this.getControlForSuggestion();G1.call(this,S1);}}function G1(i){if(i&&!i.orgOnsapfocusleave&&i.onsapfocusleave){i.orgOnsapfocusleave=i.onsapfocusleave;i.onsapfocusleave=function(R1){var S1=y1.call(this.getParent());if(S1){var T1=sap.ui.getCore().byId(R1.relatedControlId);if(T1&&h(S1.getDomRef(),T1.getFocusDomRef())){R1.stopPropagation();return;}}this.orgOnsapfocusleave(R1);};}}function H1(i){var R1=y1.call(this);if(R1&&i&&i.addEndIcon){var S1=R1.getIcon();var T1=i.getAggregation("_endIcon",[])[0];if(T1){T1.setSrc(S1);}else{i.addEndIcon({id:i.getId()+"-vhi",src:S1,useIconTooltip:false,noTabStop:true,press:function(U1){if(!this.getValueHelpOnly()){var V1;if(D.support.touch){V1=this.$('inner');V1.attr('readonly','readonly');this.focus();V1.removeAttr('readonly');}else{this.focus();}this.bValueHelpRequested=true;this.fireValueHelpRequest({fromSuggestions:false});}}.bind(i)});}}}function I1(i,R1){if(R1==="remove"){i.detachEvent("dataUpdate",J1,this);}else if(R1==="insert"){i.attachEvent("dataUpdate",J1,this);J1.call(this);}}function J1(){var i=this.getFieldInfo();var R1=this;i.isTriggerable().then(function(S1){R1._bTriggerable=S1;if(R1.getAggregation("_content")&&R1.getEditMode()===E.Display){Z.call(R1);}});}r.prototype._getFormatOptions=function(){return{onlyEEQ:Q.call(this),valueType:x.call(this),originalDateType:this._oDateOriginalType||this._oUnitOriginalType,display:this._bIsMeasure?o.Value:this.getDisplay(),fieldHelpID:this._bIsMeasure?undefined:this.getFieldHelp()||this._sDefaultFieldHelp,filterOperatorConfig:this._getFilterOperatorConfig(),hideOperator:this._bHideOperator,maxConditions:this.getMaxConditions(),bindingContext:this.getBindingContext(),asyncParsing:P1.bind(this)};};function K1(){if(this._oConditionType||this._oConditionsType){var i=this._getFormatOptions();if(this._oConditionType){this._oConditionType.setFormatOptions(i);}if(this._oConditionsType){this._oConditionsType.setFormatOptions(i);}}}function L1(){if(!this._oConditionType){this._oConditionType=new b();K1.call(this);}return this._oConditionType;}function M1(){if(!this._oConditionsType){this._oConditionsType=new c();K1.call(this);}return this._oConditionsType;}r.prototype._checkValueInitial=function(i){if(i===null||i===undefined){return true;}if(i===""){var R1=x.call(this);var S1=R1.parseValue(i,"string");if(S1===i){return true;}else{try{R1.validateValue(S1);}catch(T1){return true;}}}return false;};function N1(){if(!this._oUnitConditionsType){var i=O1.call(this);this._oUnitConditionsType=new c(i);}return this._oUnitConditionsType;}function O1(){return{onlyEEQ:true,valueType:undefined,originalDateType:x.call(this),display:this.getDisplay(),fieldHelpID:this.getFieldHelp()||this._sDefaultFieldHelp,filterOperatorConfig:this._getFilterOperatorConfig(),hideOperator:true,maxConditions:1,bindingContext:this.getBindingContext(),asyncParsing:P1.bind(this),isUnit:true,getConditions:this.getConditions.bind(this)};}function P1(i){var R1=y1.call(this);if(R1&&R1.isOpen()){R1.close();}var S1={};var T1=new Promise(function(U1,V1){S1.resolve=U1;S1.reject=V1;i.then(function(W1){S1.result=W1;var X1=this.getConditions();if(f(W1,X1)){Q1.call(this,S1);}else{S1.waitForUpdate=true;}}.bind(this)).catch(function(W1){this._bParseError=true;V1(W1);}.bind(this));}.bind(this));S1.promise=T1;this._aAsyncChanges.push(S1);}r.prototype._getResultForPromise=function(i){return i;};function Q1(i){i.resolve(this._getResultForPromise(i.result));}return r;},true);
